var zi=Object.defineProperty,Zi=Object.defineProperties;var Ji=Object.getOwnPropertyDescriptors;var Tn=Object.getOwnPropertySymbols;var ji=Object.prototype.hasOwnProperty,$i=Object.prototype.propertyIsEnumerable;var jt=Math.pow,wn=(d,e,t)=>e in d?zi(d,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[e]=t,M=(d,e)=>{for(var t in e||(e={}))ji.call(e,t)&&wn(d,t,e[t]);if(Tn)for(var t of Tn(e))$i.call(e,t)&&wn(d,t,e[t]);return d},Se=(d,e)=>Zi(d,Ji(e));var U=(d,e,t)=>new Promise((n,i)=>{var r=c=>{try{a(t.next(c))}catch(u){i(u)}},o=c=>{try{a(t.throw(c))}catch(u){i(u)}},a=c=>c.done?n(c.value):Promise.resolve(c.value).then(r,o);a((t=t.apply(d,e)).next())});import{PublicKey as Zt,Transaction as We}from"@solana/web3.js";import Rt from"bn.js";import{PublicKey as co}from"@solana/web3.js";import hn,{isBN as Rn}from"bn.js";import{bits as hr,BitStructure as Rr,blob as eo,Blob as Br,cstr as Cr,f32 as Dr,f32be as Nr,f64 as Or,f64be as Ur,greedy as Er,Layout as to,ns64 as Mr,ns64be as qr,nu64 as Kr,nu64be as Vr,offset as _r,s16 as vr,s16be as Fr,s24 as Wr,s24be as Gr,s32 as no,s32be as Yr,s40 as Xr,s40be as Hr,s48 as Qr,s48be as zr,s8 as Zr,seq as io,struct as Jr,Structure as oo,u16 as ro,u16be as jr,u24 as $r,u24be as es,u32 as ts,u32be as ns,u40 as is,u40be as os,u48 as rs,u48be as ss,u8 as so,UInt as ao,union as as,Union as cs,unionLayoutDiscriminator as us,utf8 as ms}from"@solana/buffer-layout";var $t=to,In=oo;var en=ao;var Ln=so,je=ro;var we=no;var xn=io;var ge=eo;var lt=class extends $t{constructor(t,n,i){super(t,i);this.blob=ge(t),this.signed=n}decode(t,n=0){let i=new hn(this.blob.decode(t,n),10,"le");return this.signed?i.fromTwos(this.span*8).clone():i}encode(t,n,i=0){return typeof t=="number"&&(t=new hn(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),n,i)}};function _(d){return new en(1,d)}function Ie(d){return new en(4,d)}function S(d){return new lt(8,!1,d)}function E(d){return new lt(16,!1,d)}function Bn(d){return new lt(16,!0,d)}var Dt=class extends $t{constructor(t,n,i,r){super(t.span,r);this.layout=t,this.decoder=n,this.encoder=i}decode(t,n){return this.decoder(this.layout.decode(t,n))}encode(t,n,i){return this.layout.encode(this.encoder(t),n,i)}getSpan(t,n){return this.layout.getSpan(t,n)}};function B(d){return new Dt(ge(32),e=>new co(e),e=>e.toBuffer(),d)}function Nt(d){return new Dt(Ln(),uo,mo,d)}function uo(d){if(d===0)return!1;if(d===1)return!0;throw new Error("Invalid bool: "+d)}function mo(d){return d?1:0}var tn=class extends In{decode(e,t){return super.decode(e,t)}};function N(d,e,t){return new tn(d,e,t)}function ee(d,e,t){let n,i=typeof e=="number"?e:Rn(e)?e.toNumber():new Proxy(e,{get(r,o){if(!n){let a=Reflect.get(r,"count");n=Rn(a)?a.toNumber():a,Reflect.set(r,"count",n)}return Reflect.get(r,o)},set(r,o,a){return o==="count"&&(n=a),Reflect.set(r,o,a)}});return xn(d,i,t)}import Zn from"bn.js";import{PublicKey as Co}from"@solana/web3.js";import{PublicKey as Lo}from"@solana/web3.js";import{BN as xo}from"bn.js";import go from"big.js";import qt from"bn.js";import Ut from"bn.js";import Ue from"bn.js";var O=new Ue(0),J=new Ue(1),Ls=new Ue(2),xs=new Ue(3),hs=new Ue(5),Ot=new Ue(10),Cn=new Ue(100),Rs=new Ue(1e3),Bs=new Ue(1e4);var Et=H.from("entity/bignumber"),Dn=9007199254740991;function X(d){return d instanceof Ut?d:typeof d=="string"?d.match(/^-?[0-9]+$/)?new Ut(d):Et.throwArgumentError("invalid BigNumberish string","value",d):typeof d=="number"?d%1?Et.throwArgumentError("BigNumberish number underflow","value",d):d>=Dn||d<=-Dn?Et.throwArgumentError("BigNumberish number overflow","value",d):new Ut(String(d)):typeof d=="bigint"?new Ut(d.toString()):Et.throwArgumentError("invalid BigNumberish value","value",d)}function nn(d){return Ot.pow(X(d))}function on(d,e){let t=d.divmod(e);return t.mod.isZero()?t.div:t.div.isNeg()?t.div.isubn(1):t.div.iaddn(1)}var $e={symbol:"SOL",name:"Solana",decimals:9},be={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}};var s={WSOL:M({},be),BTC:{symbol:"BTC",name:"Bitcoin",mint:"9n4nbM75f5Ui33ZbPYXn59EwSgE8CGsHtAeTH5YFeJ9E",decimals:6,extensions:{coingeckoId:"bitcoin"}},ETH:{symbol:"ETH",name:"Ethereum",mint:"2FPyTwcZLUg1MDrwsyoP4D6s1tM7hAkHYRjkNb5w6Pxk",decimals:6,extensions:{coingeckoId:"ethereum"}},USDT:{symbol:"USDT",name:"Tether",mint:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",decimals:6,extensions:{coingeckoId:"tether"}},WUSDT:{symbol:"WUSDT",name:"Wrapped USDT",mint:"BQcdHdAQW1hczDbBi9hiegXAR7A98Q9jx3X3iBBBDiq4",decimals:6,extensions:{coingeckoId:"tether"}},USDC:{symbol:"USDC",name:"USD Coin",mint:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",decimals:6,extensions:{coingeckoId:"usd-coin"}},WUSDC:{symbol:"WUSDC",name:"Wrapped USDC",mint:"BXXkv6z8ykpG1yuvUDPgh732wzVHB69RnB9YgSYh3itW",decimals:6,extensions:{coingeckoId:"usd-coin"}},YFI:{symbol:"YFI",name:"YFI",mint:"3JSf5tPeuscJGtaCp5giEiDhv51gQ4v3zWg8DGgyLfAB",decimals:6,extensions:{coingeckoId:"yearn-finance"}},LINK:{symbol:"LINK",name:"Chainlink",mint:"CWE8jPTUYhdCTZYWPTe1o5DFqfdjzWKc9WKz6rSjQUdG",decimals:6,extensions:{coingeckoId:"chainlink"}},XRP:{symbol:"XRP",name:"XRP",mint:"Ga2AXHpfAF6mv2ekZwcsJFqu7wB4NV331qNH7fW9Nst8",decimals:6,extensions:{coingeckoId:"ripple"}},SUSHI:{symbol:"SUSHI",name:"SUSHI",mint:"AR1Mtgh7zAtxuxGd2XPovXPVjcSdY3i4rQYisNadjfKy",decimals:6,extensions:{coingeckoId:"sushi"}},ALEPH:{symbol:"ALEPH",name:"ALEPH",mint:"CsZ5LZkDS7h9TDKjrbL7VAwQZ9nsRu8vJLhRYfmGaN8K",decimals:6,extensions:{coingeckoId:"aleph"}},SXP:{symbol:"SXP",name:"SXP",mint:"SF3oTvfWzEP3DTwGSvUXRrGTvr75pdZNnBLAH9bzMuX",decimals:6,extensions:{coingeckoId:"swipe"}},HGET:{symbol:"HGET",name:"HGET",mint:"BtZQfWqDGbk9Wf2rXEiWyQBdBY1etnUUn6zEphvVS7yN",decimals:6,extensions:{coingeckoId:"hedget"}},CREAM:{symbol:"CREAM",name:"CREAM",mint:"5Fu5UUgbjpUvdBveb3a1JTNirL8rXtiYeSMWvKjtUNQv",decimals:6,extensions:{coingeckoId:"cream-2"}},UNI:{symbol:"UNI",name:"UNI",mint:"DEhAasscXF4kEGxFgJ3bq4PpVGp5wyUxMRvn6TzGVHaw",decimals:6,extensions:{coingeckoId:"uniswap"}},SRM:{symbol:"SRM",name:"Serum",mint:"SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt",decimals:6,extensions:{coingeckoId:"serum"}},FTT:{symbol:"FTT",name:"FTX Token",mint:"AGFEad2et2ZJif9jaGpdMixQqvW5i81aBdvKe7PHNfz3",decimals:6,extensions:{coingeckoId:"ftx-token"}},MSRM:{symbol:"MSRM",name:"MegaSerum",mint:"MSRMcoVyrFxnSgo5uXwone5SKcGhT1KEJMFEkMEWf9L",decimals:0,extensions:{coingeckoId:"megaserum"}},TOMO:{symbol:"TOMO",name:"TOMO",mint:"GXMvfY2jpQctDqZ9RoU3oWPhufKiCcFEfchvYumtX7jd",decimals:6,extensions:{coingeckoId:"tomochain"}},KARMA:{symbol:"KARMA",name:"KARMA",mint:"EcqExpGNFBve2i1cMJUTR4bPXj4ZoqmDD2rTkeCcaTFX",decimals:4,extensions:{coingeckoId:"karma-dao"}},LUA:{symbol:"LUA",name:"LUA",mint:"EqWCKXfs3x47uVosDpTRgFniThL9Y8iCztJaapxbEaVX",decimals:6,extensions:{coingeckoId:"lua-token"}},MATH:{symbol:"MATH",name:"MATH",mint:"GeDS162t9yGJuLEHPWXXGrb1zwkzinCgRwnT8vHYjKza",decimals:6,extensions:{coingeckoId:"math"}},KEEP:{symbol:"KEEP",name:"KEEP",mint:"GUohe4DJUA5FKPWo3joiPgsB7yzer7LpDmt1Vhzy3Zht",decimals:6,extensions:{coingeckoId:"keep-network"}},SWAG:{symbol:"SWAG",name:"SWAG",mint:"9F9fNTT6qwjsu4X4yWYKZpsbw5qT7o6yR2i57JF2jagy",decimals:6,extensions:{coingeckoId:"swag-finance"}},FIDA:{symbol:"FIDA",name:"Bonfida",mint:"EchesyfXePKdLtoiZSL8pBe8Myagyy8ZRqsACNCFGnvp",decimals:6,extensions:{coingeckoId:"bonfida"}},KIN:{symbol:"KIN",name:"Kin",mint:"kinXdEcpDQeHPEuQnqmUgtYykqKGVFq6CeVX5iAHJq6",decimals:5,extensions:{coingeckoId:"kin"}},MAPS:{symbol:"MAPS",name:"MAPS",mint:"MAPS41MDahZ9QdKXhVa4dWB9RuyfV4XqhyAZ8XcYepb",decimals:6,extensions:{coingeckoId:"maps"}},OXY:{symbol:"OXY",name:"Oxygen",mint:"z3dn17yLaGMKffVogeFHQ9zWVcXgqgf3PQnDsNs2g6M",decimals:6,extensions:{coingeckoId:"oxygen"}},RAY:{symbol:"RAY",name:"Raydium",mint:"4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R",decimals:6,extensions:{coingeckoId:"raydium"}},xCOPE:{symbol:"xCOPE",name:"xCOPE",mint:"3K6rftdAaQYMPunrtNRHgnK2UAtjm2JwyT2oCiTDouYE",decimals:0,extensions:{coingeckoId:"cope"}},COPE:{symbol:"COPE",name:"Cope",mint:"8HGyAAB1yoM1ttS7pXjHMa3dukTFGQggnFFH3hJZgzQh",decimals:6,extensions:{coingeckoId:"cope"}},STEP:{symbol:"STEP",name:"Step Finance",mint:"StepAscQoEioFxxWGnh2sLBDFp9d8rvKz2Yp39iDpyT",decimals:9,extensions:{coingeckoId:"step-finance"}},MEDIA:{symbol:"MEDIA",name:"Media Network",mint:"ETAtLmCmsoiEEKfNrHKJ2kYy3MoABhU6NQvpSfij5tDs",decimals:6,extensions:{coingeckoId:"media-network"}},ROPE:{symbol:"ROPE",name:"Rope Token",mint:"8PMHT4swUMtBzgHnh5U564N5sjPSiUz2cjEQzFnnP1Fo",decimals:9,extensions:{coingeckoId:"rope-token"}},MER:{symbol:"MER",name:"Mercurial",mint:"MERt85fc5boKw3BW1eYdxonEuJNvXbiMbs6hvheau5K",decimals:6,extensions:{coingeckoId:"mercurial"}},TULIP:{symbol:"TULIP",name:"Tulip Protocol",mint:"TuLipcqtGVXP9XR62wM8WWCm6a9vhLs7T1uoWBk6FDs",decimals:6,extensions:{coingeckoId:"solfarm"}},SNY:{symbol:"SNY",name:"SNY",mint:"4dmKkXNHdgYsXqBHCuMikNQWwVomZURhYvkkX5c4pQ7y",decimals:6,extensions:{coingeckoId:"synthetify-token"}},SLRS:{symbol:"SLRS",name:"SLRS",mint:"SLRSSpSLUTP7okbCUBYStWCo1vUgyt775faPqz8HUMr",decimals:6,extensions:{coingeckoId:"solrise-finance"}},WOO:{symbol:"WOO",name:"WOO Network",mint:"E5rk3nmgLUuKUiS94gg4bpWwWwyjCMtddsAXkTFLtHEy",decimals:6,extensions:{coingeckoId:"woo-network"}},BOP:{symbol:"BOP",name:"Boring Protocol",mint:"BLwTnYKqf7u4qjgZrrsKeNs2EzWkMLqVCu6j8iHyrNA3",decimals:8,extensions:{coingeckoId:"boring-protocol"}},SAMO:{symbol:"SAMO",name:"Samoyedcoin",mint:"7xKXtg2CW87d97TXJSDpbD5jBkheTqA83TZRuJosgAsU",decimals:9,extensions:{coingeckoId:"samoyedcoin"}},renBTC:{symbol:"renBTC",name:"renBTC",mint:"CDJWUqTcYTVAKXAVXoQZFes5JUFc7owSeq7eMQcDSbo5",decimals:8,extensions:{coingeckoId:"renbtc"}},renDOGE:{symbol:"renDOGE",name:"renDOGE",mint:"ArUkYE2XDKzqy77PRRGjo4wREWwqk6RXTfM9NeqzPvjU",decimals:8,extensions:{coingeckoId:"rendoge"}},LIKE:{symbol:"LIKE",name:"Only1",mint:"3bRTivrVsitbmCTGtqwp7hxXPsybkjn4XLNtPsHqa3zR",decimals:9,extensions:{coingeckoId:"only1"}},DXL:{symbol:"DXL",name:"Dexlab",mint:"GsNzxJfFn6zQdJGeYsupJWzUAm57Ba7335mfhWvFiE9Z",decimals:6,extensions:{coingeckoId:"dexlab"}},mSOL:{symbol:"mSOL",name:"Marinade staked SOL",mint:"mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So",decimals:9,extensions:{coingeckoId:"msol"}},PAI:{symbol:"PAI",name:"Parrot USD",mint:"Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS",decimals:6,extensions:{coingeckoId:"parrot-usd"}},PORT:{symbol:"PORT",name:"Port Finance",mint:"PoRTjZMPXb9T7dyU7tpLEZRQj7e6ssfAE62j2oQuc6y",decimals:6,extensions:{coingeckoId:"port-finance"}},MNGO:{symbol:"MNGO",name:"Mango",mint:"MangoCzJ36AjZyKwVj3VnYU4GTonjfVEnJmvvWaxLac",decimals:6,extensions:{coingeckoId:"mango-markets"}},CRP:{symbol:"CRP",name:"CropperFinance",mint:"DubwWZNWiNGMMeeQHPnMATNj77YZPZSAz2WVR5WjLJqz",decimals:9,extensions:{coingeckoId:"cropperfinance"}},ATLAS:{symbol:"ATLAS",name:"Star Atlas",mint:"ATLASXmbPQxBUYbxPsV97usA3fPQYEqzQBUHgiFCUsXx",decimals:8,extensions:{coingeckoId:"star-atlas"}},POLIS:{symbol:"POLIS",name:"Star Atlas DAO",mint:"poLisWXnNRwC6oBu1vHiuKQzFjGL4XDSu4g9qjz9qVk",decimals:8,extensions:{coingeckoId:"star-atlas-dao"}},GRAPE:{symbol:"GRAPE",name:"Grape Protocol",mint:"8upjSpvjcdpuzhfR1zriwg5NXkwDruejqNE9WNbPRtyA",decimals:6,extensions:{coingeckoId:"grape-2"}},GENE:{symbol:"GENE",name:"Genopets",mint:"GENEtH5amGSi8kHAtQoezp1XEXwZJ8vcuePYnXdKrMYz",decimals:9,extensions:{coingeckoId:"genopets"}},DFL:{symbol:"DFL",name:"DeFi Land",mint:"DFL1zNkaGPWm1BqAVqRjCZvHmwTFrEaJtbzJWgseoNJh",decimals:9,extensions:{coingeckoId:"defi-land"}},CHEEMS:{symbol:"CHEEMS",name:"Cheems",mint:"3FoUAsGDbvTD6YZ4wVKJgTB76onJUKz7GPEBNiR5b8wc",decimals:4,extensions:{coingeckoId:"cheems"}},stSOL:{symbol:"stSOL",name:"Lido Staked SOL",mint:"7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj",decimals:9,extensions:{coingeckoId:"lido-staked-sol"}},LARIX:{symbol:"LARIX",name:"Larix",mint:"Lrxqnh6ZHKbGy3dcrCED43nsoLkM1LTzU2jRfWe8qUC",decimals:6,extensions:{coingeckoId:"larix"}},RIN:{symbol:"RIN",name:"Aldrin",mint:"E5ndSkaB17Dm7CsD22dvcjfrYSDLCxFcMd6z8ddCk5wp",decimals:9,extensions:{coingeckoId:"aldrin"}},APEX:{symbol:"APEX",name:"ApeXit Finance",mint:"51tMb3zBKDiQhNwGqpgwbavaGH54mk8fXFzxTc1xnasg",decimals:9,extensions:{coingeckoId:"apexit-finance"}},MNDE:{symbol:"MNDE",name:"Marinade",mint:"MNDEFzGvMt87ueuHvVU9VcTqsAP5b3fTGPsHuuPA5ey",decimals:9,extensions:{coingeckoId:"marinade"}},LIQ:{symbol:"LIQ",name:"LIQ Protocol",mint:"4wjPQJ6PrkC4dHhYghwJzGBVP78DkBzA2U3kHoFNBuhj",decimals:6,extensions:{coingeckoId:"liq-protocol"}},WAG:{symbol:"WAG",name:"Waggle Network",mint:"5tN42n9vMi6ubp67Uy4NnmM5DMZYN8aS8GeB3bEDHr6E",decimals:9,extensions:{coingeckoId:"waggle-network"}},wLDO:{symbol:"wLDO",name:"wLDO",mint:"HZRCwxP2Vq9PCpPXooayhJ2bxTpo5xfpQrwB1svh332p",decimals:8,extensions:{}},SLIM:{symbol:"SLIM",name:"Solanium",mint:"xxxxa1sKNGwFtw2kFn8XauW9xq8hBZ5kVtcSesTT9fW",decimals:6,extensions:{coingeckoId:"solanium"}},PRT:{symbol:"PRT",name:"Parrot Protocol",mint:"PRT88RkA4Kg5z7pKnezeNH4mafTvtQdfFgpQTGRjz44",decimals:6,extensions:{coingeckoId:"parrot-protocol"}},SBR:{symbol:"SBR",name:"SBR",mint:"Saber2gLauYim4Mvftnrasomsv6NvAuncvMEZwcLpD1",decimals:6,extensions:{}},FAB:{symbol:"FAB",name:"Fabric",mint:"EdAhkbj5nF9sRM7XN7ewuW8C9XEUMs8P7cnoQ57SYE96",decimals:9,extensions:{coingeckoId:"fabric"}},ABR:{symbol:"ABR",name:"Allbridge",mint:"a11bdAAuV8iB2fu7X6AxAvDTo1QZ8FXB3kk5eecdasp",decimals:9,extensions:{coingeckoId:"allbridge"}},IVN:{symbol:"IVN",name:"Investin",mint:"iVNcrNE9BRZBC9Aqf753iZiZfbszeAVUoikgT9yvr2a",decimals:6,extensions:{coingeckoId:"investin"}},CYS:{symbol:"CYS",name:"Cyclos",mint:"BRLsMczKuaR5w9vSubF4j8HwEGGprVAyyVgS4EX7DKEg",decimals:6,extensions:{coingeckoId:"cyclos"}},FRKT:{symbol:"FRKT",name:"FRAKT Token",mint:"ErGB9xa24Szxbk1M28u2Tx8rKPqzL6BroNkkzk5rG4zj",decimals:8,extensions:{coingeckoId:"frakt-token"}},AURY:{symbol:"AURY",name:"Aurory",mint:"AURYydfxJib1ZkTir1Jn1J9ECYUtjb6rKQVmtYaixWPP",decimals:9,extensions:{coingeckoId:"aurory"}},SYP:{symbol:"SYP",name:"Sypool",mint:"FnKE9n6aGjQoNWRBZXy4RW6LZVao7qwBonUbiD7edUmZ",decimals:9,extensions:{coingeckoId:"sypool"}},WOOF:{symbol:"WOOF",name:"WOOF",mint:"9nEqaUcb16sQ3Tn1psbkWqyhPdLmfHWjKGymREjsAgTE",decimals:6,extensions:{coingeckoId:"woof-token"}},ORCA:{symbol:"ORCA",name:"Orca",mint:"orcaEKTdK7LKz57vaAYr9QeNsVEPfiu6QeMU1kektZE",decimals:6,extensions:{coingeckoId:"orca"}},SLND:{symbol:"SLND",name:"Solend",mint:"SLNDpmoWTVADgEdndyvWzroNL7zSi1dF9PC3xHGtPwp",decimals:6,extensions:{coingeckoId:"solend"}},weWETH:{symbol:"weWETH",name:"weWETH",mint:"7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs",decimals:8,extensions:{}},weUNI:{symbol:"weUNI",name:"weUNI",mint:"8FU95xFJhUUkyyCLU13HSzDLs7oC4QZdXQHL6SCeab36",decimals:8,extensions:{}},weSUSHI:{symbol:"weSUSHI",name:"weSUSHI",mint:"ChVzxWRmrTeSgwd3Ui3UumcN8KX7VK3WaD4KGeSKpypj",decimals:8,extensions:{}},GOFX:{symbol:"GOFX",name:"GooseFX",mint:"GFX1ZjR2P15tmrSwow6FjyDYcEkoFb4p4gJCpLBjaxHD",decimals:9,extensions:{coingeckoId:"goosefx"}},IN:{symbol:"IN",name:"Invictus",mint:"inL8PMVd6iiW3RCBJnr5AsrRN6nqr4BTrcNuQWQSkvY",decimals:9,extensions:{coingeckoId:"invictus"}},weDYDX:{symbol:"weDYDX",name:"weDYDX",mint:"4Hx6Bj56eGyw8EJrrheM6LBQAvVYRikYCWsALeTrwyRU",decimals:8,extensions:{}},STARS:{symbol:"STARS",name:"StarLaunch",mint:"HCgybxq5Upy8Mccihrp7EsmwwFqYZtrHrsmsKwtGXLgW",decimals:6,extensions:{coingeckoId:"starlaunch"}},weAXS:{symbol:"weAXS",name:"weAXS",mint:"HysWcbHiYY9888pHbaqhwLYZQeZrcQMXKQWRqS7zcPK5",decimals:8,extensions:{}},weSHIB:{symbol:"weSHIB",name:"weSHIB",mint:"CiKu4eHsVrc1eueVQeHn7qhXTcVu95gSQmBpX4utjL9z",decimals:8,extensions:{}},OXS:{symbol:"OXS",name:"Oxbull Solana",mint:"4TGxgCSJQx2GQk9oHZ8dC5m3JNXTYZHjXumKAW3vLnNx",decimals:9,extensions:{coingeckoId:"oxbull-solana"}},CWAR:{symbol:"CWAR",name:"Cryowar",mint:"HfYFjMKNZygfMC8LsQ8LtpPsPxEJoXJx4M6tqi75Hajo",decimals:9,extensions:{coingeckoId:"cryowar-token"}},UPS:{symbol:"UPS",name:"UPFI Network",mint:"EwJN2GqUGXXzYmoAciwuABtorHczTA5LqbukKXV1viH7",decimals:6,extensions:{coingeckoId:"upfi-network"}},weSAND:{symbol:"weSAND",name:"weSAND",mint:"49c7WuCZkQgc3M4qH8WuEUNXfgwupZf1xqWkDQ7gjRGt",decimals:8,extensions:{}},weMANA:{symbol:"weMANA",name:"weMANA",mint:"7dgHoN8wBZCc5wbnQ2C47TDnBMAxG4Q5L3KjP67z8kNi",decimals:8,extensions:{}},CAVE:{symbol:"CAVE",name:"Crypto Cavemen",mint:"4SZjjNABoqhbd4hnapbvoEPEqT8mnNkfbEoAwALf1V8t",decimals:6,extensions:{coingeckoId:"cave"}},JSOL:{symbol:"JSOL",name:"JPool",mint:"7Q2afV64in6N6SeZsAAB81TJzwDoD6zpqmHkzi9Dcavn",decimals:9,extensions:{coingeckoId:"jpool"}},APT:{symbol:"APT",name:"Apricot",mint:"APTtJyaRX5yGTsJU522N4VYWg3vCvSb65eam5GrPT5Rt",decimals:6,extensions:{coingeckoId:"apricot"}},SONAR:{symbol:"SONAR",name:"SonarWatch",mint:"sonarX4VtVkQemriJeLm6CKeW3GDMyiBnnAEMw1MRAE",decimals:9,extensions:{coingeckoId:"sonarwatch"}},SHILL:{symbol:"SHILL",name:"SHILL Token",mint:"6cVgJUqo4nmvQpbgrDZwyfd6RwWw5bfnCamS3M9N1fd",decimals:6,extensions:{coingeckoId:"shill-token"}},TTT:{symbol:"TTT",name:"TabTrader",mint:"FNFKRV3V8DtA3gVJN6UshMiLGYA8izxFwkNWmJbFjmRj",decimals:6,extensions:{coingeckoId:"tabtrader"}},BOKU:{symbol:"BOKU",name:"Boryoku Dragonz",mint:"CN7qFa5iYkHz99PTctvT4xXUHnxwjQ5MHxCuTJtPN5uS",decimals:9,extensions:{coingeckoId:"boku"}},MIMO:{symbol:"MIMO",name:"Million Monke",mint:"9TE7ebz1dsFo1uQ2T4oYAKSm39Y6fWuHrd6Uk6XaiD16",decimals:9,extensions:{coingeckoId:"million-monke"}},wbWBNB:{symbol:"wbWBNB",name:"wbWBNB",mint:"9gP2kCy3wA1ctvYWQk75guqXuHfrEomqydHLtcTCqiLa",decimals:8,extensions:{}},wePEOPLE:{symbol:"wePEOPLE",name:"wePEOPLE",mint:"CobcsUrt3p91FwvULYKorQejgsm5HoQdv5T8RUZ6PnLA",decimals:8,extensions:{}},XTAG:{symbol:"XTAG",name:"xHashtag",mint:"5gs8nf4wojB5EXgDUWNLwXpknzgV2YWDhveAeBZpVLbp",decimals:6,extensions:{coingeckoId:"xhashtag"}},KKO:{symbol:"KKO",name:"Kineko",mint:"kiNeKo77w1WBEzFFCXrTDRWGRWGP8yHvKC9rX6dqjQh",decimals:9,extensions:{coingeckoId:"kineko"}},VI:{symbol:"VI",name:"Vybit",mint:"7zBWymxbZt7PVHQzfi3i85frc1YRiQc23K7bh3gos8ZC",decimals:9,extensions:{coingeckoId:"vybit"}},SOLC:{symbol:"SOLC",name:"Solcubator",mint:"Bx1fDtvTN6NvE4kjdPHQXtmGSg582bZx9fGy4DQNMmAT",decimals:9,extensions:{coingeckoId:"solcubator"}},STR:{symbol:"STR",name:"Solster",mint:"9zoqdwEBKWEi9G5Ze8BSkdmppxGgVv1Kw4LuigDiNr9m",decimals:9,extensions:{coingeckoId:"solster"}},SPWN:{symbol:"SPWN",name:"Bitspawn",mint:"5U9QqCPhqXAJcEv9uyzFJd5zhN93vuPk1aNNkXnUfPnt",decimals:9,extensions:{coingeckoId:"bitspawn"}},ISOLA:{symbol:"ISOLA",name:"Intersola",mint:"333iHoRM2Awhf9uVZtSyTfU8AekdGrgQePZsKMFPgKmS",decimals:6,extensions:{coingeckoId:"intersola"}},RUN:{symbol:"RUN",name:"Run",mint:"6F9XriABHfWhit6zmMUYAQBSy6XK5VF1cHXuW5LDpRtC",decimals:9,extensions:{coingeckoId:"run"}},REAL:{symbol:"REAL",name:"Realy Metaverse",mint:"AD27ov5fVU2XzwsbvnFvb1JpCBaCB5dRXrczV9CqSVGb",decimals:9,extensions:{coingeckoId:"realy-metaverse"}},CRWNY:{symbol:"CRWNY",name:"CRWNY",mint:"CRWNYkqdgvhGGae9CKfNka58j6QQkaD5bLhKXvUYqnc1",decimals:6,extensions:{}},BLOCK:{symbol:"BLOCK",name:"Blockasset",mint:"NFTUkR4u7wKxy9QLaX2TGvd9oZSWoMo4jqSJqdMb7Nk",decimals:6,extensions:{coingeckoId:"blockasset"}},SOLAR:{symbol:"SOLAR",name:"Solar",mint:"2wmKXX1xsxLfrvjEPrt2UHiqj8Gbzwxvffr9qmNjsw8g",decimals:9,extensions:{coingeckoId:"solar"}},BASIS:{symbol:"BASIS",name:"basis.markets",mint:"Basis9oJw9j8cw53oMV7iqsgo6ihi9ALw4QR31rcjUJa",decimals:6,extensions:{coingeckoId:"basis-markets"}},SOLX:{symbol:"SOLX",name:"Soldex",mint:"CH74tuRLTYcxG7qNJCsV9rghfLXJCQJbsu7i52a8F1Gn",decimals:9,extensions:{coingeckoId:"soldex"}},CHICKS:{symbol:"CHICKS",name:"SolChicks Token",mint:"cxxShYRVcepDudXhe7U62QHvw8uBJoKFifmzggGKVC2",decimals:9,extensions:{coingeckoId:"solchicks-token"}},GST:{symbol:"GST",name:"GST",mint:"AFbX8oGjGpmVFywbVouvhQSRmiW2aR1mohfahi4Y2AdB",decimals:9,extensions:{coingeckoId:"gst"}},MBS:{symbol:"MBS",name:"MonkeyBall",mint:"Fm9rHUTF5v3hwMLbStjZXqNBBoZyGriQaFM6sTFz3K8A",decimals:6,extensions:{coingeckoId:"monkeyball"}},PRISM:{symbol:"PRISM",name:"Prism",mint:"PRSMNsEPqhGVCH1TtWiJqPjJyh2cKrLostPZTNy1o5x",decimals:6,extensions:{coingeckoId:"prism"}},MEAN:{symbol:"MEAN",name:"Meanfi",mint:"MEANeD3XDdUmNMsRGjASkSWdC8prLYsoRJ61pPeHctD",decimals:6,extensions:{coingeckoId:"meanfi"}},TINY:{symbol:"TINY",name:"Tiny Colony",mint:"HKfs24UEDQpHS5hUyKYkHd9q7GY5UQ679q2bokeL2whu",decimals:6,extensions:{coingeckoId:"tiny-colony"}},SHDW:{symbol:"SHDW",name:"GenesysGo Shadow",mint:"SHDWyBxihqiCj6YekG2GUr7wqKLeLAMK1gHZck9pL6y",decimals:9,extensions:{coingeckoId:"genesysgo-shadow"}},SCY:{symbol:"SCY",name:"Synchrony",mint:"SCYfrGCw8aDiqdgcpdGjV6jp4UVVQLuphxTDLNWu36f",decimals:9,extensions:{coingeckoId:"synchrony"}},SLC:{symbol:"SLC",name:"Solice",mint:"METAmTMXwdb8gYzyCPfXXFmZZw4rUsXX58PNsDg7zjL",decimals:6,extensions:{coingeckoId:"solice"}}},qs={FIDA_RAY_V4:{symbol:"FIDA-RAY",name:"FIDA-RAY V4 LP",mint:"DsBuznXRTmzvEdb36Dx3aVLVo1XmH7r1PRZUFugLPTFv",base:s.FIDA,quote:s.RAY,decimals:s.FIDA.decimals,version:4},OXY_RAY_V4:{symbol:"OXY-RAY",name:"OXY-RAY V4 LP",mint:"FwaX9W7iThTZH5MFeasxdLpxTVxRcM7ZHieTCnYog8Yb",base:s.OXY,quote:s.RAY,decimals:s.OXY.decimals,version:4},MAPS_RAY_V4:{symbol:"MAPS-RAY",name:"MAPS-RAY V4 LP",mint:"CcKK8srfVdTSsFGV3VLBb2YDbzF4T4NM2C3UEjC39RLP",base:s.MAPS,quote:s.RAY,decimals:s.MAPS.decimals,version:4},KIN_RAY_V4:{symbol:"KIN-RAY",name:"KIN-RAY V4 LP",mint:"CHT8sft3h3gpLYbCcZ9o27mT5s3Z6VifBVbUiDvprHPW",base:s.KIN,quote:s.RAY,decimals:6,version:4},RAY_USDT_V4:{symbol:"RAY-USDT",name:"RAY-USDT V4 LP",mint:"C3sT1R3nsw4AVdepvLTLKr5Gvszr7jufyBWUCvy4TUvT",base:s.RAY,quote:s.USDT,decimals:s.RAY.decimals,version:4},SOL_USDC_V4:{symbol:"SOL-USDC",name:"SOL-USDC V4 LP",mint:"8HoQnePLqPj4M7PUDzfw8e3Ymdwgc7NLGnaTUapubyvu",base:s.WSOL,quote:s.USDC,decimals:s.WSOL.decimals,version:4},YFI_USDC_V4:{symbol:"YFI-USDC",name:"YFI-USDC V4 LP",mint:"865j7iMmRRycSYUXzJ33ZcvLiX9JHvaLidasCyUyKaRE",base:s.YFI,quote:s.USDC,decimals:s.YFI.decimals,version:4},SRM_USDC_V4:{symbol:"SRM-USDC",name:"SRM-USDC V4 LP",mint:"9XnZd82j34KxNLgQfz29jGbYdxsYznTWRpvZE3SRE7JG",base:s.SRM,quote:s.USDC,decimals:s.SRM.decimals,version:4},FTT_USDC_V4:{symbol:"FTT-USDC",name:"FTT-USDC V4 LP",mint:"75dCoKfUHLUuZ4qEh46ovsxfgWhB4icc3SintzWRedT9",base:s.FTT,quote:s.USDC,decimals:s.FTT.decimals,version:4},BTC_USDC_V4:{symbol:"BTC-USDC",name:"BTC-USDC V4 LP",mint:"2hMdRdVWZqetQsaHG8kQjdZinEMBz75vsoWTCob1ijXu",base:s.BTC,quote:s.USDC,decimals:s.BTC.decimals,version:4},SUSHI_USDC_V4:{symbol:"SUSHI-USDC",name:"SUSHI-USDC V4 LP",mint:"2QVjeR9d2PbSf8em8NE8zWd8RYHjFtucDUdDgdbDD2h2",base:s.SUSHI,quote:s.USDC,decimals:s.SUSHI.decimals,version:4},TOMO_USDC_V4:{symbol:"TOMO-USDC",name:"TOMO-USDC V4 LP",mint:"CHyUpQFeW456zcr5XEh4RZiibH8Dzocs6Wbgz9aWpXnQ",base:s.TOMO,quote:s.USDC,decimals:s.TOMO.decimals,version:4},LINK_USDC_V4:{symbol:"LINK-USDC",name:"LINK-USDC V4 LP",mint:"BqjoYjqKrXtfBKXeaWeAT5sYCy7wsAYf3XjgDWsHSBRs",base:s.LINK,quote:s.USDC,decimals:s.LINK.decimals,version:4},ETH_USDC_V4:{symbol:"ETH-USDC",name:"ETH-USDC V4 LP",mint:"13PoKid6cZop4sj2GfoBeujnGfthUbTERdE5tpLCDLEY",base:s.ETH,quote:s.USDC,decimals:s.ETH.decimals,version:4},xCOPE_USDC_V4:{symbol:"xCOPE-USDC",name:"xCOPE-USDC V4 LP",mint:"2Vyyeuyd15Gp8aH6uKE72c4hxc8TVSLibxDP9vzspQWG",base:s.xCOPE,quote:s.USDC,decimals:s.xCOPE.decimals,version:4},SOL_USDT_V4:{symbol:"SOL-USDT",name:"SOL-USDT V4 LP",mint:"Epm4KfTj4DMrvqn6Bwg2Tr2N8vhQuNbuK8bESFp4k33K",base:s.WSOL,quote:s.USDT,decimals:s.WSOL.decimals,version:4},YFI_USDT_V4:{symbol:"YFI-USDT",name:"YFI-USDT V4 LP",mint:"FA1i7fej1pAbQbnY8NbyYUsTrWcasTyipKreDgy1Mgku",base:s.YFI,quote:s.USDT,decimals:s.YFI.decimals,version:4},SRM_USDT_V4:{symbol:"SRM-USDT",name:"SRM-USDT V4 LP",mint:"HYSAu42BFejBS77jZAZdNAWa3iVcbSRJSzp3wtqCbWwv",base:s.SRM,quote:s.USDT,decimals:s.SRM.decimals,version:4},FTT_USDT_V4:{symbol:"FTT-USDT",name:"FTT-USDT V4 LP",mint:"2cTCiUnect5Lap2sk19xLby7aajNDYseFhC9Pigou11z",base:s.FTT,quote:s.USDT,decimals:s.FTT.decimals,version:4},BTC_USDT_V4:{symbol:"BTC-USDT",name:"BTC-USDT V4 LP",mint:"DgGuvR9GSHimopo3Gc7gfkbKamLKrdyzWkq5yqA6LqYS",base:s.BTC,quote:s.USDT,decimals:s.BTC.decimals,version:4},SUSHI_USDT_V4:{symbol:"SUSHI-USDT",name:"SUSHI-USDT V4 LP",mint:"Ba26poEYDy6P2o95AJUsewXgZ8DM9BCsmnU9hmC9i4Ki",base:s.SUSHI,quote:s.USDT,decimals:s.SUSHI.decimals,version:4},TOMO_USDT_V4:{symbol:"TOMO-USDT",name:"TOMO-USDT V4 LP",mint:"D3iGro1vn6PWJXo9QAPj3dfta6dKkHHnmiiym2EfsAmi",base:s.TOMO,quote:s.USDT,decimals:s.TOMO.decimals,version:4},LINK_USDT_V4:{symbol:"LINK-USDT",name:"LINK-USDT V4 LP",mint:"Dr12Sgt9gkY8WU5tRkgZf1TkVWJbvjYuPAhR3aDCwiiX",base:s.LINK,quote:s.USDT,decimals:s.LINK.decimals,version:4},ETH_USDT_V4:{symbol:"ETH-USDT",name:"ETH-USDT V4 LP",mint:"nPrB78ETY8661fUgohpuVusNCZnedYCgghzRJzxWnVb",base:s.ETH,quote:s.USDT,decimals:s.ETH.decimals,version:4},YFI_SRM_V4:{symbol:"YFI-SRM",name:"YFI-SRM V4 LP",mint:"EGJht91R7dKpCj8wzALkjmNdUUUcQgodqWCYweyKcRcV",base:s.YFI,quote:s.SRM,decimals:s.YFI.decimals,version:4},FTT_SRM_V4:{symbol:"FTT-SRM",name:"FTT-SRM V4 LP",mint:"AsDuPg9MgPtt3jfoyctUCUgsvwqAN6RZPftqoeiPDefM",base:s.FTT,quote:s.SRM,decimals:s.FTT.decimals,version:4},BTC_SRM_V4:{symbol:"BTC-SRM",name:"BTC-SRM V4 LP",mint:"AGHQxXb3GSzeiLTcLtXMS2D5GGDZxsB2fZYZxSB5weqB",base:s.BTC,quote:s.SRM,decimals:s.BTC.decimals,version:4},SUSHI_SRM_V4:{symbol:"SUSHI-SRM",name:"SUSHI-SRM V4 LP",mint:"3HYhUnUdV67j1vn8fu7ExuVGy5dJozHEyWvqEstDbWwE",base:s.SUSHI,quote:s.SRM,decimals:s.SUSHI.decimals,version:4},TOMO_SRM_V4:{symbol:"TOMO-SRM",name:"TOMO-SRM V4 LP",mint:"GgH9RnKrQpaMQeqmdbMvs5oo1A24hERQ9wuY2pSkeG7x",base:s.TOMO,quote:s.SRM,decimals:s.TOMO.decimals,version:4},LINK_SRM_V4:{symbol:"LINK-SRM",name:"LINK-SRM V4 LP",mint:"GXN6yJv12o18skTmJXaeFXZVY1iqR18CHsmCT8VVCmDD",base:s.LINK,quote:s.SRM,decimals:s.LINK.decimals,version:4},ETH_SRM_V4:{symbol:"ETH-SRM",name:"ETH-SRM V4 LP",mint:"9VoY3VERETuc2FoadMSYYizF26mJinY514ZpEzkHMtwG",base:s.ETH,quote:s.SRM,decimals:s.ETH.decimals,version:4},SRM_SOL_V4:{symbol:"SRM-SOL",name:"SRM-SOL V4 LP",mint:"AKJHspCwDhABucCxNLXUSfEzb7Ny62RqFtC9uNjJi4fq",base:s.SRM,quote:s.WSOL,decimals:s.SRM.decimals,version:4},STEP_USDC_V4:{symbol:"STEP-USDC",name:"STEP-USDC V4 LP",mint:"3k8BDobgihmk72jVmXYLE168bxxQUhqqyESW4dQVktqC",base:s.STEP,quote:s.USDC,decimals:s.STEP.decimals,version:4},MEDIA_USDC_V4:{symbol:"MEDIA-USDC",name:"MEDIA-USDC V4 LP",mint:"A5zanvgtioZGiJMdEyaKN4XQmJsp1p7uVxaq2696REvQ",base:s.MEDIA,quote:s.USDC,decimals:s.MEDIA.decimals,version:4},ROPE_USDC_V4:{symbol:"ROPE-USDC",name:"ROPE-USDC V4 LP",mint:"Cq4HyW5xia37tKejPF2XfZeXQoPYW6KfbPvxvw5eRoUE",base:s.ROPE,quote:s.USDC,decimals:s.ROPE.decimals,version:4},MER_USDC_V4:{symbol:"MER-USDC",name:"MER-USDC V4 LP",mint:"3H9NxvaZoxMZZDZcbBDdWMKbrfNj7PCF5sbRwDr7SdDW",base:s.MER,quote:s.USDC,decimals:s.MER.decimals,version:4},COPE_USDC_V4:{symbol:"COPE-USDC",name:"COPE-USDC V4 LP",mint:"Cz1kUvHw98imKkrqqu95GQB9h1frY8RikxPojMwWKGXf",base:s.COPE,quote:s.USDC,decimals:s.COPE.decimals,version:4},ALEPH_USDC_V4:{symbol:"ALEPH-USDC",name:"ALEPH-USDC V4 LP",mint:"iUDasAP2nXm5wvTukAHEKSdSXn8vQkRtaiShs9ceGB7",base:s.ALEPH,quote:s.USDC,decimals:s.ALEPH.decimals,version:4},TULIP_USDC_V4:{symbol:"TULIP-USDC",name:"TULIP-USDC V4 LP",mint:"2doeZGLJyACtaG9DCUyqMLtswesfje1hjNA11hMdj6YU",base:s.TULIP,quote:s.USDC,decimals:s.TULIP.decimals,version:4},WOO_USDC_V4:{symbol:"WOO-USDC",name:"WOO-USDC V4 LP",mint:"7cu42ao8Jgrd5A3y3bNQsCxq5poyGZNmTydkGfJYQfzh",base:s.WOO,quote:s.USDC,decimals:s.WOO.decimals,version:4},SNY_USDC_V4:{symbol:"SNY-USDC",name:"SNY-USDC V4 LP",mint:"G8qcfeFqxwbCqpxv5LpLWxUCd1PyMB5nWb5e5YyxLMKg",base:s.SNY,quote:s.USDC,decimals:s.SNY.decimals,version:4},BOP_RAY_V4:{symbol:"BOP-RAY",name:"BOP-RAY V4 LP",mint:"9nQPYJvysyfnXhQ6nkK5V7sZG26hmDgusfdNQijRk5LD",base:s.BOP,quote:s.RAY,decimals:s.BOP.decimals,version:4},SLRS_USDC_V4:{symbol:"SLRS-USDC",name:"SLRS-USDC V4 LP",mint:"2Xxbm1hdv5wPeen5ponDSMT3VqhGMTQ7mH9stNXm9shU",base:s.SLRS,quote:s.USDC,decimals:s.SLRS.decimals,version:4},SAMO_RAY_V4:{symbol:"SAMO-RAY",name:"SAMO-RAY V4 LP",mint:"HwzkXyX8B45LsaHXwY8su92NoRBS5GQC32HzjQRDqPnr",base:s.SAMO,quote:s.RAY,decimals:s.SAMO.decimals,version:4},renBTC_USDC_V4:{symbol:"renBTC-USDC",name:"renBTC-USDC V4 LP",mint:"CTEpsih91ZLo5gunvryLpJ3pzMjmt5jbS6AnSQrzYw7V",base:s.renBTC,quote:s.USDC,decimals:s.renBTC.decimals,version:4},renDOGE_USDC_V4:{symbol:"renDOGE-USDC",name:"renDOGE-USDC V4 LP",mint:"Hb8KnZNKvRxu7pgMRWJgoMSMcepfvNiBFFDDrdf9o3wA",base:s.renDOGE,quote:s.USDC,decimals:s.renDOGE.decimals,version:4},RAY_USDC_V4:{symbol:"RAY-USDC",name:"RAY-USDC V4 LP",mint:"FbC6K13MzHvN42bXrtGaWsvZY9fxrackRSZcBGfjPc7m",base:s.RAY,quote:s.USDC,decimals:s.RAY.decimals,version:4},RAY_SRM_V4:{symbol:"RAY-SRM",name:"RAY-SRM V4 LP",mint:"7P5Thr9Egi2rvMmEuQkLn8x8e8Qro7u2U7yLD2tU2Hbe",base:s.RAY,quote:s.SRM,decimals:s.RAY.decimals,version:4},RAY_ETH_V4:{symbol:"RAY-ETH",name:"RAY-ETH V4 LP",mint:"mjQH33MqZv5aKAbKHi8dG3g3qXeRQqq1GFcXceZkNSr",base:s.RAY,quote:s.ETH,decimals:s.RAY.decimals,version:4},RAY_SOL_V4:{symbol:"RAY-SOL",name:"RAY-SOL V4 LP",mint:"89ZKE4aoyfLBe2RuV6jM3JGNhaV18Nxh8eNtjRcndBip",base:s.RAY,quote:s.WSOL,decimals:s.RAY.decimals,version:4},DXL_USDC_V4:{symbol:"DXL-USDC",name:"DXL-USDC V4 LP",mint:"4HFaSvfgskipvrzT1exoVKsUZ174JyExEsA8bDfsAdY5",base:s.DXL,quote:s.USDC,decimals:s.DXL.decimals,version:4},LIKE_USDC_V4:{symbol:"LIKE-USDC",name:"LIKE-USDC V4 LP",mint:"cjZmbt8sJgaoyWYUttomAu5LJYU44ZrcKTbzTSEPDVw",base:s.LIKE,quote:s.USDC,decimals:s.LIKE.decimals,version:4},mSOL_USDC_V4:{symbol:"mSOL-USDC",name:"mSOL-USDC V4 LP",mint:"4xTpJ4p76bAeggXoYywpCCNKfJspbuRzZ79R7pRhbqSf",base:s.mSOL,quote:s.USDC,decimals:s.mSOL.decimals,version:4},mSOL_SOL_V4:{symbol:"mSOL-SOL",name:"mSOL-SOL V4 LP",mint:"5ijRoAHVgd5T5CNtK5KDRUBZ7Bffb69nktMj5n6ks6m4",base:s.mSOL,quote:s.WSOL,decimals:s.mSOL.decimals,version:4},MER_PAI_V4:{symbol:"MER-PAI",name:"MER-PAI V4 LP",mint:"DU5RT2D9EviaSmX6Ta8MZwMm85HwSEqGMRdqUiuCGfmD",base:s.MER,quote:s.PAI,decimals:s.MER.decimals,version:4},PORT_USDC_V4:{symbol:"PORT-USDC",name:"PORT-USDC V4 LP",mint:"9tmNtbUCrLS15qC4tEfr5NNeqcqpZ4uiGgi2vS5CLQBS",base:s.PORT,quote:s.USDC,decimals:s.PORT.decimals,version:4},MNGO_USDC_V4:{symbol:"MNGO-USDC",name:"MNGO-USDC V4 LP",mint:"DkiqCQ792n743xjWQVCbBUaVtkdiuvQeYndM53ReWnCC",base:s.MNGO,quote:s.USDC,decimals:s.MNGO.decimals,version:4},ATLAS_USDC_V4:{symbol:"ATLAS-USDC",name:"ATLAS-USDC V4 LP",mint:"9shGU9f1EsxAbiR567MYZ78WUiS6ZNCYbHe53WUULQ7n",base:s.ATLAS,quote:s.USDC,decimals:s.ATLAS.decimals,version:4},POLIS_USDC_V4:{symbol:"POLIS-USDC",name:"POLIS-USDC V4 LP",mint:"8MbKSBpyXs8fVneKgt71jfHrn5SWtX8n4wMLpiVfF9So",base:s.POLIS,quote:s.USDC,decimals:s.POLIS.decimals,version:4},ATLAS_RAY_V4:{symbol:"ATLAS-RAY",name:"ATLAS-RAY V4 LP",mint:"418MFhkaYQtbn529wmjLLqL6uKxDz7j4eZBaV1cobkyd",base:s.ATLAS,quote:s.RAY,decimals:s.ATLAS.decimals,version:4},POLIS_RAY_V4:{symbol:"POLIS-RAY",name:"POLIS-RAY V4 LP",mint:"9ysGKUH6WqzjQEUT4dxqYCUaFNVK9QFEa24pGzjFq8xg",base:s.POLIS,quote:s.RAY,decimals:s.POLIS.decimals,version:4},ALEPH_RAY_V4:{symbol:"ALEPH-RAY",name:"ALEPH-RAY V4 LP",mint:"n76skjqv4LirhdLok2zJELXNLdRpYDgVJQuQFbamscy",base:s.ALEPH,quote:s.RAY,decimals:s.ALEPH.decimals,version:4},TULIP_RAY_V4:{symbol:"TULIP-RAY",name:"TULIP-RAY V4 LP",mint:"3AZTviji5qduMG2s4FfWGR3SSQmNUCyx8ao6UKCPg3oJ",base:s.TULIP,quote:s.RAY,decimals:s.TULIP.decimals,version:4},SLRS_RAY_V4:{symbol:"SLRS-RAY",name:"SLRS-RAY V4 LP",mint:"2pk78vsKT3jfJAcN2zbpMUnrR57SZrxHqaZYyFgp92mM",base:s.SLRS,quote:s.RAY,decimals:s.SLRS.decimals,version:4},MER_RAY_V4:{symbol:"MER-RAY",name:"MER-RAY V4 LP",mint:"214hxy3AbKoaEKgqcg2aC1cP5R67cGGAyDEg5GDwC7Ub",base:s.MER,quote:s.RAY,decimals:s.MER.decimals,version:4},MEDIA_RAY_V4:{symbol:"MEDIA-RAY",name:"MEDIA-RAY V4 LP",mint:"9Aseg5A1JD1yCiFFdDaNNxCiJ7XzrpZFmcEmLjXFdPaH",base:s.MEDIA,quote:s.RAY,decimals:s.MEDIA.decimals,version:4},SNY_RAY_V4:{symbol:"SNY-RAY",name:"SNY-RAY V4 LP",mint:"2k4quTuuLUxrSEhFH99qcoZzvgvVEc3b5sz3xz3qstfS",base:s.SNY,quote:s.RAY,decimals:s.SNY.decimals,version:4},LIKE_RAY_V4:{symbol:"LIKE-RAY",name:"LIKE-RAY V4 LP",mint:"7xqDycbFSCpUpzkYapFeyPJWPwEpV7zdWbYf2MVHTNjv",base:s.LIKE,quote:s.RAY,decimals:s.LIKE.decimals,version:4},COPE_RAY_V4:{symbol:"COPE-RAY",name:"COPE-RAY V4 LP",mint:"A7GCVHA8NSsbdFscHdoNU41tL1TRKNmCH4K94CgcLK9F",base:s.COPE,quote:s.RAY,decimals:s.COPE.decimals,version:4},ETH_SOL_V4:{symbol:"ETH-SOL",name:"ETH-SOL V4 LP",mint:"GKfgC86iJoMjwAtcyiLu6nWnjggqUXsDQihXkP14fDez",base:s.ETH,quote:s.WSOL,decimals:s.ETH.decimals,version:4},stSOL_USDC_V4:{symbol:"stSOL-USDC",name:"stSOL-USDC V4 LP",mint:"HDUJMwYZkjUZre63xUeDhdCi8c6LgUDiBqxmP3QC3VPX",base:s.stSOL,quote:s.USDC,decimals:s.stSOL.decimals,version:4},GRAPE_USDC_V4:{symbol:"GRAPE-USDC",name:"GRAPE-USDC V4 LP",mint:"A8ZYmnZ1vwxUa4wpJVUaJgegsuTEz5TKy5CiJXffvmpt",base:s.GRAPE,quote:s.USDC,decimals:s.GRAPE.decimals,version:4},LARIX_USDC_V4:{symbol:"LARIX-USDC",name:"LARIX-USDC V4 LP",mint:"7yieit4YsNsZ9CAK8H5ZEMvvk35kPEHHeXwp6naoWU9V",base:s.LARIX,quote:s.USDC,decimals:s.LARIX.decimals,version:4},RIN_USDC_V4:{symbol:"RIN-USDC",name:"RIN-USDC V4 LP",mint:"GfCWfrZez7BDmCSEeMERVDVUaaM2TEreyYUgb2cpuS3w",base:s.RIN,quote:s.USDC,decimals:s.RIN.decimals,version:4},APEX_USDC_V4:{symbol:"APEX-USDC",name:"APEX-USDC V4 LP",mint:"444cVqYyDxJNo6FqiMb9qQWFUd7tYzFRdDuJRFrSAGnU",base:s.APEX,quote:s.USDC,decimals:s.APEX.decimals,version:4},mSOL_RAY_V4:{symbol:"mSOL-RAY",name:"mSOL-RAY V4 LP",mint:"De2EHBAdkgfc72DpShqDGG42cV3iDWh8wvvZdPsiEcqP",base:s.mSOL,quote:s.RAY,decimals:s.mSOL.decimals,version:4},MNDE_mSOL_V4:{symbol:"MNDE-mSOL",name:"MNDE-mSOL V4 LP",mint:"4bh8XCzTHSbqbWN8o1Jn4ueBdz1LvJFoEasN6K6CQ8Ny",base:s.MNDE,quote:s.mSOL,decimals:s.MNDE.decimals,version:4},LARIX_RAY_V4:{symbol:"LARIX-RAY",name:"LARIX-RAY V4 LP",mint:"ZRDfSLgWGeaYSmhdPvFNKQQhDcYdZQaue2N8YDmHX4q",base:s.LARIX,quote:s.RAY,decimals:s.LARIX.decimals,version:4},LIQ_USDC_V4:{symbol:"LIQ-USDC",name:"LIQ-USDC V4 LP",mint:"GWpD3eTfhJB5KDCcnE85dBQrjAk2CsrgDF9b52R9CrjV",base:s.LIQ,quote:s.USDC,decimals:s.LIQ.decimals,version:4},WAG_USDC_V4:{symbol:"WAG-USDC",name:"WAG-USDC V4 LP",mint:"4yykyPugitUVRewNPXXCviRvxGfsfsRMoP32z3b6FmUC",base:s.WAG,quote:s.USDC,decimals:s.WAG.decimals,version:4},ETH_mSOL_V4:{symbol:"ETH-mSOL",name:"ETH-mSOL V4 LP",mint:"HYv3grQfi8QbV7nG7EFgNK1aJSrsJ7HynXJKJVPLL2Uh",base:s.ETH,quote:s.mSOL,decimals:s.ETH.decimals,version:4},mSOL_USDT_V4:{symbol:"mSOL-USDT",name:"mSOL-USDT V4 LP",mint:"69NCmEW9mGpiWLjAcAWHq51k4ionJZmzgRfRT3wQaCCf",base:s.mSOL,quote:s.USDT,decimals:s.mSOL.decimals,version:4},BTC_mSOL_V4:{symbol:"BTC-mSOL",name:"BTC-mSOL V4 LP",mint:"92bcERNtUmuaJ6mwLSxYHZYSph37jdKxRdoYNxpcYNPp",base:s.BTC,quote:s.mSOL,decimals:s.BTC.decimals,version:4},SLIM_SOL_V4:{symbol:"SLIM-SOL",name:"SLIM-SOL V4 LP",mint:"9X4EK8E59VAVi6ChnNvvd39m6Yg9RtkBbAPq1mDVJT57",base:s.SLIM,quote:s.WSOL,decimals:s.SLIM.decimals,version:4},AURY_USDC_V4:{symbol:"AURY-USDC",name:"AURY-USDC V4 LP",mint:"Gub5dvTy4nzP82qpmpNkBxmRqjtqRddBTBqHSdNcf2oS",base:s.AURY,quote:s.USDC,decimals:s.AURY.decimals,version:4},PRT_SOL_V4:{symbol:"PRT-SOL",name:"PRT-SOL V4 LP",mint:"EcJ8Wgwt1AzSPiDpVr6aaSur8TKAsNTPmmzRACeqT68Z",base:s.PRT,quote:s.WSOL,decimals:s.PRT.decimals,version:4},LIQ_RAY_V4:{symbol:"LIQ-RAY",name:"LIQ-RAY V4 LP",mint:"49YUsDrThJosHSagCn1F59Uc9NRxbr9thVrZikUnQDXy",base:s.LIQ,quote:s.RAY,decimals:s.LIQ.decimals,version:4},SYP_SOL_V4:{symbol:"SYP-SOL",name:"SYP-SOL V4 LP",mint:"KHV6dfj2bDntzJ9z1S26cDfqWfUZdJRFmteLR6LxHwW",base:s.SYP,quote:s.WSOL,decimals:s.SYP.decimals,version:4},SYP_RAY_V4:{symbol:"SYP-RAY",name:"SYP-RAY V4 LP",mint:"FT2KZqxxM8F2h9pZtTF4PyjK88bM4YbuBzd7ZPwQ5wMB",base:s.SYP,quote:s.RAY,decimals:s.SYP.decimals,version:4},SYP_USDC_V4:{symbol:"SYP-USDC",name:"SYP-USDC V4 LP",mint:"2xJGuLAivAR1WkARRA6zP1v4jaA9jV2Qis8JfMNvrVyZ",base:s.SYP,quote:s.USDC,decimals:s.SYP.decimals,version:4},FAB_USDC_V4:{symbol:"FAB-USDC",name:"FAB-USDC V4 LP",mint:"5rTCvZq6BcApsC3VV1EEUuTJfaVd8uYhcGjwTy1By6P8",base:s.FAB,quote:s.USDC,decimals:s.FAB.decimals,version:4},WOOF_RAY_V4:{symbol:"WOOF-RAY",name:"WOOF-RAY V4 LP",mint:"H2FAnazDaGFutcmnrwDxhmdncR1Bd7GG4mhPCSUiamDX",base:s.WOOF,quote:s.RAY,decimals:s.WOOF.decimals,version:4},WOOF_USDC_V4:{symbol:"WOOF-USDC",name:"WOOF-USDC V4 LP",mint:"EFSu5TMc1ijRevaYCxUkS7uGvbhsymDHEaTK3UVdNE3q",base:s.WOOF,quote:s.USDC,decimals:s.WOOF.decimals,version:4},SLND_USDC_V4:{symbol:"SLND-USDC",name:"SLND-USDC V4 LP",mint:"EunE9uDh2cGsyJcsGuGKc6wte7kBn8iye2gzC4w2ePHn",base:s.SLND,quote:s.USDC,decimals:s.SLND.decimals,version:4},FRKT_SOL_V4:{symbol:"FRKT-SOL",name:"FRKT-SOL V4 LP",mint:"HYUKXgpjaxMXHttyrFYtv3z2rdhZ1U9QDH8zEc8BooQC",base:s.FRKT,quote:s.WSOL,decimals:s.FRKT.decimals,version:4},weWETH_SOL_V4:{symbol:"weWETH-SOL",name:"weWETH-SOL V4 LP",mint:"3hbozt2Por7bcrGod8N7kEeJNMocFFjCJrQR16TQGBrE",base:s.weWETH,quote:s.WSOL,decimals:s.weWETH.decimals,version:4},weWETH_USDC_V4:{symbol:"weWETH-USDC",name:"weWETH-USDC V4 LP",mint:"3529SBnMCDW3S3xQ52aABbRHo7PcHvpQA4no8J12L5eK",base:s.weWETH,quote:s.USDC,decimals:s.weWETH.decimals,version:4},weUNI_USDC_V4:{symbol:"weUNI-USDC",name:"weUNI-USDC V4 LP",mint:"EEC4QnT41py39QaYnzQnoYQEtDUDNa6Se8SBDgfPSN2a",base:s.weUNI,quote:s.USDC,decimals:s.weUNI.decimals,version:4},weSUSHI_USDC_V4:{symbol:"weSUSHI-USDC",name:"weSUSHI-USDC V4 LP",mint:"3wVrtQZsiDNp5yTPyfEzQHPU6iuJoMmpnWg6CTt4V8sR",base:s.weSUSHI,quote:s.USDC,decimals:s.weSUSHI.decimals,version:4},CYS_USDC_V4:{symbol:"CYS-USDC",name:"CYS-USDC V4 LP",mint:"GfV3QDzzdVUwCNSdfn6PjhmyJvjw18tn51RingWZYwk3",base:s.CYS,quote:s.USDC,decimals:s.CYS.decimals,version:4},SAMO_USDC_V4:{symbol:"SAMO-USDC",name:"SAMO-USDC V4 LP",mint:"B2PjGEP3vPf1999fUD14pYdxvSDRVBk43hxB2rgthwEY",base:s.SAMO,quote:s.USDC,decimals:s.SAMO.decimals,version:4},ABR_USDC_V4:{symbol:"ABR-USDC",name:"ABR-USDC V4 LP",mint:"ECHfxkf5zjjZFTX95QfFahNyzG7feyEKcfTdjsdrMSGU",base:s.ABR,quote:s.USDC,decimals:s.ABR.decimals,version:4},IN_USDC_V4:{symbol:"IN-USDC",name:"IN-USDC V4 LP",mint:"GbmJtVgg9fRmmmjKUYGMZeSt8wZ47cDDXasg5Y3iF4kz",base:s.IN,quote:s.USDC,decimals:s.IN.decimals,version:4},weDYDX_USDC_V4:{symbol:"weDYDX-USDC",name:"weDYDX-USDC V4 LP",mint:"BjkkMZnnzmgLqzGErzDbkk15ozv48iVKQuunpeM2Hqnk",base:s.weDYDX,quote:s.USDC,decimals:s.weDYDX.decimals,version:4},STARS_USDC_V4:{symbol:"STARS-USDC",name:"STARS-USDC V4 LP",mint:"FJ68q7NChhETcGVdinMbM2FF1Cy79dpmUi6HC83K55Hv",base:s.STARS,quote:s.USDC,decimals:s.STARS.decimals,version:4},weAXS_USDC_V4:{symbol:"weAXS-USDC",name:"weAXS-USDC V4 LP",mint:"6PSoJQ7myQ1BJtbQC6oiWR8HSecQGyoWsPYTZRJo2ci3",base:s.weAXS,quote:s.USDC,decimals:s.weAXS.decimals,version:4},weSHIB_USDC_V4:{symbol:"weSHIB-USDC",name:"weSHIB-USDC V4 LP",mint:"AcjX5pmTMGSgxkdxc3r82r6WMKBvS6eQXXFz5ck5KKUa",base:s.weSHIB,quote:s.USDC,decimals:s.weSHIB.decimals,version:4},SBR_USDC_V4:{symbol:"SBR-USDC",name:"SBR-USDC V4 LP",mint:"9FC8xTFRbgTpuZZYAYnZLxgnQ8r7FwfSBM1SWvGwgF7s",base:s.SBR,quote:s.USDC,decimals:s.SBR.decimals,version:4},OXS_USDC_V4:{symbol:"OXS-USDC",name:"OXS-USDC V4 LP",mint:"et9pdjWm97rbmsJoN183GkFV5qzTGru79GE1Zhe7NTU",base:s.OXS,quote:s.USDC,decimals:s.OXS.decimals,version:4},CWAR_USDC_V4:{symbol:"CWAR-USDC",name:"CWAR-USDC V4 LP",mint:"HjR23bxn2gtRDB2P1Tm3DLepAPPZgazsWJpLG9wqjnYR",base:s.CWAR,quote:s.USDC,decimals:s.CWAR.decimals,version:4},UPS_USDC_V4:{symbol:"UPS-USDC",name:"UPS-USDC V4 LP",mint:"9hSUZdREEsbaYaKY4FouvXr7xyAqtpdHRDoYCb6Mb28a",base:s.UPS,quote:s.USDC,decimals:s.UPS.decimals,version:4},weSAND_USDC_V4:{symbol:"weSAND-USDC",name:"weSAND-USDC V4 LP",mint:"3dADrQa7utyiCsaFeVk9r7oebW1WheowhKo5soBYKBVT",base:s.weSAND,quote:s.USDC,decimals:s.weSAND.decimals,version:4},weMANA_USDC_V4:{symbol:"weMANA-USDC",name:"weMANA-USDC V4 LP",mint:"HpUkVAPRJ5zNRuJ1ZwMXEhbMHL3gSuPb2QuSER9YUd3a",base:s.weMANA,quote:s.USDC,decimals:s.weMANA.decimals,version:4},CAVE_USDC_V4:{symbol:"CAVE-USDC",name:"CAVE-USDC V4 LP",mint:"5Gba1k3fU7Vh7UtAiBmie9vhQNNq1JfEwgn1DPGZ7NKQ",base:s.CAVE,quote:s.USDC,decimals:s.CAVE.decimals,version:4},GENE_USDC_V4:{symbol:"GENE-USDC",name:"GENE-USDC V4 LP",mint:"7GKvfHEXenNiWYbJBKae89mdaMPr5gGMYwZmyC8gBNVG",base:s.GENE,quote:s.USDC,decimals:s.GENE.decimals,version:4},GENE_RAY_V4:{symbol:"GENE-RAY",name:"GENE-RAY V4 LP",mint:"3HzXnc1qZ8mGqun18Ck3KA616XnZNqF1RWbgYE2nGRMA",base:s.GENE,quote:s.RAY,decimals:s.GENE.decimals,version:4},APT_USDC_V4:{symbol:"APT-USDC",name:"APT-USDC V4 LP",mint:"Hk8mDAJFq4E9kF3DtNgPFwzbo5kbeiusNFJgWmo3LoQ5",base:s.APT,quote:s.USDC,decimals:s.APT.decimals,version:4},GOFX_USDC_V4:{symbol:"GOFX-USDC",name:"GOFX-USDC V4 LP",mint:"4svqAwrLPGRDCQuuieYTmtLXF75wiahjeK2rEN9tY1YL",base:s.GOFX,quote:s.USDC,decimals:s.GOFX.decimals,version:4},SONAR_USDC_V4:{symbol:"SONAR-USDC",name:"SONAR-USDC V4 LP",mint:"2tAcfqJ1YYjpGLqwh76kyNt9VaNFDd4fJySfH6SmWfKt",base:s.SONAR,quote:s.USDC,decimals:s.SONAR.decimals,version:4},JSOL_SOL_V4:{symbol:"JSOL-SOL",name:"JSOL-SOL V4 LP",mint:"61z37rpHsU6d3Fq5sUjJ85K6tXGzkoYKDAG3kPJQNDRo",base:s.JSOL,quote:s.WSOL,decimals:s.JSOL.decimals,version:4},JSOL_USDC_V4:{symbol:"JSOL-USDC",name:"JSOL-USDC V4 LP",mint:"3JZqf2VPNxj1kDZQsfzC7myM6spsGQbGuFv1gVfdYosN",base:s.JSOL,quote:s.USDC,decimals:s.JSOL.decimals,version:4},SHILL_USDC_V4:{symbol:"SHILL-USDC",name:"SHILL-USDC V4 LP",mint:"CnUhYBtQEbSBZ76bgxAouVCTCb8rofZzwerVF5z5LREJ",base:s.SHILL,quote:s.USDC,decimals:s.SHILL.decimals,version:4},DFL_USDC_V4:{symbol:"DFL-USDC",name:"DFL-USDC V4 LP",mint:"Fffijd6UVJdQeLVXhenS8YcsnMUdWJqpbBeH42LFkXgS",base:s.DFL,quote:s.USDC,decimals:s.DFL.decimals,version:4},BOKU_USDC_V4:{symbol:"BOKU-USDC",name:"BOKU-USDC V4 LP",mint:"8jjQn5Yagb6Nm2WGAxPW1bcGqrTWpg5adf6QukXEarcP",base:s.BOKU,quote:s.USDC,decimals:s.BOKU.decimals,version:4},MIMO_SOL_V4:{symbol:"MIMO-SOL",name:"MIMO-SOL V4 LP",mint:"HUJ1opSk8AiPfDT47r7n4hTiK2EXgrR3Msy7T8q1BywS",base:s.MIMO,quote:s.WSOL,decimals:s.MIMO.decimals,version:4},wbWBNB_USDC_V4:{symbol:"wbWBNB-USDC",name:"wbWBNB-USDC V4 LP",mint:"FEsEfEJJSfiMQcshUgZ5UigfytfGRQ3z5puyF6DXDp9C",base:s.wbWBNB,quote:s.USDC,decimals:s.wbWBNB.decimals,version:4},wePEOPLE_USDC_V4:{symbol:"wePEOPLE-USDC",name:"wePEOPLE-USDC V4 LP",mint:"3e5ZCKi4etorpV4pv1fSckP5iJD67xcUkx3RtFCZhbzD",base:s.wePEOPLE,quote:s.USDC,decimals:s.wePEOPLE.decimals,version:4},ISOLA_USDT_V4:{symbol:"ISOLA-USDT",name:"ISOLA-USDT V4 LP",mint:"H8s1wQsZpRK61pyLF3XwyQc6E8vNUnwRDhy3TBDCDENQ",base:s.ISOLA,quote:s.USDT,decimals:s.ISOLA.decimals,version:4},SPWN_USDC_V4:{symbol:"SPWN-USDC",name:"SPWN-USDC V4 LP",mint:"B5uyCAQcX6nAjZypLgiivbEKabSptgUb8JK9tkaSnqdW",base:s.SPWN,quote:s.USDC,decimals:s.SPWN.decimals,version:4},STR_USDC_V4:{symbol:"STR-USDC",name:"STR-USDC V4 LP",mint:"8uDVKmVwNmbXHDB7rNKqtpcT9VAsFHTJ5pPYxjyoBbNg",base:s.STR,quote:s.USDC,decimals:s.STR.decimals,version:4},SOLC_USDT_V4:{symbol:"SOLC-USDT",name:"SOLC-USDT V4 LP",mint:"2g9JzTWycLzK4KEBBHsponAtZRee2ii63bRrJ8tefEyt",base:s.SOLC,quote:s.USDT,decimals:s.SOLC.decimals,version:4},VI_USDC_V4:{symbol:"VI-USDC",name:"VI-USDC V4 LP",mint:"3MwHyHCRfVqtH3ABFtdKXdY9dwemr9GGxQFaBkeq6NjY",base:s.VI,quote:s.USDC,decimals:s.VI.decimals,version:4},KKO_USDC_V4:{symbol:"KKO-USDC",name:"KKO-USDC V4 LP",mint:"7xr1Doc1NiMWbUg99YVFqQSLfYXNzo6YvacXUsSgBMNW",base:s.KKO,quote:s.USDC,decimals:s.KKO.decimals,version:4},XTAG_USDC_V4:{symbol:"XTAG-USDC",name:"XTAG-USDC V4 LP",mint:"GCEQbLg4ik5YJ4CMcbtuVqEc4sjLdSGy34rFk1CtGjdg",base:s.XTAG,quote:s.USDC,decimals:s.XTAG.decimals,version:4},TTT_USDC_V4:{symbol:"TTT-USDC",name:"TTT-USDC V4 LP",mint:"84fmrerHGohoRf4iLPDQ1KG4CjSjCRksYWGzjWfCRM8a",base:s.TTT,quote:s.USDC,decimals:s.TTT.decimals,version:4},RUN_USDC_V4:{symbol:"RUN-USDC",name:"RUN-USDC V4 LP",mint:"CjTLvvKSQdEujcSzeZRYgk4w1DpuXBbMppLHaxZyz11Y",base:s.RUN,quote:s.USDC,decimals:s.RUN.decimals,version:4},CRWNY_USDC_V4:{symbol:"CRWNY-USDC",name:"CRWNY-USDC V4 LP",mint:"H3D9Gyi4frRLW6bS9vBthDVDJyzyRJ6XhhpP6PJGWaDC",base:s.CRWNY,quote:s.USDC,decimals:s.CRWNY.decimals,version:4},CRWNY_RAY_V4:{symbol:"CRWNY-RAY",name:"CRWNY-RAY V4 LP",mint:"5Cz9wGStNjiUg81q8t6sJJeckuT2C14CYSfyQbtYirSX",base:s.CRWNY,quote:s.RAY,decimals:s.CRWNY.decimals,version:4},BLOCK_USDC_V4:{symbol:"BLOCK-USDC",name:"BLOCK-USDC V4 LP",mint:"8i44Y23GkkwDYZ5iSkVEqmrXUfwNmwo9grguTDWKM8wg",base:s.BLOCK,quote:s.USDC,decimals:s.BLOCK.decimals,version:4},REAL_USDC_V4:{symbol:"REAL-USDC",name:"REAL-USDC V4 LP",mint:"EN43tp8xdkcM8RYSJ4msFHMPTJRXKhUteVYBDJLwTvr3",base:s.REAL,quote:s.USDC,decimals:s.REAL.decimals,version:4},FRKT_USDC_V4:{symbol:"FRKT-USDC",name:"FRKT-USDC V4 LP",mint:"7MgzqVTGeA4wENme81QPTrPy45NJMKVL9XGwxmNT87cG",base:s.FRKT,quote:s.USDC,decimals:s.FRKT.decimals,version:4},MBS_USDC_V4:{symbol:"MBS-USDC",name:"MBS-USDC V4 LP",mint:"BAgSWaPZpsQKyZJdvB5KyvmCNj6hzczzentt5FhDCVHb",base:s.MBS,quote:s.USDC,decimals:s.MBS.decimals,version:4},PRISM_USDC_V4:{symbol:"PRISM-USDC",name:"PRISM-USDC V4 LP",mint:"3baYkTcudvSFMe25UpZcBfdp4FA5kL2E4pfaeJ8AiYJB",base:s.PRISM,quote:s.USDC,decimals:s.PRISM.decimals,version:4},CHICKS_USDC_V4:{symbol:"CHICKS-USDC",name:"CHICKS-USDC V4 LP",mint:"CPzmcw81a6PDasSXhVLfDRKuTJXZPUqocS9VFf5zCFhs",base:s.CHICKS,quote:s.USDC,decimals:s.CHICKS.decimals,version:4},MEAN_RAY_V4:{symbol:"MEAN-RAY",name:"MEAN-RAY V4 LP",mint:"H9wUyrxpAErmdNVPitpHSXgwoomoh91ggJKPWtQQoCn1",base:s.MEAN,quote:s.RAY,decimals:s.MEAN.decimals,version:4},TINY_USDC_V4:{symbol:"TINY-USDC",name:"TINY-USDC V4 LP",mint:"Hho6ZzRDj49L4z6zog8nQZFaxMSz6FX6wNzVpMeAMen",base:s.TINY,quote:s.USDC,decimals:s.TINY.decimals,version:4},SCY_USDC_V4:{symbol:"SCY-USDC",name:"SCY-USDC V4 LP",mint:"EcYk7t6Vw59HDnY2u6H1KDPkk8juMeA1NpGpHiGk1LDf",base:s.SCY,quote:s.USDC,decimals:s.SCY.decimals,version:4}};var vs={WSOL:M({},be)};var Ys={WSOL:M({},be)};var zs=H.from("token/util");var rn=class{constructor(e,t="UNKNOWN",n="UNKNOWN"){this.decimals=e,this.symbol=t,this.name=n}},Ee=rn;Ee.SOL=new rn($e.decimals,$e.symbol,$e.name);var sn=class extends Ee{constructor(t,n,i="UNKNOWN",r="UNKNOWN"){super(n,i,r);this.mint=et(t)}equals(t){return this===t?!0:this.mint.equals(t.mint)}},h=sn;h.WSOL=new sn(be.mint,be.decimals,$e.symbol,$e.name);function Me(d,e){return d instanceof h&&e instanceof h?d.equals(e):d instanceof h||e instanceof h?!1:d===e}import yo from"big.js";import fo from"decimal.js-light";import lo from"toformat";var po=lo,dt=po;var Mt=H.from("entity/fraction"),tt=dt(yo),pt=dt(fo),Ao={[0]:pt.ROUND_DOWN,[1]:pt.ROUND_HALF_UP,[2]:pt.ROUND_UP},So={[0]:tt.roundDown,[1]:tt.roundHalfUp,[2]:tt.roundUp},z=class{constructor(e,t=J){this.numerator=X(e),this.denominator=X(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new z(this.denominator,this.numerator)}add(e){let t=e instanceof z?e:new z(X(e));return this.denominator.eq(t.denominator)?new z(this.numerator.add(t.numerator),this.denominator):new z(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof z?e:new z(X(e));return this.denominator.eq(t.denominator)?new z(this.numerator.sub(t.numerator),this.denominator):new z(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof z?e:new z(X(e));return new z(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof z?e:new z(X(e));return new z(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},n=1){Mt.assert(Number.isInteger(e),`${e} is not an integer.`),Mt.assert(e>0,`${e} is not positive.`),pt.set({precision:e+1,rounding:Ao[n]});let i=new pt(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return i.toFormat(i.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},n=1){return Mt.assert(Number.isInteger(e),`${e} is not an integer.`),Mt.assert(e>=0,`${e} is negative.`),tt.DP=e,tt.RM=So[n],new tt(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}};var Ge=H.from("entity/amount"),Nn=dt(go);function ko(d,e){let t="0",n="0";if(d.includes(".")){let i=d.split(".");if(i.length===2)[t,n]=i,n=n.padEnd(e,"0");else return Ge.throwArgumentError("invalid number string","num",d)}else t=d;return[t,n.slice(0,e)||n]}var ae=class extends z{constructor(t,n,i=!0){let r=new qt(0),o=Ot.pow(new qt(t.decimals));if(i)r=X(n);else{let a=new qt(0),c=new qt(0);if(typeof n=="string"||typeof n=="number"||typeof n=="bigint"){let[u,m]=ko(n.toString(),t.decimals);a=X(u),c=X(m)}a=a.mul(o),r=a.add(c)}super(r,o);this.currency=t}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(t){return Ge.assert(Me(this.currency,t.currency),"gt currency not equals"),this.raw.gt(t.raw)}lt(t){return Ge.assert(Me(this.currency,t.currency),"lt currency not equals"),this.raw.lt(t.raw)}add(t){return Ge.assert(Me(this.currency,t.currency),"add currency not equals"),new ae(this.currency,this.raw.add(t.raw))}sub(t){return Ge.assert(Me(this.currency,t.currency),"sub currency not equals"),new ae(this.currency,this.raw.sub(t.raw))}toSignificant(t=this.currency.decimals,n,i=0){return super.toSignificant(t,n,i)}toFixed(t=this.currency.decimals,n,i=0){return Ge.assert(t<=this.currency.decimals,"decimals overflow"),super.toFixed(t,n,i)}toExact(t={groupSeparator:""}){return Nn.DP=this.currency.decimals,new Nn(this.numerator.toString()).div(this.denominator.toString()).toFormat(t)}},q=class extends ae{constructor(t,n,i=!0){super(t,n,i);this.token=t}add(t){return Ge.assert(Me(this.token,t.token),"add token not equals"),new q(this.token,this.raw.add(t.raw))}subtract(t){return Ge.assert(Me(this.token,t.token),"sub token not equals"),new q(this.token,this.raw.sub(t.raw))}};var On=new z(Cn),Pe=class extends z{toSignificant(e=5,t,n){return this.mul(On).toSignificant(e,t,n)}toFixed(e=2,t,n){return this.mul(On).toFixed(e,t,n)}};var Po=H.from("entity/price"),ie=class extends z{constructor(t,n,i,r){super(r,n);this.baseCurrency=t,this.quoteCurrency=i,this.scalar=new z(nn(t.decimals),nn(i.decimals))}get raw(){return new z(this.numerator,this.denominator)}get adjusted(){return super.mul(this.scalar)}invert(){return new ie(this.quoteCurrency,this.numerator,this.baseCurrency,this.denominator)}mul(t){Po.assert(Me(this.quoteCurrency,t.baseCurrency),"mul currency not equals");let n=super.mul(t);return new ie(this.baseCurrency,n.denominator,t.quoteCurrency,n.numerator)}toSignificant(t=this.quoteCurrency.decimals,n,i){return this.adjusted.toSignificant(t,n,i)}toFixed(t=this.quoteCurrency.decimals,n,i){return this.adjusted.toFixed(t,n,i)}};import{PublicKey as nt,SystemProgram as Io}from"@solana/web3.js";import{PublicKey as To}from"@solana/web3.js";var an="1.1.0-beta.6";import"@colors/colors";var Un=!1,En=!1,Kt={debug:1,default:2,info:2,warning:3,error:4,off:5},Mn={},cn;function wo(){try{let d=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch(t){d.push(e)}}),d.length)throw new Error("missing "+d.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(d){if(d instanceof Error)return d.message}return""}var qn=wo(),Vn=(r=>(r.DEBUG="DEBUG",r.INFO="INFO",r.WARNING="WARNING",r.ERROR="ERROR",r.OFF="OFF",r))(Vn||{}),_n=(f=>(f.UNKNOWN_ERROR="UNKNOWN_ERROR",f.NOT_IMPLEMENTED="NOT_IMPLEMENTED",f.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",f.NETWORK_ERROR="NETWORK_ERROR",f.RPC_ERROR="RPC_ERROR",f.TIMEOUT="TIMEOUT",f.BUFFER_OVERRUN="BUFFER_OVERRUN",f.NUMERIC_FAULT="NUMERIC_FAULT",f.MISSING_NEW="MISSING_NEW",f.INVALID_ARGUMENT="INVALID_ARGUMENT",f.MISSING_ARGUMENT="MISSING_ARGUMENT",f.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",f.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",f))(_n||{}),Kn="0123456789abcdef";function vn(d,e=!1){let t=d;try{if(d instanceof Uint8Array){let n="";for(let i=0;i<d.length;i++)n+=Kn[d[i]>>4],n+=Kn[d[i]&15];t=`Uint8Array(0x${n})`}else if(d instanceof To)t=`PublicKey(${d.toBase58()})`;else if(d instanceof Object&&!e){let n={};Object.entries(d).forEach(([i,r])=>{n[i]=vn(r,!0)}),t=JSON.stringify(n)}else e||(t=JSON.stringify(d))}catch(n){t=JSON.stringify(d.toString())}return t}var ce=class{constructor(e){this.version=an;this.moduleName=e}_log(e,t){let n=e.toLowerCase();Kt[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!((Mn[this.moduleName]||Kt.default)>Kt[n])&&console.log(...t)}debug(...e){this._log(ce.levels.DEBUG,["[DEBUG]".blue,...e])}info(...e){this._log(ce.levels.INFO,["[INFO]".green,...e])}warn(...e){this._log(ce.levels.WARNING,["[WARN]".yellow,...e])}makeError(e,t,n){if(En)return this.makeError("censored error",t,{});t||(t=ce.errors.UNKNOWN_ERROR),n||(n={});let i=[];Object.entries(n).forEach(([a,c])=>{i.push(`${a}=${vn(c)})`)}),i.push(`code=${t}`),i.push(`module=${this.moduleName}`),i.push(`version=${this.version}`);let r=e;i.length&&(e+=" ("+i.join(", ")+")");let o=new Error(e);return o.reason=r,o.code=t,Object.entries(n).forEach(([a,c])=>{o[a]=c}),o}throwError(e,t,n){throw this.makeError(e,t,n)}throwArgumentError(e,t,n){return this.throwError(e,ce.errors.INVALID_ARGUMENT,{argument:t,value:n})}assert(e,t,n,i){e||this.throwError(t,n,i)}assertArgument(e,t,n,i){e||this.throwArgumentError(t,n,i)}checkNormalize(e){e==null&&(e="platform missing String.prototype.normalize"),qn&&this.throwError("platform missing String.prototype.normalize",ce.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:qn})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,ce.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,ce.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,n){n?n=": "+n:n="",e<t&&this.throwError("missing argument"+n,ce.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+n,ce.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",ce.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",ce.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",ce.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return cn||(cn=new ce(an)),cn}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",ce.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Un){if(!e)return;this.globalLogger().throwError("error censorship permanent",ce.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}En=!!e,Un=!!t}static setLogLevel(e,t){let n=Kt[t.toLowerCase()];if(n==null){ce.globalLogger().warn("invalid log level - "+t);return}Mn[e]=n}static from(e){return new ce(e)}},H=ce;H.errors=_n,H.levels=Vn;import{ASSOCIATED_TOKEN_PROGRAM_ID as Wn,TOKEN_PROGRAM_ID as j}from"@solana/spl-token";import{SYSVAR_CLOCK_PUBKEY as uc,SYSVAR_RENT_PUBKEY as yt}from"@solana/web3.js";var Fn=H.from("common/pubkey"),Te=Io.programId,rc=new nt("Memo1UhkJRfHyvLMcVucJwxXeuD728EqVDDwQDxFMNo"),Vt=new nt("SysvarRent111111111111111111111111111111111"),bt=new nt("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");function et(d){if(d instanceof nt)return d;if(typeof d=="string")try{return new nt(d)}catch(e){return Fn.throwArgumentError("invalid public key","publicKey",d)}return Fn.throwArgumentError("invalid public key","publicKey",d)}function re(d,e){let[t,n]=nt.findProgramAddressSync(d,e);return{publicKey:t,nonce:n}}function g(d,e){return{pubkey:d,isWritable:!0,isSigner:e}}function L(d,e){return{pubkey:d,isWritable:!1,isSigner:e}}var ho=[q,Lo,z,xo,Ee,ae,ie,Pe];function Ro(d){return typeof d=="object"&&d!==null&&!ho.some(e=>typeof e=="object"&&d instanceof e)}function Le(d){return typeof d=="string"?et(d):Array.isArray(d)?d.map(e=>Le(e)):Ro(d)?Object.fromEntries(Object.entries(d).map(([e,t])=>[e,Le(t)])):d}import{PublicKey as fc}from"@solana/web3.js";import Sc from"bn.js";function Gn(d,e=1,t=[]){let n=[...d];if(e<=0)return t;for(;n.length;)t.push(n.splice(0,e));return t}import{PublicKey as un,Transaction as ft}from"@solana/web3.js";var he=H.from("common/web3");function Ce(d,e,t){return U(this,null,function*(){let{batchRequest:n,commitment:i}=M({batchRequest:!1},t),r=Gn(e,100),o=new Array(r.length).fill([]);if(n){let a=r.map(u=>({methodName:"getMultipleAccounts",args:d._buildArgs([u.map(b=>b.toBase58())],i,"base64")}));o=(yield d._rpcBatchRequest(a)).map(u=>u.error?he.throwError("failed to get info for multiple accounts",H.errors.RPC_ERROR,{message:u.error.message}):u.result.value.map(m=>{if(m){let{data:b,executable:l,lamports:f,owner:y,rentEpoch:p}=m;return b.length!==2&&b[1]!=="base64"?he.throwError("info must be base64 encoded",H.errors.RPC_ERROR):{data:Buffer.from(b[0],"base64"),executable:l,lamports:f,owner:new un(y),rentEpoch:p}}else return null}))}else try{o=yield Promise.all(r.map(a=>d.getMultipleAccountsInfo(a,i)))}catch(a){if(a instanceof Error)return he.throwError("failed to get info for multiple accounts",H.errors.RPC_ERROR,{message:a.message})}return o.flat()})}function Yn(d,e,t){return U(this,null,function*(){let n=yield Ce(d,e.map(i=>i.pubkey),t);return e.map((i,r)=>Se(M({},i),{accountInfo:n[r]}))})}function At(d,e){if(d.length<1)return he.throwArgumentError("no instructions provided","instructions",d);if(e.length<1)return he.throwArgumentError("no signers provided","signers",e);let t=new ft({recentBlockhash:"11111111111111111111111111111111",feePayer:e[0]});t.add(...d);try{return t.serialize({verifySignatures:!1}),!0}catch(n){return!1}}function _t(d,e,t,n=!0){return U(this,null,function*(){let i=new un("RaydiumSimuLateTransaction11111111111111111"),r=[],o=new ft;o.feePayer=i;for(let u of e)At([...o.instructions,u],[i])||(r.push(o),o=new ft,o.feePayer=i),o.add(u);o.instructions.length>0&&r.push(o);let a=[];try{if(a=yield Bo(d,r,n),a.find(u=>u.err!==null))throw Error("rpc simulateTransaction error")}catch(u){if(u instanceof Error)return he.throwError("failed to simulate for instructions",H.errors.RPC_ERROR,{message:u.message})}let c=[];for(let u of a)if(he.debug("simulate result:",u),u.logs){let m=u.logs.filter(b=>b&&b.includes(t));he.debug("filteredLog:",c),he.assertArgument(m.length!==0,"simulate log not match keyword","keyword",t),c.push(...m)}return c})}function vt(d,e){let t=d.match(/{["\w:,]+}/g);return!t||t.length!==1?he.throwArgumentError("simulate log fail to match json","keyword",e):t[0]}function ue(d,e){let n=new RegExp(`"${e}":(\\d+)`,"g").exec(d);return!n||n.length!==2?he.throwArgumentError("simulate log fail to match key","key",e):n[1]}function Bo(d,e,t){return U(this,null,function*(){let n=[];if(t){let i=yield d.getLatestBlockhash(),r=[];for(let u of e){u.recentBlockhash=i.blockhash,u.lastValidBlockHeight=i.lastValidBlockHeight;let b=u._compile().serialize(),f=u._serialize(b).toString("base64");r.push(f)}let o=r.map(u=>({methodName:"simulateTransaction",args:d._buildArgs([u],void 0,"base64")})),a=[],c=20;for(let u=0;u<Math.ceil(o.length/c);u++)a.push(o.slice(u*c,(u+1)*c));n=yield(yield Promise.all(a.map(u=>U(this,null,function*(){return(yield d._rpcBatchRequest(u)).map(m=>m.result.value)})))).flat()}else try{n=yield Promise.all(e.map(i=>U(this,null,function*(){return yield(yield d.simulateTransaction(i)).value})))}catch(i){if(i instanceof Error)return he.throwError("failed to get info for multiple accounts",H.errors.RPC_ERROR,{message:i.message})}return n})}function mn({instructions:d,signers:e,payer:t}){let n={};for(let o of e)n[o.publicKey.toString()]=o;let i=[],r=[];for(let o of d){let a=[...r,o],c=new Set(a.map(m=>m.keys.filter(b=>b.isSigner).map(b=>b.pubkey.toString())).flat()),u=[...c.values()].map(m=>new un(m));At(a,[t,...u])?r.push(o):(i.push({transaction:new ft().add(...r),signer:[...c.values()].map(m=>n[m]).filter(m=>m!==void 0)}),r=[o])}if(r.length>0){let o=new Set(r.map(a=>a.keys.filter(c=>c.isSigner).map(c=>c.pubkey.toString())).flat());i.push({transaction:new ft().add(...r),signer:[...o.values()].map(a=>n[a]).filter(a=>a!==void 0)})}return i}function Ft(d){let e=new ArrayBuffer(4);return new DataView(e).setInt32(0,d,!1),new Uint8Array(e)}var Hc=Buffer.from("amm_config","utf8"),Do=Buffer.from("pool","utf8"),No=Buffer.from("pool_vault","utf8"),Oo=Buffer.from("pool_reward_vault","utf8"),Xn=Buffer.from("position","utf8"),Uo=Buffer.from("tick_array","utf8"),Eo=Buffer.from("operation","utf8");function Hn(d,e,t,n){return re([Do,e.toBuffer(),t.toBuffer(),n.toBuffer()],d)}function ln(d,e,t){return re([No,e.toBuffer(),t.toBuffer()],d)}function Qn(d,e,t){return re([Oo,e.toBuffer(),t.toBuffer()],d)}function me(d,e,t){return re([Uo,e.toBuffer(),Ft(t)],d)}function Wt(d,e,t,n){return re([Xn,e.toBuffer(),Ft(t),Ft(n)],d)}function it(d,e){return re([Xn,e.toBuffer()],d)}function Ye(d,e){return re([d.toBuffer(),j.toBuffer(),e.toBuffer()],new Co("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"))}function zn(d){return re([Buffer.from("metadata","utf8"),bt.toBuffer(),d.toBuffer()],bt)}function Gt(d){return re([Eo],d)}var le=60,dn=1024,F=class{static getTickArrayAddressByTick(e,t,n,i){let r=F.getTickArrayStartIndexByTick(n,i),{publicKey:o}=me(e,t,r);return o}static getTickOffsetInArray(e,t){if(e%t!=0)throw new Error("tickIndex % tickSpacing not equal 0");let n=F.getTickArrayStartIndexByTick(e,t),i=Math.floor((e-n)/t);if(i<0||i>=le)throw new Error("tick offset in array overflow");return i}static getTickArrayStartIndexByTick(e,t){let n=e/(le*t);return e<0&&e%(le*t)!=0?n=Math.ceil(n)-1:n=Math.floor(n),n*(t*le)}static getTickArrayOffsetInBitmapByTick(e,t){let n=t*le,i=Math.floor(e/n)+512;return Math.abs(i)}static checkTickArrayIsInitialized(e,t,n){let i=n*le,r=Math.floor(t/i)+512,o=Math.abs(r);return{isInitialized:e.testn(o),startIndex:(o-512)*i}}static getNextTickArrayStartIndex(e,t,n){return n?e-t*le:e+t*le}static mergeTickArrayBitmap(e){return e[0].add(e[1].shln(64)).add(e[2].shln(128)).add(e[3].shln(192)).add(e[4].shln(256)).add(e[5].shln(320)).add(e[6].shln(384)).add(e[7].shln(448)).add(e[8].shln(512)).add(e[9].shln(576)).add(e[10].shln(640)).add(e[11].shln(704)).add(e[12].shln(768)).add(e[13].shln(832)).add(e[14].shln(896)).add(e[15].shln(960))}static getInitializedTickArrayInRange(e,t,n,i){if(n%(t*le)!=0)throw new Error("Invild tickArrayStartIndex");let r=Math.floor(n/(t*le))+512;return[...F.searchLowBitFromStart(e,r-1,0,i,t),...F.searchHightBitFromStart(e,r,dn,i,t)]}static getAllInitializedTickArrayStartIndex(e,t){return F.searchHightBitFromStart(e,0,dn,dn,t)}static getAllInitializedTickArrayInfo(e,t,n,i){let r=[],o=F.getAllInitializedTickArrayStartIndex(n,i);for(let a of o){let{publicKey:c}=me(e,t,a);r.push({tickArrayStartIndex:a,tickArrayAddress:c})}return r}static getAllInitializedTickInTickArray(e){return e.ticks.filter(t=>t.liquidityGross.gtn(0))}static searchLowBitFromStart(e,t,n,i,r){let o=0,a=[];for(let c=t;c>=n;c--){if(e.shrn(c).and(new Zn(1)).eqn(1)){let u=(c-512)*(r*le);a.push(u),o++}if(o>=i)break}return a}static searchHightBitFromStart(e,t,n,i,r){let o=0,a=[];for(let c=t;c<n;c++){if(e.shrn(c).and(new Zn(1)).eqn(1)){let u=(c-512)*(r*le);a.push(u),o++}if(o>=i)break}return a}};var eu=N([ge(8),_("bump"),je("index"),B(""),Ie("protocolFeeRate"),Ie("tradeFeeRate"),je("tickSpacing"),Ie("fundFeeRate"),ee(Ie(),1,"padding"),B("fundOwner"),ee(S(),3,"padding")]),Mo=N([Ie("blockTimestamp"),E("sqrtPriceX64"),E("cumulativeTimePriceX64"),ee(E(),1,"")]),pn=N([ge(8),Nt("initialized"),B("poolId"),ee(Mo,1e3,"observations"),ee(E(),5,"")]),qo=N([_("rewardState"),S("openTime"),S("endTime"),S("lastUpdateTime"),E("emissionsPerSecondX64"),S("rewardTotalEmissioned"),S("rewardClaimed"),B("tokenMint"),B("tokenVault"),B("creator"),E("rewardGrowthGlobalX64")]),Jn=N([ge(8),_("bump"),B("ammConfig"),B("creator"),B("mintA"),B("mintB"),B("vaultA"),B("vaultB"),B("observationId"),_("mintDecimalsA"),_("mintDecimalsB"),je("tickSpacing"),E("liquidity"),E("sqrtPriceX64"),we("tickCurrent"),je("observationIndex"),je("observationUpdateDuration"),E("feeGrowthGlobalX64A"),E("feeGrowthGlobalX64B"),S("protocolFeesTokenA"),S("protocolFeesTokenB"),E("swapInAmountTokenA"),E("swapOutAmountTokenB"),E("swapInAmountTokenB"),E("swapOutAmountTokenA"),_("status"),ee(_(),7,""),ee(qo,3,"rewardInfos"),ee(S(),16,"tickArrayBitmap"),S("totalFeesTokenA"),S("totalFeesClaimedTokenA"),S("totalFeesTokenB"),S("totalFeesClaimedTokenB"),S("fundFeesTokenA"),S("fundFeesTokenB"),ee(S(),15*4-2,"padding")]),Ko=N([E("growthInsideLastX64"),S("rewardAmountOwed")]),jn=N([ge(8),_("bump"),B("nftMint"),B("poolId"),we("tickLower"),we("tickUpper"),E("liquidity"),E("feeGrowthInsideLastX64A"),E("feeGrowthInsideLastX64B"),S("tokenFeesOwedA"),S("tokenFeesOwedB"),ee(Ko,3,"rewardInfos"),ee(S(),8,"")]),tu=N([ge(8),_("bump"),B("poolId"),we("tickLowerIndex"),we("tickUpperIndex"),E("liquidity"),E("feeGrowthInsideLastX64A"),E("feeGrowthInsideLastX64B"),S("tokenFeesOwedA"),S("tokenFeesOwedB"),ee(E(),3,"rewardGrowthInside"),ee(S(),8,"")]),Vo=N([we("tick"),Bn("liquidityNet"),E("liquidityGross"),E("feeGrowthOutsideX64A"),E("feeGrowthOutsideX64B"),ee(E(),3,"rewardGrowthsOutsideX64"),ee(Ie(),13,"")]),St=N([ge(8),B("poolId"),we("startTickIndex"),ee(Vo,le,"ticks"),_("initializedTickCount"),ee(_(),115,"")]),$n=N([ge(329),ee(B(),100,"whitelistMints")]);import{PublicKey as _o,TransactionInstruction as De}from"@solana/web3.js";var qe={createPool:[233,146,209,142,207,104,64,188],initReward:[95,135,192,196,242,129,230,68],setRewardEmissions:[112,52,167,75,32,201,211,137],openPosition:[135,128,47,77,15,152,240,49],closePosition:[123,134,81,0,49,68,98,98],increaseLiquidity:[46,156,243,118,13,205,251,178],decreaseLiquidity:[160,38,208,111,104,91,44,1],swap:[248,198,158,145,225,117,135,200],collectReward:[18,237,166,197,34,16,213,144]};function ei(d,e,t,n,i,r,o,a,c,u){let m=N([E("sqrtPriceX64")]),b=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:j,isSigner:!1,isWritable:!1},{pubkey:Te,isSigner:!1,isWritable:!1},{pubkey:Vt,isSigner:!1,isWritable:!1}],l=Buffer.alloc(m.span);m.encode({sqrtPriceX64:u},l);let f=Buffer.from([...qe.createPool,...l]);return new De({keys:b,programId:d,data:f})}function ti(d,e,t,n,i,r,o,a,c,u,m,b,l,f,y,p,A,k,T,I,P,w){let D=N([we("tickLowerIndex"),we("tickUpperIndex"),we("tickArrayLowerStartIndex"),we("tickArrayUpperStartIndex"),E("liquidity"),S("amountMinA"),S("amountMinB")]),R=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:Vt,isSigner:!1,isWritable:!1},{pubkey:Te,isSigner:!1,isWritable:!1},{pubkey:j,isSigner:!1,isWritable:!1},{pubkey:Wn,isSigner:!1,isWritable:!1},{pubkey:bt,isSigner:!1,isWritable:!1}],C=Buffer.alloc(D.span);D.encode({tickLowerIndex:p,tickUpperIndex:A,tickArrayLowerStartIndex:k,tickArrayUpperStartIndex:T,liquidity:I,amountMinA:P,amountMinB:w},C);let K=Buffer.from([...qe.openPosition,...C]);return new De({keys:R,programId:d,data:K})}function ni(d,e,t,n,i){let r=N([]),o=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:Te,isSigner:!1,isWritable:!1},{pubkey:j,isSigner:!1,isWritable:!1}],a=Buffer.alloc(r.span);r.encode({},a);let c=Buffer.from([...qe.closePosition,...a]);return new De({keys:o,programId:d,data:c})}function ii(d,e,t,n,i,r,o,a,c,u,m,b,l,f,y){let p=N([E("liquidity"),S("amountMaxA"),S("amountMaxB")]),A=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:j,isSigner:!1,isWritable:!1}],k=Buffer.alloc(p.span);p.encode({liquidity:l,amountMaxA:f,amountMaxB:y},k);let T=Buffer.from([...qe.increaseLiquidity,...k]);return new De({keys:A,programId:d,data:T})}function oi(d,e,t,n,i,r,o,a,c,u,m,b,l,f,y,p){let A=N([E("liquidity"),S("amountMinA"),S("amountMinB")]),k=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:j,isSigner:!1,isWritable:!1},...l.map(P=>[{pubkey:P.poolRewardVault,isSigner:!1,isWritable:!0},{pubkey:P.ownerRewardVault,isSigner:!1,isWritable:!0}]).flat()],T=Buffer.alloc(A.span);A.encode({liquidity:f,amountMinA:y,amountMinB:p},T);let I=Buffer.from([...qe.decreaseLiquidity,...T]);return new De({keys:k,programId:d,data:I})}function ri(d,e,t,n,i,r,o,a,c,u,m,b,l,f){let y=N([S("amount"),S("otherAmountThreshold"),E("sqrtPriceLimitX64"),Nt("isBaseInput")]),p=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:j,isSigner:!1,isWritable:!1},...c.map(T=>({pubkey:T,isSigner:!1,isWritable:!0}))],A=Buffer.alloc(y.span);y.encode({amount:m,otherAmountThreshold:b,sqrtPriceLimitX64:l,isBaseInput:f},A);let k=Buffer.from([...qe.swap,...A]);return new De({keys:p,programId:d,data:k})}function si(d,e,t,n,i,r,o,a,c,u,m){let b=N([S("openTime"),S("endTime"),E("emissionsPerSecondX64")]),l=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:j,isSigner:!1,isWritable:!1},{pubkey:Te,isSigner:!1,isWritable:!1},{pubkey:Vt,isSigner:!1,isWritable:!1}],f=Buffer.alloc(b.span);b.encode({openTime:X(c),endTime:X(u),emissionsPerSecondX64:m},f);let y=Buffer.from([...qe.initReward,...f]);return new De({keys:l,programId:d,data:y})}function ai(d,e,t,n,i,r,o,a,c,u,m){let b=N([_("rewardIndex"),E("emissionsPerSecondX64"),S("openTime"),S("endTime")]),l=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:j,isSigner:!1,isWritable:!1}],f=Buffer.alloc(b.span);b.encode({rewardIndex:a,emissionsPerSecondX64:m,openTime:X(c),endTime:X(u)},f);let y=Buffer.from([...qe.setRewardEmissions,...f]);return new De({keys:l,programId:d,data:y})}function ci(d,e,t,n,i,r){let o=N([_("rewardIndex")]),a=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:j,isSigner:!1,isWritable:!1}],c=Buffer.alloc(o.span);o.encode({rewardIndex:r},c);let u=Buffer.from([...qe.collectReward,...c]);return new De({keys:a,programId:d,data:u})}function Re(){return new De({programId:new _o("ComputeBudget111111111111111111111111111111"),data:Buffer.from([0,128,26,6,0,0,0,0,0]),keys:[]})}import{Keypair as Si,PublicKey as _e,SystemProgram as nr,Transaction as Be}from"@solana/web3.js";import ye from"bn.js";import $ from"decimal.js";import{AccountLayout as ui,TOKEN_PROGRAM_ID as mi}from"@solana/spl-token";import{Keypair as Jo,SystemProgram as jo}from"@solana/web3.js";var mu=N([Ie("mintAuthorityOption"),B("mintAuthority"),S("supply"),_("decimals"),_("isInitialized"),Ie("freezeAuthorityOption"),B("freezeAuthority")]),gt=N([B("mint"),B("owner"),S("amount"),Ie("delegateOption"),B("delegate"),_("state"),Ie("isNativeOption"),S("isNative"),S("delegatedAmount"),Ie("closeAuthorityOption"),B("closeAuthority")]);import{createAssociatedTokenAccountInstruction as vo,createCloseAccountInstruction as Fo,createInitializeAccountInstruction as Wo,createInitializeMintInstruction as Go,createMintToInstruction as Yo,createTransferInstruction as Xo}from"@solana/spl-token";import{Keypair as Ho,SystemProgram as Qo,TransactionInstruction as zo}from"@solana/web3.js";import Zo from"bn.js";var se=class{static getAssociatedTokenAccount({mint:e,owner:t}){return Ye(t,e).publicKey}static makeCreateAssociatedTokenAccountInstruction({mint:e,associatedAccount:t,owner:n,payer:i}){return vo(i,t,n,e)}static makeCreateWrappedNativeAccountInstructions(o){return U(this,arguments,function*({connection:e,owner:t,payer:n,amount:i,commitment:r}){let a=[],c=yield e.getMinimumBalanceForRentExemption(gt.span,r),u=X(i).add(new Zo(c)),m=Ho.generate();return a.push(Qo.createAccount({fromPubkey:n,newAccountPubkey:m.publicKey,lamports:u.toNumber(),space:gt.span,programId:j})),a.push(this.makeInitAccountInstruction({mint:et(be.mint),tokenAccount:m.publicKey,owner:t})),{newAccount:m,instructions:a}})}static insertCreateWrappedNativeAccountInstructions(c){return U(this,arguments,function*({connection:e,owner:t,payer:n,amount:i,instructions:r,signers:o,commitment:a}){let{newAccount:u,instructions:m}=yield this.makeCreateWrappedNativeAccountInstructions({connection:e,owner:t,payer:n,amount:i,commitment:a});return r.push(...m),o.push(u),u.publicKey})}static makeInitMintInstruction({mint:e,decimals:t,mintAuthority:n,freezeAuthority:i=null}){return Go(e,t,n,i)}static makeMintToInstruction({mint:e,dest:t,authority:n,amount:i,multiSigners:r=[]}){return Yo(e,t,n,BigInt(String(i)),r)}static makeInitAccountInstruction({mint:e,tokenAccount:t,owner:n}){return Wo(t,e,n)}static makeTransferInstruction({source:e,destination:t,owner:n,amount:i,multiSigners:r=[]}){return Xo(e,t,n,BigInt(String(i)),r)}static makeCloseAccountInstruction({tokenAccount:e,owner:t,payer:n,multiSigners:i=[]}){return Fo(e,n,t,i)}static createInitAccountInstruction(e,t,n,i){let r=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:yt,isSigner:!1,isWritable:!1}],o=_("instruction"),a=Buffer.alloc(o.span);return o.encode(1,a),new zo({keys:r,programId:e,data:a})}};var Ne=class{static _selectTokenAccount(e){let{tokenAccounts:t,mint:n,owner:i,config:r}=e,{associatedOnly:o}=M({associatedOnly:!0},r),a=t.filter(({accountInfo:u})=>u.mint.equals(n)).sort((u,m)=>u.accountInfo.amount.lt(m.accountInfo.amount)?1:-1),c=se.getAssociatedTokenAccount({mint:n,owner:i});for(let u of a){let{pubkey:m}=u;if(o){if(c.equals(m))return m}else return m}return null}static _handleTokenAccount(e){return U(this,null,function*(){let{connection:t,side:n,amount:i,mint:r,tokenAccount:o,owner:a,payer:c=a,frontInstructions:u,endInstructions:m,signers:b,bypassAssociatedCheck:l}=e,f=se.getAssociatedTokenAccount({mint:r,owner:a});if(h.WSOL.mint.equals(r)){let y=yield se.insertCreateWrappedNativeAccountInstructions({connection:t,owner:a,payer:c,instructions:u,signers:b,amount:i});return m&&m.push(se.makeCloseAccountInstruction({tokenAccount:y,owner:a,payer:c})),y}else if(!o||n==="out"&&!f.equals(o)&&!l)return u.push(se.makeCreateAssociatedTokenAccountInstruction({mint:r,associatedAccount:f,owner:a,payer:c})),f;return o})}static _selectOrCreateTokenAccount(e){return U(this,null,function*(){var u,m;let{mint:t,tokenAccounts:n,createInfo:i,associatedOnly:r,owner:o}=e,a=se.getAssociatedTokenAccount({mint:t,owner:o}),c=n.filter(b=>b.accountInfo.mint.equals(t)&&(!r||b.pubkey.equals(a))).sort((b,l)=>b.accountInfo.amount.lt(l.accountInfo.amount)?1:-1);if(i===void 0||c.length>0)return c.length>0?c[0].pubkey:void 0;if(r){if(i.frontInstructions.push(se.makeCreateAssociatedTokenAccountInstruction({mint:t,associatedAccount:a,owner:o,payer:i.payer})),t.equals(h.WSOL.mint)){let b=yield se.insertCreateWrappedNativeAccountInstructions({connection:i.connection,owner:o,payer:i.payer,instructions:i.frontInstructions,signers:i.signers,amount:(u=i.amount)!=null?u:0});i.endInstructions&&i.endInstructions.push(se.makeCloseAccountInstruction({tokenAccount:b,owner:o,payer:i.payer})),i.amount&&i.frontInstructions.push(se.makeTransferInstruction({source:b,destination:a,owner:o,amount:i.amount}))}return i.endInstructions&&i.endInstructions.push(se.makeCloseAccountInstruction({tokenAccount:a,owner:o,payer:i.payer})),a}else if(t.equals(h.WSOL.mint)){let b=yield se.insertCreateWrappedNativeAccountInstructions({connection:i.connection,owner:o,payer:i.payer,instructions:i.frontInstructions,signers:i.signers,amount:(m=i.amount)!=null?m:0});return i.endInstructions&&i.endInstructions.push(se.makeCloseAccountInstruction({tokenAccount:b,owner:o,payer:i.payer})),b}else{let b=Jo.generate(),l=yield i.connection.getMinimumBalanceForRentExemption(ui.span),f=jo.createAccount({fromPubkey:o,newAccountPubkey:b.publicKey,lamports:l,space:ui.span,programId:mi}),y=se.createInitAccountInstruction(mi,t,b.publicKey,o);return i.frontInstructions.push(f,y),i.signers.push(b),i.endInstructions&&i.endInstructions.push(se.makeCloseAccountInstruction({tokenAccount:b.publicKey,owner:o,payer:i.payer})),b.publicKey}})}};import{PublicKey as Hu}from"@solana/web3.js";import{BN as zu}from"bn.js";import Qe from"bn.js";var Xe=new Qe(-1),Oe=new Qe(1).shln(64),Yt=new Qe(1).shln(128),bn=Oe.sub(J),kt=64,li=Yt.subn(1),ot=-307200,Pt=-ot,Ke=new Qe("3939943522091"),Ve=new Qe("86367321006760116002434269"),di=-307200,pi=306600,bi=14,yi="59543866431248",fi="184467440737095516",Ai="15793534762490258745",Xt=new Qe(10).pow(new Qe(6));import v from"bn.js";import Tt from"decimal.js";var yn=15,Ht=class{static getTickArrays(e,t,n,i,r,o){return U(this,null,function*(){let a=F.mergeTickArrayBitmap(o),c=[],u=F.getTickArrayStartIndexByTick(i,r),m=F.getInitializedTickArrayInRange(a,r,u,Math.floor(yn/2));for(let f=0;f<m.length;f++){let{publicKey:y}=me(t,n,m[f]);c.push(y)}let b=(yield Ce(e,c)).map(f=>f!==null?St.decode(f.data):null),l={};for(let f=0;f<c.length;f++){let y=b[f];y!==null&&(l[y.startTickIndex]=Se(M({},y),{address:c[f]}))}return l})}static nextInitializedTick(e,t,n,i,r,o){let{initializedTick:a,tickArrayAddress:c,tickArrayStartTickIndex:u}=this.nextInitializedTickInOneArray(e,t,n,i,r,o);for(;a==null||a.liquidityGross.lten(0);){if(u=F.getNextTickArrayStartIndex(u,r,o),u<di||u>pi)throw new Error("No enough initialized tickArray");let m=n[u];if(m===void 0)continue;let{nextTick:b,tickArrayAddress:l,tickArrayStartTickIndex:f}=this.firstInitializedTickInOneArray(e,t,m,o);[a,c,u]=[b,l,f]}if(a==null)throw new Error("No invaild tickArray cache");return{nextTick:a,tickArrayAddress:c,tickArrayStartTickIndex:u}}static firstInitializedTickInOneArray(e,t,n,i){let r;if(i){let a=le-1;for(;a>=0;){let c=n.ticks[a];if(c.liquidityGross.gtn(0)){r=c;break}a=a-1}}else{let a=0;for(;a<le;){let c=n.ticks[a];if(c.liquidityGross.gtn(0)){r=c;break}a=a+1}}let{publicKey:o}=me(e,t,n.startTickIndex);return{nextTick:r,tickArrayAddress:o,tickArrayStartTickIndex:n.startTickIndex}}static nextInitializedTickInOneArray(e,t,n,i,r,o){let a=F.getTickArrayStartIndexByTick(i,r),c=Math.floor((i-a)/r),u=n[a];if(u==null)return{initializedTick:void 0,tickArrayAddress:void 0,tickArrayStartTickIndex:a};let m;if(o)for(;c>=0;){let l=u.ticks[c];if(l.liquidityGross.gtn(0)){m=l;break}c=c-1}else for(c=c+1;c<le;){let l=u.ticks[c];if(l.liquidityGross.gtn(0)){m=l;break}c=c+1}let{publicKey:b}=me(e,t,a);return{initializedTick:m,tickArrayAddress:b,tickArrayStartTickIndex:u.startTickIndex}}};var V=class{static mulDivRoundingUp(e,t,n){let i=e.mul(t),r=i.div(n);return i.mod(n).eq(O)||(r=r.add(J)),r}static mulDivFloor(e,t,n){if(n.eq(O))throw new Error("division by 0");return e.mul(t).div(n)}static mulDivCeil(e,t,n){if(n.eq(O))throw new Error("division by 0");return e.mul(t).add(n.sub(J)).div(n)}static x64ToDecimal(e,t){return new Tt(e.toString()).div(Tt.pow(2,64)).toDecimalPlaces(t)}static decimalToX64(e){return new v(e.mul(Tt.pow(2,64)).floor().toFixed())}static wrappingSubU128(e,t){return e.add(Yt).sub(t).mod(Yt)}};function de(d,e){return fn(d.mul(e),64,256)}function $o(d,e,t){let n=d.toTwos(t).shln(e);return n.imaskn(t+1),n.fromTwos(t)}function fn(d,e,t){let n=d.toTwos(t).shrn(e);return n.imaskn(t-e+1),n.fromTwos(t-e)}var W=class{static sqrtPriceX64ToPrice(e,t,n){return V.x64ToDecimal(e).pow(2).mul(Tt.pow(10,t-n))}static priceToSqrtPriceX64(e,t,n){return V.decimalToX64(e.mul(Tt.pow(10,n-t)).sqrt())}static getNextSqrtPriceX64FromInput(e,t,n,i){if(!e.gt(O))throw new Error("sqrtPriceX64 must greater than 0");if(!t.gt(O))throw new Error("liquidity must greater than 0");return i?this.getNextSqrtPriceFromTokenAmountARoundingUp(e,t,n,!0):this.getNextSqrtPriceFromTokenAmountBRoundingDown(e,t,n,!0)}static getNextSqrtPriceX64FromOutput(e,t,n,i){if(!e.gt(O))throw new Error("sqrtPriceX64 must greater than 0");if(!t.gt(O))throw new Error("liquidity must greater than 0");return i?this.getNextSqrtPriceFromTokenAmountBRoundingDown(e,t,n,!1):this.getNextSqrtPriceFromTokenAmountARoundingUp(e,t,n,!1)}static getNextSqrtPriceFromTokenAmountARoundingUp(e,t,n,i){if(n.eq(O))return e;let r=t.shln(kt);if(i){let o=r,a=r.add(n.mul(e));return a.gte(o)?V.mulDivCeil(o,e,a):V.mulDivRoundingUp(o,J,o.div(e).add(n))}else{let o=n.mul(e);if(!r.gt(o))throw new Error("getNextSqrtPriceFromTokenAmountARoundingUp,liquidityLeftShift must gt amountMulSqrtPrice");let a=r.sub(o);return V.mulDivCeil(r,e,a)}}static getNextSqrtPriceFromTokenAmountBRoundingDown(e,t,n,i){let r=n.shln(kt);if(i)return e.add(r.div(t));{let o=V.mulDivRoundingUp(r,J,t);if(!e.gt(o))throw new Error("getNextSqrtPriceFromTokenAmountBRoundingDown sqrtPriceX64 must gt amountDivLiquidity");return e.sub(o)}}static getSqrtPriceX64FromTick(e){if(!Number.isInteger(e))throw new Error("tick must be integer");if(e<ot||e>Pt)throw new Error("tick must be in MIN_TICK and MAX_TICK");let t=e<0?e*-1:e,n=(t&1)!=0?new v("18445821805675395072"):new v("18446744073709551616");return(t&2)!=0&&(n=de(n,new v("18444899583751176192"))),(t&4)!=0&&(n=de(n,new v("18443055278223355904"))),(t&8)!=0&&(n=de(n,new v("18439367220385607680"))),(t&16)!=0&&(n=de(n,new v("18431993317065453568"))),(t&32)!=0&&(n=de(n,new v("18417254355718170624"))),(t&64)!=0&&(n=de(n,new v("18387811781193609216"))),(t&128)!=0&&(n=de(n,new v("18329067761203558400"))),(t&256)!=0&&(n=de(n,new v("18212142134806163456"))),(t&512)!=0&&(n=de(n,new v("17980523815641700352"))),(t&1024)!=0&&(n=de(n,new v("17526086738831433728"))),(t&2048)!=0&&(n=de(n,new v("16651378430235570176"))),(t&4096)!=0&&(n=de(n,new v("15030750278694412288"))),(t&8192)!=0&&(n=de(n,new v("12247334978884435968"))),(t&16384)!=0&&(n=de(n,new v("8131365268886854656"))),(t&32768)!=0&&(n=de(n,new v("3584323654725218816"))),(t&65536)!=0&&(n=de(n,new v("696457651848324352"))),(t&131072)!=0&&(n=de(n,new v("26294789957507116"))),(t&262144)!=0&&(n=de(n,new v("37481735321082"))),e>0&&(n=li.div(n)),n}static getTickFromPrice(e,t,n){return W.getTickFromSqrtPriceX64(W.priceToSqrtPriceX64(e,t,n))}static getTickFromSqrtPriceX64(e){if(e.gt(Ve)||e.lt(Ke))throw new Error("Provided sqrtPrice is not within the supported sqrtPrice range.");let t=e.bitLength()-1,n=new v(t-64),i=$o(n,32,128),r=new v("8000000000000000","hex"),o=0,a=new v(0),c=t>=64?e.shrn(t-63):e.shln(63-t);for(;r.gt(new v(0))&&o<bi;){c=c.mul(c);let y=c.shrn(127);c=c.shrn(63+y.toNumber()),a=a.add(r.mul(y)),r=r.shrn(1),o+=1}let u=a.shrn(32),b=i.add(u).mul(new v(yi)),l=fn(b.sub(new v(fi)),64,128).toNumber(),f=fn(b.add(new v(Ai)),64,128).toNumber();return l==f?l:W.getSqrtPriceX64FromTick(f).lte(e)?f:l}},rt=class{static getTickWithPriceAndTickspacing(e,t,n,i){let o=W.getTickFromSqrtPriceX64(W.priceToSqrtPriceX64(e,n,i))/t;return o<0?o=Math.floor(o):o=Math.ceil(o),o*t}static roundPriceWithTickspacing(e,t,n,i){let r=rt.getTickWithPriceAndTickspacing(e,t,n,i),o=W.getSqrtPriceX64FromTick(r);return W.sqrtPriceX64ToPrice(o,n,i)}},Y=class{static addDelta(e,t){return e.add(t)}static getTokenAmountAFromLiquidity(e,t,n,i){if(e.gt(t)&&([e,t]=[t,e]),!e.gt(O))throw new Error("sqrtPriceX64A must greater than 0");let r=n.ushln(kt),o=t.sub(e);return i?V.mulDivRoundingUp(V.mulDivCeil(r,o,t),J,e):V.mulDivFloor(r,o,t).div(e)}static getTokenAmountBFromLiquidity(e,t,n,i){if(e.gt(t)&&([e,t]=[t,e]),!e.gt(O))throw new Error("sqrtPriceX64A must greater than 0");return i?V.mulDivCeil(n,t.sub(e),Oe):V.mulDivFloor(n,t.sub(e),Oe)}static getLiquidityFromTokenAmountA(e,t,n,i){e.gt(t)&&([e,t]=[t,e]);let r=n.mul(e).mul(t),o=t.sub(e),a=r.div(o);return i?V.mulDivRoundingUp(a,J,bn):a.shrn(kt)}static getLiquidityFromTokenAmountB(e,t,n){return e.gt(t)&&([e,t]=[t,e]),V.mulDivFloor(n,bn,t.sub(e))}static getLiquidityFromTokenAmounts(e,t,n,i,r){if(t.gt(n)&&([t,n]=[n,t]),e.lte(t))return Y.getLiquidityFromTokenAmountA(t,n,i,!1);if(e.lt(n)){let o=Y.getLiquidityFromTokenAmountA(e,n,i,!1),a=Y.getLiquidityFromTokenAmountB(t,e,r);return o.lt(a)?o:a}else return Y.getLiquidityFromTokenAmountB(t,n,r)}static getAmountsFromLiquidity(e,t,n,i,r){if(t.gt(n)&&([t,n]=[n,t]),e.lte(t))return{amountA:Y.getTokenAmountAFromLiquidity(t,n,i,r),amountB:new v(0)};if(e.lt(n)){let o=Y.getTokenAmountAFromLiquidity(e,n,i,r),a=Y.getTokenAmountBFromLiquidity(t,e,i,r);return{amountA:o,amountB:a}}else return{amountA:new v(0),amountB:Y.getTokenAmountBFromLiquidity(t,n,i,r)}}static getAmountsFromLiquidityWithSlippage(e,t,n,i,r,o,a){let{amountA:c,amountB:u}=Y.getAmountsFromLiquidity(e,t,n,i,o),m=r?1+a:1-a,b=c.muln(m),l=u.muln(m);return{amountSlippageA:b,amountSlippageB:l}}},st=class{static swapCompute(e,t,n,i,r,o,a,c,u,m,b,l){if(m.eq(O))throw new Error("amountSpecified must not be 0");if(l||(l=i?Ke.add(J):Ve.sub(J)),i){if(l.lt(Ke))throw new Error("sqrtPriceX64 must greater than MIN_SQRT_PRICE_X64");if(l.gte(u))throw new Error("sqrtPriceX64 must smaller than current")}else{if(l.gt(Ve))throw new Error("sqrtPriceX64 must smaller than MAX_SQRT_PRICE_X64");if(l.lte(u))throw new Error("sqrtPriceX64 must greater than current")}let f=m.gt(O),y={amountSpecifiedRemaining:m,amountCalculated:O,sqrtPriceX64:u,tick:a,accounts:[],liquidity:o,feeAmount:new v(0)},p=0;for(;!y.amountSpecifiedRemaining.eq(O)&&y.sqrtPriceX64!=l&&y.tick<Pt&&y.tick>ot;){if(p>10)throw Error("liquidity limit");let A={};A.sqrtPriceStartX64=y.sqrtPriceX64;let{nextTick:k,tickArrayAddress:T,tickArrayStartTickIndex:I}=Ht.nextInitializedTick(e,t,n,y.tick,c,i);A.tickNext=k.tick,A.initialized=k.liquidityGross.gtn(0),b!==I&&T&&(y.accounts.push(T),b=I),A.tickNext<ot?A.tickNext=ot:A.tickNext>Pt&&(A.tickNext=Pt),A.sqrtPriceNextX64=W.getSqrtPriceX64FromTick(A.tickNext);let P;if(i&&A.sqrtPriceNextX64.lt(l)||!i&&A.sqrtPriceNextX64.gt(l)?P=l:P=A.sqrtPriceNextX64,[y.sqrtPriceX64,A.amountIn,A.amountOut,A.feeAmount]=st.swapStepCompute(y.sqrtPriceX64,P,y.liquidity,y.amountSpecifiedRemaining,r),y.feeAmount=y.feeAmount.add(A.feeAmount),f?(y.amountSpecifiedRemaining=y.amountSpecifiedRemaining.sub(A.amountIn.add(A.feeAmount)),y.amountCalculated=y.amountCalculated.sub(A.amountOut)):(y.amountSpecifiedRemaining=y.amountSpecifiedRemaining.add(A.amountOut),y.amountCalculated=y.amountCalculated.add(A.amountIn.add(A.feeAmount))),y.sqrtPriceX64.eq(A.sqrtPriceNextX64)){if(A.initialized){let w=k.liquidityNet;i&&(w=w.mul(Xe)),y.liquidity=Y.addDelta(y.liquidity,w)}y.tick=i?A.tickNext-1:A.tickNext}else y.sqrtPriceX64!=A.sqrtPriceStartX64&&(y.tick=W.getTickFromSqrtPriceX64(y.sqrtPriceX64));++p}return{amountCalculated:y.amountCalculated,feeAmount:y.feeAmount,sqrtPriceX64:y.sqrtPriceX64,liquidity:y.liquidity,tickCurrent:y.tick,accounts:y.accounts}}static swapStepCompute(e,t,n,i,r){let o={sqrtPriceX64Next:new v(0),amountIn:new v(0),amountOut:new v(0),feeAmount:new v(0)},a=e.gte(t),c=i.gte(O);if(c){let m=V.mulDivFloor(i,Xt.sub(new v(r.toString())),Xt);o.amountIn=a?Y.getTokenAmountAFromLiquidity(t,e,n,!0):Y.getTokenAmountBFromLiquidity(e,t,n,!0),m.gte(o.amountIn)?o.sqrtPriceX64Next=t:o.sqrtPriceX64Next=W.getNextSqrtPriceX64FromInput(e,n,m,a)}else o.amountOut=a?Y.getTokenAmountBFromLiquidity(t,e,n,!1):Y.getTokenAmountAFromLiquidity(e,t,n,!1),i.mul(Xe).gte(o.amountOut)?o.sqrtPriceX64Next=t:o.sqrtPriceX64Next=W.getNextSqrtPriceX64FromOutput(e,n,i.mul(Xe),a);let u=t.eq(o.sqrtPriceX64Next);return a?(u&&c||(o.amountIn=Y.getTokenAmountAFromLiquidity(o.sqrtPriceX64Next,e,n,!0)),u&&!c||(o.amountOut=Y.getTokenAmountBFromLiquidity(o.sqrtPriceX64Next,e,n,!1))):(o.amountIn=u&&c?o.amountIn:Y.getTokenAmountBFromLiquidity(e,o.sqrtPriceX64Next,n,!0),o.amountOut=u&&!c?o.amountOut:Y.getTokenAmountAFromLiquidity(e,o.sqrtPriceX64Next,n,!1)),!c&&o.amountOut.gt(i.mul(Xe))&&(o.amountOut=i.mul(Xe)),c&&!o.sqrtPriceX64Next.eq(t)?o.feeAmount=i.sub(o.amountIn):o.feeAmount=V.mulDivCeil(o.amountIn,new v(r),Xt.sub(new v(r))),[o.sqrtPriceX64Next,o.amountIn,o.amountOut,o.feeAmount]}};import{PublicKey as er}from"@solana/web3.js";import tr from"bn.js";var wt=class{static getOutputAmountAndRemainAccounts(e,t,n,i,r){let o=n.equals(e.mintA.mint),a=[],{isExist:c,startIndex:u,nextAccountMeta:m}=this.getFirstInitializedTickArray(e,o);if(!c||u===void 0||!m)throw new Error("Invalid tick array");a.push(m);let{amountCalculated:b,accounts:l,sqrtPriceX64:f,feeAmount:y}=st.swapCompute(e.programId,e.id,t,o,e.ammConfig.tradeFeeRate,e.liquidity,e.tickCurrent,e.tickSpacing,e.sqrtPriceX64,i,u,r);return a.push(...l),{expectedAmountOut:b.mul(Xe),remainingAccounts:a,executionPrice:f,feeAmount:y}}static getFirstInitializedTickArray(e,t){let n=F.mergeTickArrayBitmap(e.tickArrayBitmap),{isInitialized:i,startIndex:r}=F.checkTickArrayIsInitialized(n,e.tickCurrent,e.tickSpacing);if(i){let{publicKey:c}=me(e.programId,e.id,r);return{isExist:!0,startIndex:r,nextAccountMeta:c}}let{isExist:o,nextStartIndex:a}=this.nextInitializedTickArrayStartIndex(e,t);if(o){let{publicKey:c}=me(e.programId,e.id,a);return{isExist:!0,startIndex:a,nextAccountMeta:c}}return{isExist:!1,nextAccountMeta:void 0,startIndex:void 0}}static nextInitializedTickArrayStartIndex(e,t){let n=F.mergeTickArrayBitmap(e.tickArrayBitmap),i=F.getTickArrayOffsetInBitmapByTick(e.tickCurrent,e.tickSpacing),r=t?F.searchLowBitFromStart(n,i-1,0,1,e.tickSpacing):F.searchHightBitFromStart(n,i,1024,1,e.tickSpacing);return r.length>0?{isExist:!0,nextStartIndex:r[0]}:{isExist:!1,nextStartIndex:0}}static updatePoolRewardInfos({chainTime:e,poolLiquidity:t,rewardInfos:n}){let i=[];for(let r of n){let o=Se(M({},r),{perSecond:V.x64ToDecimal(r.emissionsPerSecondX64),remainingRewards:void 0});if(o.tokenMint.equals(er.default))continue;if(e<=o.openTime.toNumber()||t.eq(O)){i.push(o);continue}let a=new tr(Math.min(o.endTime.toNumber(),e)),c=a.sub(o.lastUpdateTime),u=V.mulDivFloor(c,o.emissionsPerSecondX64,t),m=o.rewardGrowthGlobalX64.add(u),b=V.mulDivFloor(c,o.emissionsPerSecondX64,Oe),l=o.rewardTotalEmissioned.add(b);i.push(Se(M({},o),{rewardGrowthGlobalX64:m,rewardTotalEmissioned:l,lastUpdateTime:a}))}return i}};import at from"bn.js";var It=class{static getfeeGrowthInside(e,t,n){let i=new at(0),r=new at(0);e.tickCurrent>=t.tick?(i=t.feeGrowthOutsideX64A,r=t.feeGrowthOutsideX64B):(i=e.feeGrowthGlobalX64A.sub(t.feeGrowthOutsideX64A),r=e.feeGrowthGlobalX64B.sub(t.feeGrowthOutsideX64B));let o=new at(0),a=new at(0);e.tickCurrent<n.tick?(o=n.feeGrowthOutsideX64A,a=n.feeGrowthOutsideX64B):(o=e.feeGrowthGlobalX64A.sub(n.feeGrowthOutsideX64A),a=e.feeGrowthGlobalX64B.sub(n.feeGrowthOutsideX64B));let c=V.wrappingSubU128(V.wrappingSubU128(e.feeGrowthGlobalX64A,i),o),u=V.wrappingSubU128(V.wrappingSubU128(e.feeGrowthGlobalX64B,r),a);return{feeGrowthInsideX64A:c,feeGrowthInsideBX64:u}}static GetPositionFees(e,t,n,i){let{feeGrowthInsideX64A:r,feeGrowthInsideBX64:o}=this.getfeeGrowthInside(e,n,i),a=V.mulDivFloor(V.wrappingSubU128(r,t.feeGrowthInsideLastX64A),t.liquidity,Oe),c=t.tokenFeesOwedA.add(a),u=V.mulDivFloor(V.wrappingSubU128(o,t.feeGrowthInsideLastX64B),t.liquidity,Oe),m=t.tokenFeesOwedB.add(u);return{tokenFeeAmountA:c,tokenFeeAmountB:m}}static GetPositionRewards(e,t,n,i){let r=[],o=this.getRewardGrowthInside(e.tickCurrent,n,i,e.rewardInfos);for(let a=0;a<o.length;a++){let c=o[a],u=t.rewardInfos[a],m=V.wrappingSubU128(c,u.growthInsideLastX64),b=V.mulDivFloor(m,t.liquidity,Oe),l=u.rewardAmountOwed.add(b);r.push(l)}return r}static getRewardGrowthInside(e,t,n,i){let r=[];for(let o=0;o<i.length;o++){let a=new at(0);t.liquidityGross.eqn(0)?a=i[o].rewardGrowthGlobalX64:e<t.tick?a=i[o].rewardGrowthGlobalX64.sub(t.rewardGrowthsOutsideX64[o]):a=t.rewardGrowthsOutsideX64[o];let c=new at(0);n.liquidityGross.eqn(0)||(e<n.tick?c=n.rewardGrowthsOutsideX64[o]:c=i[o].rewardGrowthGlobalX64.sub(n.rewardGrowthsOutsideX64[o])),r.push(V.wrappingSubU128(V.wrappingSubU128(i[o].rewardGrowthGlobalX64,a),c))}return r}};var fe=H.from("AmmV3"),ve=class extends Ne{static makeCreatePoolTransaction(c){return U(this,arguments,function*({connection:e,programId:t,owner:n,mint1:i,mint2:r,ammConfig:o,initialPrice:a}){let[u,m,b]=i.mint._bn.gt(r.mint._bn)?[r,i,new $(1).div(a)]:[i,r,a],l=W.priceToSqrtPriceX64(b,u.decimals,m.decimals),f=new Be;f.add(Re());let y=yield this.makeCreatePoolInstructions({connection:e,programId:t,owner:n,mintA:u,mintB:m,ammConfigId:o.id,initialPriceX64:l});return f.add(...y.instructions),{signers:y.signers,transaction:f,mockPoolInfo:{id:y.address.poolId,mintA:{mint:u.mint,vault:y.address.mintAVault,decimals:u.decimals},mintB:{mint:m.mint,vault:y.address.mintBVault,decimals:m.decimals},ammConfig:o,observationId:y.address.observationId,creator:n,programId:t,version:6,tickSpacing:o.tickSpacing,liquidity:O,sqrtPriceX64:l,currentPrice:b,tickCurrent:0,observationIndex:0,observationUpdateDuration:0,feeGrowthGlobalX64A:O,feeGrowthGlobalX64B:O,protocolFeesTokenA:O,protocolFeesTokenB:O,swapInAmountTokenA:O,swapOutAmountTokenB:O,swapInAmountTokenB:O,swapOutAmountTokenA:O,tickArrayBitmap:[],rewardInfos:[],day:{volume:0,volumeFee:0,feeA:0,feeB:0,feeApr:0,rewardApr:{A:0,B:0,C:0},apr:0,priceMax:0,priceMin:0},week:{volume:0,volumeFee:0,feeA:0,feeB:0,feeApr:0,rewardApr:{A:0,B:0,C:0},apr:0,priceMax:0,priceMin:0},month:{volume:0,volumeFee:0,feeA:0,feeB:0,feeApr:0,rewardApr:{A:0,B:0,C:0},apr:0,priceMax:0,priceMin:0},tvl:0}}})}static makeOpenPositionTransaction(u){return U(this,arguments,function*({connection:e,poolInfo:t,ownerInfo:n,tickLower:i,tickUpper:r,liquidity:o,slippage:a,associatedOnly:c=!0}){let m=[],b=[],l=[],{amountSlippageA:f,amountSlippageB:y}=Y.getAmountsFromLiquidityWithSlippage(t.sqrtPriceX64,W.getSqrtPriceX64FromTick(i),W.getSqrtPriceX64FromTick(r),o,!0,!0,a),p=n.useSOLBalance&&t.mintA.mint.equals(h.WSOL.mint),A=n.useSOLBalance&&t.mintB.mint.equals(h.WSOL.mint),k=yield this._selectOrCreateTokenAccount({mint:t.mintA.mint,tokenAccounts:p?[]:n.tokenAccounts,owner:n.wallet,createInfo:p?{connection:e,payer:n.feePayer,amount:f,frontInstructions:m,endInstructions:b,signers:l}:void 0,associatedOnly:p?!1:c}),T=yield this._selectOrCreateTokenAccount({mint:t.mintB.mint,tokenAccounts:A?[]:n.tokenAccounts,owner:n.wallet,createInfo:A?{connection:e,payer:n.feePayer,amount:y,frontInstructions:m,endInstructions:b,signers:l}:void 0,associatedOnly:A?!1:c});fe.assertArgument(k!==void 0&&T!==void 0,"cannot found target token accounts","tokenAccounts",n.tokenAccounts);let I=new Be;I.add(Re());let P=this.makeOpenPositionInstructions({poolInfo:t,ownerInfo:Se(M({},n),{tokenAccountA:k,tokenAccountB:T}),tickLower:i,tickUpper:r,liquidity:o,amountSlippageA:f,amountSlippageB:y});return I.add(...m,...P.instructions,...b),{signers:[...l,...P.signers],transaction:I,address:M({},P.address)}})}static makeIncreaseLiquidityTransaction(a){return U(this,arguments,function*({connection:e,poolInfo:t,ownerPosition:n,ownerInfo:i,liquidity:r,slippage:o}){let c=[],u=[],m=[],{amountSlippageA:b,amountSlippageB:l}=Y.getAmountsFromLiquidityWithSlippage(t.sqrtPriceX64,W.getSqrtPriceX64FromTick(n.tickLower),W.getSqrtPriceX64FromTick(n.tickUpper),r,!0,!0,o),f,y;t.mintA.mint.equals(new _e(be.mint))&&i.useSOLBalance?f=yield this._handleTokenAccount({connection:e,side:"in",amount:b,mint:t.mintA.mint,tokenAccount:null,owner:i.wallet,payer:i.feePayer,frontInstructions:c,endInstructions:u,signers:m,bypassAssociatedCheck:!0}):f=this._selectTokenAccount({tokenAccounts:i.tokenAccounts,mint:t.mintA.mint,owner:i.wallet,config:{associatedOnly:!1}}),t.mintB.mint.equals(new _e(be.mint))&&i.useSOLBalance?y=yield this._handleTokenAccount({connection:e,side:"in",amount:l,mint:t.mintB.mint,tokenAccount:null,owner:i.wallet,payer:i.feePayer,frontInstructions:c,endInstructions:u,signers:m,bypassAssociatedCheck:!0}):y=this._selectTokenAccount({tokenAccounts:i.tokenAccounts,mint:t.mintB.mint,owner:i.wallet,config:{associatedOnly:!1}}),fe.assertArgument(!!f||!!y,"cannot found target token accounts","tokenAccounts",i.tokenAccounts);let p=new Be;p.add(Re());let A=this.makeIncreaseLiquidityInstructions({poolInfo:t,ownerPosition:n,ownerInfo:{wallet:i.wallet,tokenAccountA:f,tokenAccountB:y},liquidity:r,amountSlippageA:b,amountSlippageB:l});return p.add(...c,...A.instructions,...u),{signers:[...m,...A.signers],transaction:p,address:M({},A.address)}})}static makeDecreaseLiquidityTransaction(m){return U(this,arguments,function*({connection:e,poolInfo:t,ownerPosition:n,ownerInfo:i,liquidity:r,amountMinA:o,amountMinB:a,slippage:c,associatedOnly:u=!0}){let b=[],l=[],f=[],y,p;if(o!==void 0&&a!==void 0)y=o,p=a;else{let{amountSlippageA:R,amountSlippageB:C}=Y.getAmountsFromLiquidityWithSlippage(t.sqrtPriceX64,W.getSqrtPriceX64FromTick(n.tickLower),W.getSqrtPriceX64FromTick(n.tickUpper),r,!1,!0,c!=null?c:0);y=R,p=C}let A=i.useSOLBalance&&t.mintA.mint.equals(h.WSOL.mint),k=i.useSOLBalance&&t.mintB.mint.equals(h.WSOL.mint),T=yield this._selectOrCreateTokenAccount({mint:t.mintA.mint,tokenAccounts:A?[]:i.tokenAccounts,owner:i.wallet,createInfo:{connection:e,payer:i.feePayer,amount:0,frontInstructions:b,signers:f},associatedOnly:A?!1:u}),I=yield this._selectOrCreateTokenAccount({mint:t.mintB.mint,tokenAccounts:k?[]:i.tokenAccounts,owner:i.wallet,createInfo:{connection:e,payer:i.feePayer,amount:0,frontInstructions:b,signers:f},associatedOnly:k?!1:u}),P=[];for(let R of t.rewardInfos){let C=i.useSOLBalance&&R.tokenMint.equals(h.WSOL.mint),K=yield this._selectOrCreateTokenAccount({mint:R.tokenMint,tokenAccounts:C?[]:i.tokenAccounts,owner:i.wallet,createInfo:{connection:e,payer:i.feePayer,amount:0,frontInstructions:b,endInstructions:C?l:[],signers:f},associatedOnly:C?!1:u});P.push(K)}fe.assertArgument(!!T||!!I,"cannot found target token accounts","tokenAccounts",i.tokenAccounts);let w=new Be;w.add(Re());let D=this.makeDecreaseLiquidityInstructions({poolInfo:t,ownerPosition:n,ownerInfo:{wallet:i.wallet,tokenAccountA:T,tokenAccountB:I,rewardAccounts:P},liquidity:r,amountMinA:y,amountMinB:p});return w.add(...b,...D.instructions,...l),i.closePosition&&w.add(...this.makeClosePositionInstructions({poolInfo:t,ownerInfo:i,ownerPosition:n}).instructions),{signers:[...f,...D.signers],transaction:w,address:M({},D.address)}})}static makeSwapBaseInTransaction(u){return U(this,arguments,function*({connection:e,poolInfo:t,ownerInfo:n,inputMint:i,amountIn:r,amountOutMin:o,priceLimit:a,remainingAccounts:c}){let m=[],b=[],l=[],f;!a||a.equals(new $(0))?f=i.equals(t.mintA.mint)?Ke.add(J):Ve.sub(J):f=W.priceToSqrtPriceX64(a,t.mintA.decimals,t.mintB.decimals);let y=t.mintA.mint.equals(i),p,A;t.mintA.mint.equals(new _e(be.mint))&&n.useSOLBalance?p=yield this._handleTokenAccount({connection:e,side:"in",amount:y?r:0,mint:t.mintA.mint,tokenAccount:null,owner:n.wallet,payer:n.feePayer,frontInstructions:m,endInstructions:b,signers:l,bypassAssociatedCheck:!0}):p=this._selectTokenAccount({tokenAccounts:n.tokenAccounts,mint:t.mintA.mint,owner:n.wallet,config:{associatedOnly:!1}}),t.mintB.mint.equals(new _e(be.mint))&&n.useSOLBalance?A=yield this._handleTokenAccount({connection:e,side:"in",amount:y?0:r,mint:t.mintB.mint,tokenAccount:null,owner:n.wallet,payer:n.feePayer,frontInstructions:m,endInstructions:b,signers:l,bypassAssociatedCheck:!0}):A=this._selectTokenAccount({tokenAccounts:n.tokenAccounts,mint:t.mintB.mint,owner:n.wallet,config:{associatedOnly:!1}}),fe.assertArgument(!!p||!!A,"cannot found target token accounts","tokenAccounts",n.tokenAccounts);let k=new Be;k.add(Re());let T=this.makeSwapBaseInInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccountA:p,tokenAccountB:A},inputMint:i,amountIn:r,amountOutMin:o,sqrtPriceLimitX64:f,remainingAccounts:c});return k.add(...m,...T.instructions,...b),{signers:[...l,...T.signers],transaction:k,address:M({},T.address)}})}static makeCLosePositionTransaction({poolInfo:e,ownerPosition:t,ownerInfo:n}){let i=this.makeClosePositionInstructions({poolInfo:e,ownerInfo:n,ownerPosition:t}),r=new Be;return r.add(...i.instructions),{signers:i.signers,transaction:r,address:M({},i.address)}}static makeInitRewardTransaction(o){return U(this,arguments,function*({connection:e,poolInfo:t,ownerInfo:n,rewardInfo:i,associatedOnly:r=!0}){fe.assertArgument(i.endTime>i.openTime,"reward time error","rewardInfo",i);let a=[],c=[],u=[],m=n.useSOLBalance&&i.mint.equals(h.WSOL.mint),b=yield this._selectOrCreateTokenAccount({mint:i.mint,tokenAccounts:m?[]:n.tokenAccounts,owner:n.wallet,createInfo:m?{connection:e,payer:n.feePayer,amount:new ye(new $(i.perSecond.sub(i.endTime-i.openTime).toFixed(0)).gte(i.perSecond.sub(i.endTime-i.openTime))?i.perSecond.sub(i.endTime-i.openTime).toFixed(0):i.perSecond.sub(i.endTime-i.openTime).add(1).toFixed(0)),frontInstructions:a,endInstructions:c,signers:u}:void 0,associatedOnly:m?!1:r});fe.assertArgument(b,"no money","ownerRewardAccount",n.tokenAccounts);let l=new Be;l.add(Re());let f=this.makeInitRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:b},rewardInfo:{mint:i.mint,openTime:i.openTime,endTime:i.endTime,emissionsPerSecondX64:V.decimalToX64(i.perSecond)}});return l.add(...a,...f.instructions,...c),{signers:[...u,...f.signers],transaction:l,address:M({},f.address)}})}static makeInitRewardsTransaction(o){return U(this,arguments,function*({connection:e,poolInfo:t,ownerInfo:n,rewardInfos:i,associatedOnly:r=!0}){for(let l of i)fe.assertArgument(l.endTime>l.openTime,"reward time error","rewardInfo",l);let a=new Be;a.add(Re());let c=[],u=[],m=[],b=[];for(let l of i){let f=n.useSOLBalance&&l.mint.equals(h.WSOL.mint),y=yield this._selectOrCreateTokenAccount({mint:l.mint,tokenAccounts:f?[]:n.tokenAccounts,owner:n.wallet,createInfo:f?{connection:e,payer:n.feePayer,amount:new ye(new $(l.perSecond.sub(l.endTime-l.openTime).toFixed(0)).gte(l.perSecond.sub(l.endTime-l.openTime))?l.perSecond.sub(l.endTime-l.openTime).toFixed(0):l.perSecond.sub(l.endTime-l.openTime).add(1).toFixed(0)),frontInstructions:c,endInstructions:u,signers:b}:void 0,associatedOnly:f?!1:r});fe.assertArgument(y,"no money","ownerRewardAccount",n.tokenAccounts);let p=this.makeInitRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:y},rewardInfo:{mint:l.mint,openTime:l.openTime,endTime:l.endTime,emissionsPerSecondX64:V.decimalToX64(l.perSecond)}});m.push(...p.instructions)}return a.add(...c,...m,...u),{signers:[...b],transaction:a,address:{}}})}static makeSetRewardTransaction(o){return U(this,arguments,function*({connection:e,poolInfo:t,ownerInfo:n,rewardInfo:i,associatedOnly:r=!0}){fe.assertArgument(i.endTime>i.openTime,"reward time error","rewardInfo",i);let a=[],c=[],u=[],m=n.useSOLBalance&&i.mint.equals(h.WSOL.mint),b=yield this._selectOrCreateTokenAccount({mint:i.mint,tokenAccounts:m?[]:n.tokenAccounts,owner:n.wallet,createInfo:m?{connection:e,payer:n.feePayer,amount:new ye(new $(i.perSecond.sub(i.endTime-i.openTime).toFixed(0)).gte(i.perSecond.sub(i.endTime-i.openTime))?i.perSecond.sub(i.endTime-i.openTime).toFixed(0):i.perSecond.sub(i.endTime-i.openTime).add(1).toFixed(0)),frontInstructions:a,endInstructions:c,signers:u}:void 0,associatedOnly:m?!1:r});fe.assertArgument(b,"no money","ownerRewardAccount",n.tokenAccounts);let l=new Be;l.add(Re());let f=this.makeSetRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:b},rewardInfo:{mint:i.mint,openTime:i.openTime,endTime:i.endTime,emissionsPerSecondX64:V.decimalToX64(i.perSecond)}});return l.add(...a,...f.instructions,...c),{signers:[...u,...f.signers],transaction:l,address:M({},f.address)}})}static makeSetRewardsTransaction(o){return U(this,arguments,function*({connection:e,poolInfo:t,ownerInfo:n,rewardInfos:i,associatedOnly:r=!0}){let a=[],c=[],u=[],m=[],b=new Be;b.add(Re());for(let l of i){fe.assertArgument(l.endTime>l.openTime,"reward time error","rewardInfo",l);let f=n.useSOLBalance&&l.mint.equals(h.WSOL.mint),y=yield this._selectOrCreateTokenAccount({mint:l.mint,tokenAccounts:f?[]:n.tokenAccounts,owner:n.wallet,createInfo:f?{connection:e,payer:n.feePayer,amount:new ye(new $(l.perSecond.sub(l.endTime-l.openTime).toFixed(0)).gte(l.perSecond.sub(l.endTime-l.openTime))?l.perSecond.sub(l.endTime-l.openTime).toFixed(0):l.perSecond.sub(l.endTime-l.openTime).add(1).toFixed(0)),frontInstructions:a,endInstructions:c,signers:m}:void 0,associatedOnly:f?!1:r});fe.assertArgument(y,"no money","ownerRewardAccount",n.tokenAccounts);let p=this.makeSetRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:y},rewardInfo:{mint:l.mint,openTime:l.openTime,endTime:l.endTime,emissionsPerSecondX64:V.decimalToX64(l.perSecond)}});u.push(...p.instructions)}return b.add(...a,...u,...c),{signers:[...m],transaction:b,address:{}}})}static makeCollectRewardTransaction(o){return U(this,arguments,function*({connection:e,poolInfo:t,ownerInfo:n,rewardMint:i,associatedOnly:r=!0}){let a=[],c=[],u=[],m=n.useSOLBalance&&i.equals(h.WSOL.mint),b=yield this._selectOrCreateTokenAccount({mint:i,tokenAccounts:m?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:a,endInstructions:m?c:[],signers:u},associatedOnly:m?!1:r});fe.assertArgument(b,"no money","ownerRewardAccount",n.tokenAccounts);let l=new Be;l.add(Re());let f=this.makeCollectRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:b},rewardMint:i});return l.add(...a,...f.instructions,...c),{signers:[...u,...f.signers],transaction:l,address:M({},f.address)}})}static makeCollectRewardsTransaction(o){return U(this,arguments,function*({connection:e,poolInfo:t,ownerInfo:n,rewardMints:i,associatedOnly:r=!0}){let a=[],c=[],u=[],m=new Be;m.add(Re());let b=[];for(let l of i){let f=n.useSOLBalance&&l.equals(h.WSOL.mint),y=yield this._selectOrCreateTokenAccount({mint:l,tokenAccounts:f?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:a,endInstructions:f?c:[],signers:b},associatedOnly:f?!1:r});fe.assertArgument(y,"no money","ownerRewardAccount",n.tokenAccounts);let p=this.makeCollectRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:y},rewardMint:l});u.push(...p.instructions)}return m.add(...a,...u,...c),{signers:[...b],transaction:m,address:{}}})}static makeHarvestAllRewardTransaction(r){return U(this,arguments,function*({connection:e,fetchPoolInfos:t,ownerInfo:n,associatedOnly:i=!0}){var f,y,p;let o={};for(let A of n.tokenAccounts)i?Ye(n.wallet,A.accountInfo.mint).publicKey.equals(A.pubkey)&&(o[A.accountInfo.mint.toString()]=A.pubkey):o[A.accountInfo.mint.toString()]=A.pubkey;let a=[],c=[],u=[],m=[];for(let A of Object.values(t)){if(A.positionAccount===void 0||!A.positionAccount.find(R=>!R.tokenFeeAmountA.isZero()||!R.tokenFeeAmountB.isZero()||R.rewardInfos.find(C=>!C.pendingReward.isZero())))continue;let k=A.state,T=n.useSOLBalance&&k.mintA.mint.equals(h.WSOL.mint),I=n.useSOLBalance&&k.mintB.mint.equals(h.WSOL.mint),P=(f=o[k.mintA.mint.toString()])!=null?f:yield this._selectOrCreateTokenAccount({mint:k.mintA.mint,tokenAccounts:T?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:a,signers:m},associatedOnly:T?!1:i}),w=(y=o[k.mintB.mint.toString()])!=null?y:yield this._selectOrCreateTokenAccount({mint:k.mintB.mint,tokenAccounts:I?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:a,signers:m},associatedOnly:I?!1:i});o[k.mintA.mint.toString()]=P,o[k.mintB.mint.toString()]=w;let D=[];for(let R of k.rewardInfos){let C=n.useSOLBalance&&R.tokenMint.equals(h.WSOL.mint),K=(p=o[R.tokenMint.toString()])!=null?p:yield this._selectOrCreateTokenAccount({mint:R.tokenMint,tokenAccounts:C?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:a,endInstructions:C?c:[],signers:m},associatedOnly:C?!1:i});o[R.tokenMint.toString()]=K,D.push(K)}for(let R of A.positionAccount)u.push(...this.makeDecreaseLiquidityInstructions({poolInfo:k,ownerPosition:R,ownerInfo:{wallet:n.wallet,tokenAccountA:P,tokenAccountB:w,rewardAccounts:D},liquidity:O,amountMinA:O,amountMinB:O}).instructions)}let b=[...a,...u,...c];return{transactions:mn({instructions:b,signers:m,payer:n.wallet}),address:{}}})}static makeCreatePoolInstructions(c){return U(this,arguments,function*({connection:e,programId:t,owner:n,mintA:i,mintB:r,ammConfigId:o,initialPriceX64:a}){let u=new Si,m=[nr.createAccount({fromPubkey:n,newAccountPubkey:u.publicKey,lamports:yield e.getMinimumBalanceForRentExemption(pn.span),space:pn.span,programId:t})],b=Hn(t,o,i.mint,r.mint).publicKey,l=ln(t,b,i.mint).publicKey,f=ln(t,b,r.mint).publicKey;return m.push(ei(t,b,n,o,u.publicKey,i.mint,l,r.mint,f,a)),{signers:[u],instructions:m,address:{poolId:b,observationId:u.publicKey,mintAVault:l,mintBVault:f}}})}static makeOpenPositionInstructions({poolInfo:e,ownerInfo:t,tickLower:n,tickUpper:i,liquidity:r,amountSlippageA:o,amountSlippageB:a}){let c=[],u=new Si;c.push(u);let m=F.getTickArrayStartIndexByTick(n,e.ammConfig.tickSpacing),b=F.getTickArrayStartIndexByTick(i,e.ammConfig.tickSpacing),{publicKey:l}=me(e.programId,e.id,m),{publicKey:f}=me(e.programId,e.id,b),{publicKey:y}=Ye(t.wallet,u.publicKey),{publicKey:p}=zn(u.publicKey),{publicKey:A}=it(e.programId,u.publicKey),{publicKey:k}=Wt(e.programId,e.id,n,i),T=ti(e.programId,t.feePayer,e.id,t.wallet,u.publicKey,y,p,k,l,f,A,t.tokenAccountA,t.tokenAccountB,e.mintA.vault,e.mintB.vault,n,i,m,b,r,o,a);return{signers:[u],instructions:[T],address:{}}}static makeIncreaseLiquidityInstructions({poolInfo:e,ownerPosition:t,ownerInfo:n,liquidity:i,amountSlippageA:r,amountSlippageB:o}){let a=F.getTickArrayStartIndexByTick(t.tickLower,e.ammConfig.tickSpacing),c=F.getTickArrayStartIndexByTick(t.tickUpper,e.ammConfig.tickSpacing),{publicKey:u}=me(e.programId,e.id,a),{publicKey:m}=me(e.programId,e.id,c),{publicKey:b}=Ye(n.wallet,t.nftMint),{publicKey:l}=it(e.programId,t.nftMint),{publicKey:f}=Wt(e.programId,e.id,t.tickLower,t.tickUpper),y=[];return y.push(ii(e.programId,n.wallet,b,l,e.id,f,u,m,n.tokenAccountA,n.tokenAccountB,e.mintA.vault,e.mintB.vault,i,r,o)),{signers:[],instructions:y,address:{}}}static makeDecreaseLiquidityInstructions({poolInfo:e,ownerPosition:t,ownerInfo:n,liquidity:i,amountMinA:r,amountMinB:o}){let a=F.getTickArrayStartIndexByTick(t.tickLower,e.ammConfig.tickSpacing),c=F.getTickArrayStartIndexByTick(t.tickUpper,e.ammConfig.tickSpacing),{publicKey:u}=me(e.programId,e.id,a),{publicKey:m}=me(e.programId,e.id,c),{publicKey:b}=Ye(n.wallet,t.nftMint),{publicKey:l}=it(e.programId,t.nftMint),{publicKey:f}=Wt(e.programId,e.id,t.tickLower,t.tickUpper),y=[];for(let A=0;A<e.rewardInfos.length;A++)y.push({poolRewardVault:e.rewardInfos[A].tokenVault,ownerRewardVault:n.rewardAccounts[A]});let p=[];return p.push(oi(e.programId,n.wallet,b,l,e.id,f,u,m,n.tokenAccountA,n.tokenAccountB,e.mintA.vault,e.mintB.vault,y,i,r,o)),{signers:[],instructions:p,address:{}}}static makeClosePositionInstructions({poolInfo:e,ownerInfo:t,ownerPosition:n}){let{publicKey:i}=Ye(t.wallet,n.nftMint),{publicKey:r}=it(e.programId,n.nftMint),o=[];return o.push(ni(e.programId,t.wallet,n.nftMint,i,r)),{signers:[],instructions:o,address:{}}}static makeSwapBaseInInstructions({poolInfo:e,ownerInfo:t,inputMint:n,amountIn:i,amountOutMin:r,sqrtPriceLimitX64:o,remainingAccounts:a}){let c=e.mintA.mint.equals(n),u=[ri(e.programId,t.wallet,e.id,e.ammConfig.id,c?t.tokenAccountA:t.tokenAccountB,c?t.tokenAccountB:t.tokenAccountA,c?e.mintA.vault:e.mintB.vault,c?e.mintB.vault:e.mintA.vault,a,e.observationId,i,r,o,!0)];return{signers:[],instructions:u,address:{}}}static makeInitRewardInstructions({poolInfo:e,ownerInfo:t,rewardInfo:n}){let i=Qn(e.programId,e.id,n.mint).publicKey,r=Gt(e.programId).publicKey,o=[si(e.programId,t.wallet,e.id,r,e.ammConfig.id,t.tokenAccount,n.mint,i,n.openTime,n.endTime,n.emissionsPerSecondX64)];return{signers:[],instructions:o,address:{}}}static makeSetRewardInstructions({poolInfo:e,ownerInfo:t,rewardInfo:n}){let i,r;for(let c=0;c<e.rewardInfos.length;c++)e.rewardInfos[c].tokenMint.equals(n.mint)&&(i=c,r=e.rewardInfos[c].tokenVault);fe.assertArgument(i!==void 0&&r!==void 0,"reward mint check error","no reward mint",e.rewardInfos);let o=Gt(e.programId).publicKey,a=[ai(e.programId,t.wallet,e.id,o,e.ammConfig.id,t.tokenAccount,r,i,n.openTime,n.endTime,n.emissionsPerSecondX64)];return{signers:[],instructions:a,address:{}}}static makeCollectRewardInstructions({poolInfo:e,ownerInfo:t,rewardMint:n}){let i,r;for(let a=0;a<e.rewardInfos.length;a++)e.rewardInfos[a].tokenMint.equals(n)&&(i=a,r=e.rewardInfos[a].tokenVault);fe.assertArgument(i!==void 0&&r!==void 0,"reward mint check error","no reward mint",e.rewardInfos);let o=[ci(e.programId,t.wallet,e.id,t.tokenAccount,r,i)];return{signers:[],instructions:o,address:{}}}static getLiquidityAmountOutFromAmountIn({poolInfo:e,inputA:t,tickLower:n,tickUpper:i,amount:r,slippage:o,add:a}){let c=e.sqrtPriceX64,u=W.getSqrtPriceX64FromTick(n),m=W.getSqrtPriceX64FromTick(i),b=a?1-o:1+o,l=r.mul(new ye(Math.floor(b*1e6))).div(new ye(1e6)),f;if(c.lte(u))f=t?Y.getLiquidityFromTokenAmountA(u,m,l,!a):new ye(0);else if(c.lte(m)){let A=Y.getLiquidityFromTokenAmountA(c,m,l,!a),k=Y.getLiquidityFromTokenAmountB(u,c,l);f=t?A:k}else f=t?new ye(0):Y.getLiquidityFromTokenAmountB(u,m,l);let y=Y.getAmountsFromLiquidityWithSlippage(e.sqrtPriceX64,u,m,f,a,!a,o),p=Y.getAmountsFromLiquidity(e.sqrtPriceX64,u,m,f,!a);return M(M({liquidity:f},y),p)}static getAmountsFromLiquidity({poolInfo:e,ownerPosition:t,liquidity:n,slippage:i,add:r}){let o=W.getSqrtPriceX64FromTick(t.tickLower),a=W.getSqrtPriceX64FromTick(t.tickUpper);return Y.getAmountsFromLiquidityWithSlippage(e.sqrtPriceX64,o,a,n,r,r,i)}static getPriceAndTick({poolInfo:e,price:t,baseIn:n}){let i=n?t:new $(1).div(t),r=rt.getTickWithPriceAndTickspacing(i,e.ammConfig.tickSpacing,e.mintA.decimals,e.mintB.decimals),o=W.getSqrtPriceX64FromTick(r),a=W.sqrtPriceX64ToPrice(o,e.mintA.decimals,e.mintB.decimals);return n?{tick:r,price:a}:{tick:r,price:new $(1).div(a)}}static getTickPrice({poolInfo:e,tick:t,baseIn:n}){let i=W.getSqrtPriceX64FromTick(t),r=W.sqrtPriceX64ToPrice(i,e.mintA.decimals,e.mintB.decimals);return n?{tick:t,price:r,tickSqrtPriceX64:i}:{tick:t,price:new $(1).div(r),tickSqrtPriceX64:i}}static computeAmountOutFormat({poolInfo:e,tickArrayCache:t,amountIn:n,currencyOut:i,slippage:r}){let o=n instanceof q,a=(o?n.token:h.WSOL).mint,c=n.raw,u=r.numerator.toNumber()/r.denominator.toNumber(),{amountOut:m,minAmountOut:b,currentPrice:l,executionPrice:f,priceImpact:y,fee:p,remainingAccounts:A}=ve.computeAmountOut({poolInfo:e,tickArrayCache:t,baseMint:a,amountIn:c,slippage:u}),k=i instanceof h?new q(i,m):new ae(i,m),T=i instanceof h?new q(i,b):new ae(i,b),I=new ie(o?n.token:n.currency,new ye(10).pow(new ye(20+(o?n.token:n.currency).decimals)),i instanceof h?i:h.WSOL,l.mul(new $(jt(10,20+(i instanceof h?i:h.WSOL).decimals))).toFixed(0)),P=new ie(o?n.token:n.currency,new ye(10).pow(new ye(20+(o?n.token:n.currency).decimals)),i instanceof h?i:h.WSOL,f.mul(new $(jt(10,20+(i instanceof h?i:h.WSOL).decimals))).toFixed(0)),w=o?new q(n.token,p):new ae(n.currency,p);return{amountOut:k,minAmountOut:T,currentPrice:I,executionPrice:P,priceImpact:y,fee:w,remainingAccounts:A}}static computeAmountOut({poolInfo:e,tickArrayCache:t,baseMint:n,amountIn:i,slippage:r,priceLimit:o=new $(0)}){let a;o.equals(new $(0))?a=n.equals(e.mintA.mint)?Ke.add(J):Ve.sub(J):a=W.priceToSqrtPriceX64(o,e.mintA.decimals,e.mintB.decimals);let{expectedAmountOut:c,remainingAccounts:u,executionPrice:m,feeAmount:b}=wt.getOutputAmountAndRemainAccounts(e,t,n,i,a),l=W.sqrtPriceX64ToPrice(m,e.mintA.decimals,e.mintB.decimals),f=n.equals(e.mintA.mint)?l:new $(1).div(l),y=c.mul(new ye(Math.floor((1-r)*1e10))).div(new ye(1e10)),p=e.mintA.mint.equals(n)?e.currentPrice:new $(1).div(e.currentPrice),A=new Pe(parseInt(String(Math.abs(parseFloat(f.toFixed())-parseFloat(p.toFixed()))*1e9)),parseInt(String(parseFloat(p.toFixed())*1e9)));return{amountOut:c,minAmountOut:y,currentPrice:e.currentPrice,executionPrice:f,priceImpact:A,fee:b,remainingAccounts:u}}static estimateAprsForPriceRangeMultiplier({poolInfo:e,aprType:t,positionTickLowerIndex:n,positionTickUpperIndex:i}){let r=e[t],o=this.getTickPrice({poolInfo:e,tick:n,baseIn:!0}).price.toNumber(),a=this.getTickPrice({poolInfo:e,tick:i,baseIn:!0}).price.toNumber(),c=Math.max(o,r.priceMin),m=Math.min(a,r.priceMax)-c,b=a-o,l=r.priceMax-r.priceMin,f;return m<=0?f=0:b===m?f=l/m:l===m?f=m/b:f=m/l*(m/b),{feeApr:r.feeApr*f,rewardsApr:[r.rewardApr.A*f,r.rewardApr.B*f,r.rewardApr.C*f],apr:r.apr*f}}static estimateAprsForPriceRangeDelta({poolInfo:e,aprType:t,mintPrice:n,rewardMintDecimals:i,liquidity:r,positionTickLowerIndex:o,positionTickUpperIndex:a,chainTime:c}){let u=t==="day"?1:t==="week"?7:t==="month"?30:0,m=e[t],b=n[e.mintA.mint.toString()],l=n[e.mintB.mint.toString()],f=e.mintA.decimals,y=e.mintB.decimals;if(!m||!b||!l)return{feeApr:0,rewardsApr:[0,0,0],apr:0};let p=W.getSqrtPriceX64FromTick(o),A=W.getSqrtPriceX64FromTick(a),{amountSlippageA:k,amountSlippageB:T}=Y.getAmountsFromLiquidityWithSlippage(e.sqrtPriceX64,p,A,e.liquidity,!1,!1,0),{amountSlippageA:I,amountSlippageB:P}=Y.getAmountsFromLiquidityWithSlippage(e.sqrtPriceX64,p,A,r,!1,!1,0),w=new $(k.toString()).div(new $(10).pow(f)).mul(b.toFixed(f)).add(new $(T.toString()).div(new $(10).pow(y)).mul(l.toFixed(y))),D=new $(I.toString()).div(new $(10).pow(f)).mul(b.toFixed(f)).add(new $(P.toString()).div(new $(10).pow(y)).mul(l.toFixed(y))),R=D.div(w.add(D)).div(D),K=new $(m.volumeFee).mul(365).div(u).mul(R).mul(100).toNumber(),Q=3600*24*365,Z=e.rewardInfos.map(G=>{let te=i[G.tokenMint.toString()],oe=n[G.tokenMint.toString()];return c<G.openTime.toNumber()||c>G.endTime.toNumber()||G.perSecond.equals(0)||!oe||te===void 0?0:new $(oe.toFixed(te)).mul(G.perSecond.mul(Q)).div(new $(10).pow(te)).mul(R).mul(100).toNumber()});return{feeApr:K,rewardsApr:Z,apr:K+Z.reduce((G,te)=>G+te,0)}}static fetchMultiplePoolInfos(o){return U(this,arguments,function*({connection:e,poolKeys:t,ownerInfo:n,chainTime:i,batchRequest:r=!1}){var b;let a=yield Ce(e,t.map(l=>new _e(l.id)),{batchRequest:r}),c=[],u={},m=[];for(let l=0;l<t.length;l++){let f=t[l],y=a[l];if(y===null)continue;let p=Jn.decode(y.data);u[f.id]={state:{id:new _e(f.id),mintA:{mint:p.mintA,vault:p.vaultA,decimals:p.mintDecimalsA},mintB:{mint:p.mintB,vault:p.vaultB,decimals:p.mintDecimalsB},observationId:p.observationId,ammConfig:Se(M({},f.ammConfig),{id:new _e(f.ammConfig.id)}),creator:p.creator,programId:y.owner,version:6,tickSpacing:p.tickSpacing,liquidity:p.liquidity,sqrtPriceX64:p.sqrtPriceX64,currentPrice:W.sqrtPriceX64ToPrice(p.sqrtPriceX64,p.mintDecimalsA,p.mintDecimalsB),tickCurrent:p.tickCurrent,observationIndex:p.observationIndex,observationUpdateDuration:p.observationUpdateDuration,feeGrowthGlobalX64A:p.feeGrowthGlobalX64A,feeGrowthGlobalX64B:p.feeGrowthGlobalX64B,protocolFeesTokenA:p.protocolFeesTokenA,protocolFeesTokenB:p.protocolFeesTokenB,swapInAmountTokenA:p.swapInAmountTokenA,swapOutAmountTokenB:p.swapOutAmountTokenB,swapInAmountTokenB:p.swapInAmountTokenB,swapOutAmountTokenA:p.swapOutAmountTokenA,tickArrayBitmap:p.tickArrayBitmap,rewardInfos:wt.updatePoolRewardInfos({chainTime:i,poolLiquidity:p.liquidity,rewardInfos:p.rewardInfos.filter(A=>!A.tokenMint.equals(_e.default))}),day:f.day,week:f.week,month:f.month,tvl:f.tvl}},n&&m.push(...u[f.id].state.rewardInfos.filter(A=>A.creator.equals(n.wallet))),c.find(A=>A.equals(y.owner))||c.push(y.owner)}if(n){let l=n.tokenAccounts.map(I=>I.accountInfo.mint),f=[];for(let I of l)for(let P of c)f.push(it(P,I).publicKey);let y=yield Ce(e,f,{batchRequest:r}),p={};for(let I of y){if(I===null)continue;let P=jn.decode(I.data),w=P.poolId.toString(),D=u[w];if(D===void 0)continue;let R=D.state,C=this.getTickPrice({poolInfo:R,tick:P.tickLower,baseIn:!0}),K=this.getTickPrice({poolInfo:R,tick:P.tickUpper,baseIn:!0}),{amountA:Q,amountB:Z}=Y.getAmountsFromLiquidity(R.sqrtPriceX64,C.tickSqrtPriceX64,K.tickSqrtPriceX64,P.liquidity,!1),G=1/(1-Math.sqrt(Math.sqrt(C.price.div(K.price).toNumber())));u[w].positionAccount=[...(b=u[w].positionAccount)!=null?b:[],{poolId:P.poolId,nftMint:P.nftMint,priceLower:C.price,priceUpper:K.price,amountA:Q,amountB:Z,tickLower:P.tickLower,tickUpper:P.tickUpper,liquidity:P.liquidity,feeGrowthInsideLastX64A:P.feeGrowthInsideLastX64A,feeGrowthInsideLastX64B:P.feeGrowthInsideLastX64B,tokenFeesOwedA:P.tokenFeesOwedA,tokenFeesOwedB:P.tokenFeesOwedB,rewardInfos:P.rewardInfos.map(ne=>Se(M({},ne),{pendingReward:new ye(0)})),leverage:G,tokenFeeAmountA:new ye(0),tokenFeeAmountB:new ye(0)}];let te=F.getTickArrayAddressByTick(u[w].state.programId,P.poolId,P.tickLower,u[w].state.tickSpacing),oe=F.getTickArrayAddressByTick(u[w].state.programId,P.poolId,P.tickUpper,u[w].state.tickSpacing);p[`${u[w].state.programId.toString()}-${P.poolId.toString()}-${P.tickLower}`]=te,p[`${u[w].state.programId.toString()}-${P.poolId.toString()}-${P.tickUpper}`]=oe}let A=Object.values(p),k=yield Ce(e,A,{batchRequest:r}),T={};for(let I=0;I<A.length;I++){let P=k[I];if(P===null)continue;let w=A[I].toString();T[w]=St.decode(P.data)}for(let{state:I,positionAccount:P}of Object.values(u))if(!!P)for(let w of P){let D=`${I.programId.toString()}-${I.id.toString()}-${w.tickLower}`,R=`${I.programId.toString()}-${I.id.toString()}-${w.tickUpper}`,C=T[p[D].toString()],K=T[p[R].toString()],Q=C.ticks[F.getTickOffsetInArray(w.tickLower,I.tickSpacing)],Z=K.ticks[F.getTickOffsetInArray(w.tickUpper,I.tickSpacing)],{tokenFeeAmountA:G,tokenFeeAmountB:te}=It.GetPositionFees(I,w,Q,Z),oe=It.GetPositionRewards(I,w,Q,Z);w.tokenFeeAmountA=G.gte(O)?G:O,w.tokenFeeAmountB=te.gte(O)?te:O;for(let ne=0;ne<oe.length;ne++)w.rewardInfos[ne].pendingReward=oe[ne].gte(O)?oe[ne]:O}}if(m.length>0){let l=m.map(p=>p.tokenVault),f=yield Ce(e,l,{batchRequest:r}),y={};for(let p=0;p<l.length;p++){let A=l[p].toString(),k=f[p];if(k===null)continue;let T=gt.decode(k.data);y[A]=T.amount}for(let p of m){let A=y[p.tokenVault.toString()];p.remainingRewards=A!==void 0?A.sub(p.rewardTotalEmissioned):O}}return u})}static fetchMultiplePoolTickArrays(i){return U(this,arguments,function*({connection:e,poolKeys:t,batchRequest:n}){let r={},o=[];for(let u of t){let m=F.mergeTickArrayBitmap(u.tickArrayBitmap),b=F.getTickArrayStartIndexByTick(u.tickCurrent,u.tickSpacing),l=F.getInitializedTickArrayInRange(m,u.tickSpacing,b,Math.floor(yn/2));for(let f of l){let{publicKey:y}=me(u.programId,u.id,f);o.push({pubkey:y}),r[y.toString()]=u.id}}let a=yield Yn(e,o,{batchRequest:n}),c={};for(let u of a){if(!u.accountInfo)continue;let m=r[u.pubkey.toString()];if(!m)continue;c[m]===void 0&&(c[m]={});let b=St.decode(u.accountInfo.data);c[m][b.startTickIndex]=Se(M({},b),{address:u.pubkey})}return c})}static getWhiteListMint(n){return U(this,arguments,function*({connection:e,programId:t}){let i=yield e.getAccountInfo(Gt(t).publicKey);return i?$n.decode(i.data).whitelistMints.filter(o=>!o.equals(_e.default)):[]})}};import{PublicKey as gi}from"@solana/web3.js";var ki="675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8",ir=new gi(ki),Pi="5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h",or=new gi(Pi),Ti={[ki]:4,[Pi]:5},wi={4:ir,5:or},Ii={4:3,5:3};var rr=N([S("status"),S("nonce"),S("maxOrder"),S("depth"),S("baseDecimal"),S("quoteDecimal"),S("state"),S("resetFlag"),S("minSize"),S("volMaxCutRatio"),S("amountWaveRatio"),S("baseLotSize"),S("quoteLotSize"),S("minPriceMultiplier"),S("maxPriceMultiplier"),S("systemDecimalValue"),S("minSeparateNumerator"),S("minSeparateDenominator"),S("tradeFeeNumerator"),S("tradeFeeDenominator"),S("pnlNumerator"),S("pnlDenominator"),S("swapFeeNumerator"),S("swapFeeDenominator"),S("baseNeedTakePnl"),S("quoteNeedTakePnl"),S("quoteTotalPnl"),S("baseTotalPnl"),E("quoteTotalDeposited"),E("baseTotalDeposited"),E("swapBaseInAmount"),E("swapQuoteOutAmount"),S("swapBase2QuoteFee"),E("swapQuoteInAmount"),E("swapBaseOutAmount"),S("swapQuote2BaseFee"),B("baseVault"),B("quoteVault"),B("baseMint"),B("quoteMint"),B("lpMint"),B("openOrders"),B("marketId"),B("marketProgramId"),B("targetOrders"),B("withdrawQueue"),B("lpVault"),B("owner"),S("lpReserve"),ee(S(),3,"padding")]),sr=N([S("accountType"),S("status"),S("nonce"),S("maxOrder"),S("depth"),S("baseDecimal"),S("quoteDecimal"),S("state"),S("resetFlag"),S("minSize"),S("volMaxCutRatio"),S("amountWaveRatio"),S("baseLotSize"),S("quoteLotSize"),S("minPriceMultiplier"),S("maxPriceMultiplier"),S("systemDecimalsValue"),S("abortTradeFactor"),S("priceTickMultiplier"),S("priceTick"),S("minSeparateNumerator"),S("minSeparateDenominator"),S("tradeFeeNumerator"),S("tradeFeeDenominator"),S("pnlNumerator"),S("pnlDenominator"),S("swapFeeNumerator"),S("swapFeeDenominator"),S("baseNeedTakePnl"),S("quoteNeedTakePnl"),S("quoteTotalPnl"),S("baseTotalPnl"),S("poolOpenTime"),S("punishPcAmount"),S("punishCoinAmount"),S("orderbookToInitTime"),E("swapBaseInAmount"),E("swapQuoteOutAmount"),E("swapQuoteInAmount"),E("swapBaseOutAmount"),S("swapQuote2BaseFee"),S("swapBase2QuoteFee"),B("baseVault"),B("quoteVault"),B("baseMint"),B("quoteMint"),B("lpMint"),B("modelDataAccount"),B("openOrders"),B("marketId"),B("marketProgramId"),B("targetOrders"),B("owner"),ee(S(),64,"padding")]),An={4:rr,5:sr};import{ComputeBudgetProgram as Tr,PublicKey as Ei,Transaction as Lt,TransactionInstruction as Je}from"@solana/web3.js";import ke from"bn.js";import{PublicKey as ar}from"@solana/web3.js";var Li="9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",cr=new ar(Li),xi={[Li]:3},hi={3:cr};var ur=N([ge(5),ge(8),B("ownAddress"),S("vaultSignerNonce"),B("baseMint"),B("quoteMint"),B("baseVault"),S("baseDepositsTotal"),S("baseFeesAccrued"),B("quoteVault"),S("quoteDepositsTotal"),S("quoteFeesAccrued"),S("quoteDustThreshold"),B("requestQueue"),B("eventQueue"),B("bids"),B("asks"),S("baseLotSize"),S("quoteLotSize"),S("feeRateBps"),S("referrerRebatesAccrued"),ge(7)]),Ri={3:ur};import{PublicKey as mr}from"@solana/web3.js";var Qt=H.from("Serum"),ct=class{static getProgramId(e){let t=hi[e];return Qt.assertArgument(!!t,"invalid version","version",e),t}static getVersion(e){let t=e.toBase58(),n=xi[t];return Qt.assertArgument(!!n,"invalid program id","programId",t),n}static getStateLayout(e){let t=Ri[e];return Qt.assertArgument(!!t,"invalid version","version",e),t}static getLayouts(e){return{state:this.getStateLayout(e)}}static getAssociatedAuthority({programId:e,marketId:t}){let n=[t.toBuffer()],i=0,r;for(;i<100;){try{let o=n.concat(Buffer.from([i]),Buffer.alloc(7));r=mr.createProgramAddressSync(o,e)}catch(o){if(o instanceof TypeError)throw o;i++;continue}return{publicKey:r,nonce:i}}return Qt.throwArgumentError("unable to find a viable program address nonce","params",{programId:e,marketId:t})}};import{PublicKey as lr}from"@solana/web3.js";var Fe=new lr("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Ze=5e4,dr=N([S("x"),S("y"),S("price")]),pr=N([S("accountType"),S("status"),S("multiplier"),S("validDataCount"),ee(dr,Ze,"DataElement")]);function br(d,e){return[0,Ze-2]}function yr(d){return[0,Ze-2]}function fr(d){return[0,Ze-2]}function Ar(d,e,t){let[n,i]=br(e,t),r=n,o=i,a=0,c=e*d.multiplier/t;for(;r<=o;){if(a=Math.floor((o+r)/2),a===0||a>=Ze-2)return[a,a,!1];let u=d.DataElement[a].x*d.multiplier/d.DataElement[a].y,m=d.DataElement[a-1].x*d.multiplier/d.DataElement[a-1].y,b=d.DataElement[a+1].x*d.multiplier/d.DataElement[a+1].y;if(c===u)return[a,a,!0];if(c===m)return[a-1,a-1,!0];if(c===b)return[a+1,a+1,!0];if(c<m)o=a-1;else{if(c>m&&c<u)return[a-1,a,!0];if(c>u&&c<b)return[a,a+1,!0];r=a+1}}return[a,a,!1]}function Sn(d,e,t){let[n,i,r]=Ar(d,e,t);if(!r)return 0;if(n===i){let o=d.DataElement[n].x;return e*d.multiplier/o}else{let o=d.DataElement[n].x,a=d.DataElement[n].y,c=d.DataElement[i].x,u=d.DataElement[i].y,m=t*(c*a-o*u),b=o*m,l=(c-o)*(e*a-o*t)*u,f=b+l;return e*d.multiplier*m/f}}function ze(d,e,t){return e*d.multiplier/t}function Bi(d,e,t){return e*t/d.multiplier}function Sr(d,e){let[t,n]=yr(e),i=t,r=n,o=0,a=e;for(;i<r;){if(o=Math.floor((r+i)/2),o<=0||o>Ze-2)return[o,o,!1];let c=d.DataElement[o].x,u=d.DataElement[o-1].x,m=d.DataElement[o+1].x;if(a===c)return[o,o,!0];if(a===u)return[o-1,o-1,!0];if(a===m)return[o+1,o+1,!0];if(a<u)r=o-1;else{if(a>u&&a<c)return[o-1,o,!0];if(a>c&&a<m)return[o,o+1,!0];i=o+1}}return[o,o,!1]}function gr(d,e){let[t,n]=fr(e),i=t,r=n,o=0,a=e;for(;i<=r;){if(o=Math.floor((r+i)/2),o<=0||o>=Ze-2)return[o,o,!1];let c=d.DataElement[o].y,u=d.DataElement[o-1].y,m=d.DataElement[o+1].y;if(a===c)return[o,o,!0];if(a===u)return[o-1,o-1,!0];if(a===m)return[o+1,o+1,!0];if(a<m)i=o+1;else{if(a<u&&a>c)return[o-1,o,!0];if(a<c&&a>m)return[o,o+1,!0];r=o-1}}return[o,o,!1]}function Ci(d,e,t,n){let i=n?e+t:e-t,[r,o,a]=Sr(d,i);if(!a)return[0,0,!1,a];if(r===o)return[d.DataElement[o].price,d.DataElement[o].y,!1,a];{let c=d.DataElement[r].x,u=d.DataElement[o].x,m=d.DataElement[r].price,b=d.DataElement[o].price,l=d.DataElement[r].y,f=d.DataElement[o].y;if(e>=c&&e<=u)return n?[b,f,!0,a]:[m,l,!0,a];{let y,p;return n?(y=m+(b-m)*(e-c)/(u-c),p=l-(i-c)*d.multiplier/b):(y=m+(b-m)*(e-c)/(u-c),p=f+(u-i)*d.multiplier/m),[y,p,!1,a]}}}function kr(d,e,t,n){let i=n?e-t:e+t,[r,o,a]=gr(d,i);if(!a)return[0,0,!1,a];if(r===o)return[d.DataElement[o].price,d.DataElement[o].x,!1,a];{let c=d.DataElement[r].x,u=d.DataElement[o].x,m=d.DataElement[r].price,b=d.DataElement[o].price,l=d.DataElement[r].y,f=d.DataElement[o].y;if(e>=f&&e<=l)return n?[b,u,!0,a]:[m,c,!0,a];{let y,p;return n?(y=m+(b-m)*(l-e)/(l-f),p=c+b*(l-i)/d.multiplier):(y=m+(b-m)*(l-e)/(l-f),p=u-m*(i-f)/d.multiplier),[y,p,!1,a]}}}function Pr(d,e){let t=Ci(d,e,0,!1);return t[3]?t[0]:0}function Di(d,e,t,n){let i=Sn(d,e,t),r=ze(d,e,i),o=ze(d,t,i),a=ze(d,n,i),c=!0,[u,m,b,l]=Ci(d,r,a,c);if(!l)return 0;if(b)return n*d.multiplier/u;{let f=o-m;return Bi(d,f,i)}}function Ni(d,e,t,n){let i=Sn(d,e,t),r=ze(d,e,i),o=ze(d,t,i),a=ze(d,n,i),c=!1,[u,m,b,l]=kr(d,o,a,c);if(!l)return 0;if(b)return n*u/d.multiplier;{let f=r-m;return Bi(d,f,i)}}function Oi(d){let e=pr.decode(d);return{accountType:e.accountType.toNumber(),status:e.status.toNumber(),multiplier:e.multiplier.toNumber(),validDataCount:e.validDataCount.toNumber(),DataElement:e.DataElement.map(t=>({x:t.x.toNumber(),y:t.y.toNumber(),price:t.price.toNumber()}))}}function Ui(d,e,t,n){let i=Pr(d,ze(d,e,Sn(d,e,t)))/d.multiplier;return n?i:1/i}var x=H.from("Liquidity"),xt={accountType:0,status:0,multiplier:0,validDataCount:0,DataElement:[]};function kn(d){return U(this,null,function*(){if(xt.validDataCount===0&&d){let e=yield d.getAccountInfo(Fe);e&&(xt=Oi(e==null?void 0:e.data))}})}var Mi=new ke(25),gn=new ke(1e4),ut=class extends Ne{static getProgramId(e){let t=wi[e];return x.assertArgument(!!t,"invalid version","version",e),t}static getVersion(e){let t=e.toBase58(),n=Ti[t];return x.assertArgument(!!n,"invalid program id","programId",t),n}static getSerumVersion(e){let t=Ii[e];return x.assertArgument(!!t,"invalid version","version",e),t}static getStateLayout(e){let t=An[e];return x.assertArgument(!!t,"invalid version","version",e),t}static getLayouts(e){return{state:this.getStateLayout(e)}}static getAssociatedId({programId:e,marketId:t}){let{publicKey:n}=re([e.toBuffer(),t.toBuffer(),Buffer.from("amm_associated_seed","utf-8")],e);return n}static getAssociatedAuthority({programId:e}){return re([Buffer.from([97,109,109,32,97,117,116,104,111,114,105,116,121])],e)}static getAssociatedBaseVault({programId:e,marketId:t}){let{publicKey:n}=re([e.toBuffer(),t.toBuffer(),Buffer.from("coin_vault_associated_seed","utf-8")],e);return n}static getAssociatedQuoteVault({programId:e,marketId:t}){let{publicKey:n}=re([e.toBuffer(),t.toBuffer(),Buffer.from("pc_vault_associated_seed","utf-8")],e);return n}static getAssociatedLpMint({programId:e,marketId:t}){let{publicKey:n}=re([e.toBuffer(),t.toBuffer(),Buffer.from("lp_mint_associated_seed","utf-8")],e);return n}static getAssociatedLpVault({programId:e,marketId:t}){let{publicKey:n}=re([e.toBuffer(),t.toBuffer(),Buffer.from("temp_lp_token_associated_seed","utf-8")],e);return n}static getAssociatedTargetOrders({programId:e,marketId:t}){let{publicKey:n}=re([e.toBuffer(),t.toBuffer(),Buffer.from("target_associated_seed","utf-8")],e);return n}static getAssociatedWithdrawQueue({programId:e,marketId:t}){let{publicKey:n}=re([e.toBuffer(),t.toBuffer(),Buffer.from("withdraw_associated_seed","utf-8")],e);return n}static getAssociatedOpenOrders({programId:e,marketId:t}){let{publicKey:n}=re([e.toBuffer(),t.toBuffer(),Buffer.from("open_order_associated_seed","utf-8")],e);return n}static getAssociatedPoolKeys({version:e,marketVersion:t,marketId:n,baseMint:i,quoteMint:r,baseDecimals:o,quoteDecimals:a,programId:c,marketProgramId:u}){let m=this.getAssociatedId({programId:c,marketId:n}),b=this.getAssociatedLpMint({programId:c,marketId:n}),{publicKey:l,nonce:f}=this.getAssociatedAuthority({programId:c}),y=this.getAssociatedBaseVault({programId:c,marketId:n}),p=this.getAssociatedQuoteVault({programId:c,marketId:n}),A=this.getAssociatedLpVault({programId:c,marketId:n}),k=this.getAssociatedOpenOrders({programId:c,marketId:n}),T=this.getAssociatedTargetOrders({programId:c,marketId:n}),I=this.getAssociatedWithdrawQueue({programId:c,marketId:n}),{publicKey:P}=ct.getAssociatedAuthority({programId:u,marketId:n});return{id:m,baseMint:i,quoteMint:r,lpMint:b,baseDecimals:o,quoteDecimals:a,lpDecimals:o,version:e,programId:c,authority:l,nonce:f,baseVault:y,quoteVault:p,lpVault:A,openOrders:k,targetOrders:T,withdrawQueue:I,marketVersion:t,marketProgramId:u,marketId:n,marketAuthority:P}}static makeAddLiquidityInstruction(e){let{poolKeys:t,userKeys:n,baseAmountIn:i,quoteAmountIn:r,fixedSide:o}=e,{version:a}=t;if(a===4||a===5){let c=N([_("instruction"),S("baseAmountIn"),S("quoteAmountIn"),S("fixedSide")]),u=Buffer.alloc(c.span);c.encode({instruction:3,baseAmountIn:X(i),quoteAmountIn:X(r),fixedSide:X(o==="base"?0:1)},u);let m=[L(j,!1),g(t.id,!1),L(t.authority,!1),L(t.openOrders,!1),g(t.targetOrders,!1),g(t.lpMint,!1),g(t.baseVault,!1),g(t.quoteVault,!1)];return a===5&&m.push(g(Fe,!1)),m.push(L(t.marketId,!1),g(n.baseTokenAccount,!1),g(n.quoteTokenAccount,!1),g(n.lpTokenAccount,!1),L(n.owner,!0),L(t.marketEventQueue,!1)),new Je({programId:t.programId,keys:m,data:u})}return x.throwArgumentError("invalid version","poolKeys.version",a)}static makeAddLiquidityTransaction(e){return U(this,null,function*(){let{connection:t,poolKeys:n,userKeys:i,amountInA:r,amountInB:o,fixedSide:a,config:c}=e,{lpMint:u}=n,{tokenAccounts:m,owner:b,payer:l=b}=i;x.debug("amountInA:",r),x.debug("amountInB:",o),x.assertArgument(!r.isZero()&&!o.isZero(),"amounts must greater than zero","amountInA & amountInB",{amountInA:r.toFixed(),amountInB:o.toFixed()});let{bypassAssociatedCheck:f}=M({bypassAssociatedCheck:!1},c),y=r instanceof q?r.token:h.WSOL,p=o instanceof q?o.token:h.WSOL,A=this._selectTokenAccount({tokenAccounts:m,mint:y.mint,owner:b,config:{associatedOnly:!1}}),k=this._selectTokenAccount({tokenAccounts:m,mint:p.mint,owner:b,config:{associatedOnly:!1}});x.assertArgument(!!A||!!k,"cannot found target token accounts","tokenAccounts",m);let T=this._selectTokenAccount({tokenAccounts:m,mint:u,owner:b}),I=[y,p],P=[A,k],w=[r.raw,o.raw],[D]=this._getAmountsSide(r,o,n),R="base";if(D==="quote")if(I.reverse(),P.reverse(),w.reverse(),a==="a")R="quote";else if(a==="b")R="base";else return x.throwArgumentError("invalid fixedSide","fixedSide",a);else if(D==="base")if(a==="a")R="base";else if(a==="b")R="quote";else return x.throwArgumentError("invalid fixedSide","fixedSide",a);else return x.throwArgumentError("invalid fixedSide","fixedSide",a);let[C,K]=I,[Q,Z]=P,[G,te]=w,oe=[],ne=[],xe=[],Bt=yield this._handleTokenAccount({connection:t,side:"in",amount:G,mint:C.mint,tokenAccount:Q,owner:b,payer:l,frontInstructions:oe,endInstructions:ne,signers:xe,bypassAssociatedCheck:f}),Ct=yield this._handleTokenAccount({connection:t,side:"in",amount:te,mint:K.mint,tokenAccount:Z,owner:b,payer:l,frontInstructions:oe,endInstructions:ne,signers:xe,bypassAssociatedCheck:f}),mt=yield this._handleTokenAccount({connection:t,side:"out",amount:0,mint:u,tokenAccount:T,owner:b,payer:l,frontInstructions:oe,endInstructions:ne,signers:xe,bypassAssociatedCheck:f});oe.push(this.makeAddLiquidityInstruction({poolKeys:n,userKeys:{baseTokenAccount:Bt,quoteTokenAccount:Ct,lpTokenAccount:mt,owner:b},baseAmountIn:G,quoteAmountIn:te,fixedSide:R}));let Pn=new Lt;return Pn.add(...oe,...ne),{transaction:Pn,signers:xe}})}static makeRemoveLiquidityInstruction(e){let{poolKeys:t,userKeys:n,amountIn:i}=e,{version:r}=t;if(r===4||r===5){let o=N([_("instruction"),S("amountIn")]),a=Buffer.alloc(o.span);o.encode({instruction:4,amountIn:X(i)},a);let c=[L(j,!1),g(t.id,!1),L(t.authority,!1),g(t.openOrders,!1),g(t.targetOrders,!1),g(t.lpMint,!1),g(t.baseVault,!1),g(t.quoteVault,!1)];return r===5?c.push(g(Fe,!1)):(c.push(g(t.withdrawQueue,!1)),c.push(g(t.lpVault,!1))),c.push(L(t.marketProgramId,!1),g(t.marketId,!1),g(t.marketBaseVault,!1),g(t.marketQuoteVault,!1),L(t.marketAuthority,!1),g(n.lpTokenAccount,!1),g(n.baseTokenAccount,!1),g(n.quoteTokenAccount,!1),L(n.owner,!0),g(t.marketEventQueue,!1),g(t.marketBids,!1),g(t.marketAsks,!1)),new Je({programId:t.programId,keys:c,data:a})}return x.throwArgumentError("invalid version","poolKeys.version",r)}static makeRemoveLiquidityTransaction(e){return U(this,null,function*(){let{connection:t,poolKeys:n,userKeys:i,amountIn:r,config:o}=e,{baseMint:a,quoteMint:c,lpMint:u}=n,{tokenAccounts:m,owner:b,payer:l=b}=i;x.debug("amountIn:",r),x.assertArgument(!r.isZero(),"amount must greater than zero","amountIn",r.toFixed()),x.assertArgument(r instanceof q&&r.token.mint.equals(u),"amountIn's token not match lpMint","amountIn",r);let f=this._selectTokenAccount({tokenAccounts:m,mint:u,owner:b,config:{associatedOnly:!1}});if(!f)return x.throwArgumentError("cannot found lpTokenAccount","tokenAccounts",m);let y=this._selectTokenAccount({tokenAccounts:m,mint:a,owner:b}),p=this._selectTokenAccount({tokenAccounts:m,mint:c,owner:b}),{bypassAssociatedCheck:A}=M({bypassAssociatedCheck:!1},o),k=[],T=[],I=[],P=f,w=yield this._handleTokenAccount({connection:t,side:"out",amount:0,mint:a,tokenAccount:y,owner:b,payer:l,frontInstructions:k,endInstructions:T,signers:I,bypassAssociatedCheck:A}),D=yield this._handleTokenAccount({connection:t,side:"out",amount:0,mint:c,tokenAccount:p,owner:b,payer:l,frontInstructions:k,endInstructions:T,signers:I,bypassAssociatedCheck:A});k.push(Tr.requestUnits({units:4e5,additionalFee:0})),k.push(this.makeRemoveLiquidityInstruction({poolKeys:n,userKeys:{lpTokenAccount:P,baseTokenAccount:w,quoteTokenAccount:D,owner:b},amountIn:r.raw}));let R=new Lt;return R.add(...k,...T),{transaction:R,signers:I}})}static makeSwapInstruction(e){let{poolKeys:t,userKeys:n,amountIn:i,amountOut:r,fixedSide:o}=e,{version:a}=t;return a===4||a===5?o==="in"?this.makeSwapFixedInInstruction({poolKeys:t,userKeys:n,amountIn:i,minAmountOut:r},a):o==="out"?this.makeSwapFixedOutInstruction({poolKeys:t,userKeys:n,maxAmountIn:i,amountOut:r},a):x.throwArgumentError("invalid params","params",e):x.throwArgumentError("invalid version","poolKeys.version",a)}static makeSwapFixedInInstruction({poolKeys:e,userKeys:t,amountIn:n,minAmountOut:i},r){let o=N([_("instruction"),S("amountIn"),S("minAmountOut")]),a=Buffer.alloc(o.span);o.encode({instruction:9,amountIn:X(n),minAmountOut:X(i)},a);let c=[L(j,!1),g(e.id,!1),L(e.authority,!1),g(e.openOrders,!1)];return r===4&&c.push(g(e.targetOrders,!1)),c.push(g(e.baseVault,!1),g(e.quoteVault,!1)),r===5&&c.push(g(Fe,!1)),c.push(L(e.marketProgramId,!1),g(e.marketId,!1),g(e.marketBids,!1),g(e.marketAsks,!1),g(e.marketEventQueue,!1),g(e.marketBaseVault,!1),g(e.marketQuoteVault,!1),L(e.marketAuthority,!1),g(t.tokenAccountIn,!1),g(t.tokenAccountOut,!1),L(t.owner,!0)),new Je({programId:e.programId,keys:c,data:a})}static makeSwapFixedOutInstruction({poolKeys:e,userKeys:t,maxAmountIn:n,amountOut:i},r){let o=N([_("instruction"),S("maxAmountIn"),S("amountOut")]),a=Buffer.alloc(o.span);o.encode({instruction:11,maxAmountIn:X(n),amountOut:X(i)},a);let c=[L(j,!1),g(e.id,!1),L(e.authority,!1),g(e.openOrders,!1),g(e.targetOrders,!1),g(e.baseVault,!1),g(e.quoteVault,!1)];return r===5&&c.push(g(Fe,!1)),c.push(L(e.marketProgramId,!1),g(e.marketId,!1),g(e.marketBids,!1),g(e.marketAsks,!1),g(e.marketEventQueue,!1),g(e.marketBaseVault,!1),g(e.marketQuoteVault,!1),L(e.marketAuthority,!1),g(t.tokenAccountIn,!1),g(t.tokenAccountOut,!1),L(t.owner,!0)),new Je({programId:e.programId,keys:c,data:a})}static makeSwapTransaction(e){return U(this,null,function*(){let{connection:t,poolKeys:n,userKeys:i,amountIn:r,amountOut:o,fixedSide:a,config:c}=e,{tokenAccounts:u,owner:m,payer:b=m}=i;x.debug("amountIn:",r),x.debug("amountOut:",o),x.assertArgument(!r.isZero()&&!o.isZero(),"amounts must greater than zero","currencyAmounts",{amountIn:r.toFixed(),amountOut:o.toFixed()});let{bypassAssociatedCheck:l}=M({bypassAssociatedCheck:!1},c),f=r instanceof q?r.token:h.WSOL,y=o instanceof q?o.token:h.WSOL,p=this._selectTokenAccount({tokenAccounts:u,mint:f.mint,owner:m,config:{associatedOnly:!1}}),A=this._selectTokenAccount({tokenAccounts:u,mint:y.mint,owner:m}),[k,T]=[r.raw,o.raw],I=[],P=[],w=[],D=yield this._handleTokenAccount({connection:t,side:"in",amount:k,mint:f.mint,tokenAccount:p,owner:m,payer:b,frontInstructions:I,endInstructions:P,signers:w,bypassAssociatedCheck:l}),R=yield this._handleTokenAccount({connection:t,side:"out",amount:0,mint:y.mint,tokenAccount:A,owner:m,payer:b,frontInstructions:I,endInstructions:P,signers:w,bypassAssociatedCheck:l});I.push(this.makeSwapInstruction({poolKeys:n,userKeys:{tokenAccountIn:D,tokenAccountOut:R,owner:m},amountIn:k,amountOut:T,fixedSide:a}));let C=new Lt;return C.add(...I,...P),{transaction:C,signers:w}})}static makeCreatePoolInstruction(e){let{poolKeys:t}=e,{version:n}=t;return n===4?this.makeCreatePoolInstructionV4(e):x.throwArgumentError("invalid version","poolKeys.version",n)}static makeCreatePoolInstructionV4({poolKeys:e,userKeys:t}){let n=N([_("instruction"),_("nonce")]),i=Buffer.alloc(n.span);n.encode({instruction:10,nonce:e.nonce},i);let r=[L(j,!1),L(Te,!1),L(yt,!1),g(e.targetOrders,!1),g(e.withdrawQueue,!1),L(e.authority,!1),g(e.lpMint,!1),L(e.baseMint,!1),L(e.quoteMint,!1),g(e.baseVault,!1),g(e.quoteVault,!1),g(e.lpVault,!1),L(e.marketId,!1),g(t.payer,!0)];return new Je({programId:e.programId,keys:r,data:i})}static makeCreatePoolTransaction(e){let t=new Lt,n=[];return t.add(this.makeCreatePoolInstruction(e)),{transaction:t,signers:n}}static makeInitPoolInstruction(e){let{poolKeys:t}=e,{version:n}=t;return n===4?this.makeInitPoolInstructionV4(e):x.throwArgumentError("invalid version","poolKeys.version",n)}static makeInitPoolInstructionV4({poolKeys:e,userKeys:t,startTime:n}){let i=N([_("instruction"),_("nonce"),S("startTime")]),r=Buffer.alloc(i.span);i.encode({instruction:0,nonce:e.nonce,startTime:X(n)},r);let o=[L(j,!1),L(Te,!1),L(yt,!1),g(e.id,!1),L(e.authority,!1),g(e.openOrders,!1),g(e.lpMint,!1),L(e.baseMint,!1),L(e.quoteMint,!1),L(e.baseVault,!1),L(e.quoteVault,!1),g(e.withdrawQueue,!1),g(e.targetOrders,!1),g(t.lpTokenAccount,!1),L(e.lpVault,!1),L(e.marketProgramId,!1),L(e.marketId,!1),g(t.payer,!0)];return new Je({programId:e.programId,keys:o,data:r})}static makeInitPoolTransaction(e){return U(this,null,function*(){let{connection:t,poolKeys:n,userKeys:i,baseAmount:r,quoteAmount:o,startTime:a=0,config:c}=e,{baseMint:u,quoteMint:m,lpMint:b,baseVault:l,quoteVault:f}=n,{tokenAccounts:y,owner:p,payer:A=p}=i,{bypassAssociatedCheck:k}=M({bypassAssociatedCheck:!1},c),T=this._selectTokenAccount({tokenAccounts:y,mint:u,owner:p,config:{associatedOnly:!1}}),I=this._selectTokenAccount({tokenAccounts:y,mint:m,owner:p,config:{associatedOnly:!1}});x.assertArgument(!!T||!!I,"cannot found target token accounts","tokenAccounts",y);let P=this._selectTokenAccount({tokenAccounts:y,mint:b,owner:p}),w=[],D=[],R=[],C=yield this._handleTokenAccount({connection:t,side:"in",amount:r.raw,mint:u,tokenAccount:T,owner:p,payer:A,frontInstructions:w,endInstructions:D,signers:R,bypassAssociatedCheck:k}),K=yield this._handleTokenAccount({connection:t,side:"in",amount:o.raw,mint:m,tokenAccount:I,owner:p,payer:A,frontInstructions:w,endInstructions:D,signers:R,bypassAssociatedCheck:k}),Q=yield this._handleTokenAccount({connection:t,side:"out",amount:0,mint:b,tokenAccount:P,owner:p,payer:A,frontInstructions:w,endInstructions:D,signers:R,bypassAssociatedCheck:k});w.push(se.makeTransferInstruction({source:C,destination:l,owner:p,amount:r.raw})),w.push(se.makeTransferInstruction({source:K,destination:f,owner:p,amount:o.raw})),w.push(this.makeInitPoolInstruction({poolKeys:n,userKeys:{lpTokenAccount:Q,payer:A},startTime:a}));let Z=new Lt;return Z.add(...w,...D),{transaction:Z,signers:R}})}static makeSimulatePoolInfoInstruction({poolKeys:e}){let t=N([_("instruction"),_("simulateType")]),n=Buffer.alloc(t.span);t.encode({instruction:12,simulateType:0},n);let i=[L(e.id,!1),L(e.authority,!1),L(e.openOrders,!1),L(e.baseVault,!1),L(e.quoteVault,!1),L(e.lpMint,!1),L(e.marketId,!1),L(e.marketEventQueue,!1)];return new Je({programId:e.programId,keys:i,data:n})}static isV4(e){return e.withdrawQueue!==void 0}static fetchAllPoolKeys(e,t){return U(this,null,function*(){let n=Object.keys(An).map(u=>{let m=Number(u),b=this.getSerumVersion(m),l=ct.getProgramId(b);return{version:m,programId:this.getProgramId(m),serumVersion:b,serumProgramId:l,stateLayout:this.getStateLayout(m)}}),i=[];try{i=yield Promise.all(n.map(({programId:u,version:m,serumVersion:b,serumProgramId:l,stateLayout:f})=>e.getProgramAccounts(u,{filters:[{dataSize:f.span}]}).then(y=>y.map(p=>Se(M({},p),{version:m,programId:u,serumVersion:b,serumProgramId:l,stateLayout:f})))))}catch(u){if(u instanceof Error)return x.throwError("failed to fetch all liquidity pools",H.errors.RPC_ERROR,{message:u.message})}let r=i.flat(),o=[];for(let{pubkey:u,account:m,version:b,programId:l,serumVersion:f,serumProgramId:y,stateLayout:p}of r){x.assertArgument(!!m,"empty state account info","pool.id",u);let{data:A}=m;x.assertArgument(A.length===p.span,"invalid state data length","pool.id",u);let k=p.decode(A),{status:T,baseMint:I,quoteMint:P,baseDecimal:w,quoteDecimal:D,lpMint:R,openOrders:C,targetOrders:K,baseVault:Q,quoteVault:Z,marketId:G}=k,te,oe;if(this.isV4(k)?(te=k.withdrawQueue,oe=k.lpVault):(te=Ei.default,oe=Ei.default),T.isZero())continue;let ne=ut.getAssociatedPoolKeys({version:b,marketVersion:f,marketId:G,baseMint:I,baseDecimals:w.toNumber(),quoteMint:P,quoteDecimals:D.toNumber(),programId:l,marketProgramId:y});o.push({id:u,baseMint:I,quoteMint:P,baseDecimals:ne.baseDecimals,quoteDecimals:ne.quoteDecimals,lpDecimals:ne.lpDecimals,lpMint:R,version:b,programId:l,authority:ne.authority,openOrders:C,targetOrders:K,baseVault:Q,quoteVault:Z,withdrawQueue:te,lpVault:oe,marketVersion:f,marketProgramId:y,marketId:G,marketAuthority:ne.marketAuthority})}let a=[];try{a=yield Ce(e,o.map(({marketId:u})=>u),t)}catch(u){if(u instanceof Error)return x.throwError("failed to fetch markets",H.errors.RPC_ERROR,{message:u.message})}x.assertArgument(a.length===o.length,"markets count not equal to pools","markets.length",a.length);let c=[];for(let u in a){let m=o[u],b=a[u],{id:l,marketVersion:f}=m;if(!b)return x.throwArgumentError("empty market account info","pool.id",l);let{data:y}=b,{state:p}=ct.getLayouts(f);x.assertArgument(y.length===p.span,"invalid market data length","pool.id",l);let{baseVault:A,quoteVault:k,bids:T,asks:I,eventQueue:P}=p.decode(y);c.push(Se(M({},m),{marketBaseVault:A,marketQuoteVault:k,marketBids:T,marketAsks:I,marketEventQueue:P}))}return c})}static fetchInfo(n){return U(this,arguments,function*({connection:e,poolKeys:t}){let i=yield this.fetchMultipleInfo({connection:e,pools:[t]});return x.assertArgument(i.length===1,`fetchInfo failed, ${i.length} pools found`,"poolKeys.id",t.id),i[0]})}static fetchMultipleInfo(i){return U(this,arguments,function*({connection:e,pools:t,config:n}){yield kn(e);let r=t.map(c=>this.makeSimulatePoolInfoInstruction({poolKeys:c}));return(yield _t(e,r,"GetPoolData")).map(c=>{let u=vt(c,"GetPoolData"),m=new ke(ue(u,"status")),b=Number(ue(u,"coin_decimals")),l=Number(ue(u,"pc_decimals")),f=Number(ue(u,"lp_decimals")),y=new ke(ue(u,"pool_coin_amount")),p=new ke(ue(u,"pool_pc_amount")),A=new ke(ue(u,"pool_lp_supply")),k="0";try{k=ue(u,"pool_open_time")}catch(T){}return{status:m,baseDecimals:b,quoteDecimals:l,lpDecimals:f,baseReserve:y,quoteReserve:p,lpSupply:A,startTime:new ke(k)}})})}static getEnabledFeatures(e){let{status:t}=e,n=t.toNumber();if(n===0)return{swap:!1,addLiquidity:!1,removeLiquidity:!1};if(n===1)return{swap:!0,addLiquidity:!0,removeLiquidity:!0};if(n===2)return{swap:!1,addLiquidity:!1,removeLiquidity:!1};if(n===3)return{swap:!1,addLiquidity:!1,removeLiquidity:!0};if(n===4)return{swap:!1,addLiquidity:!0,removeLiquidity:!0};if(n===5)return{swap:!1,addLiquidity:!0,removeLiquidity:!0};if(n===6)return{swap:!0,addLiquidity:!0,removeLiquidity:!0};if(n===7){let{startTime:i}=e;return Date.now()/1e3<i.toNumber()?{swap:!1,addLiquidity:!0,removeLiquidity:!0}:{swap:!0,addLiquidity:!0,removeLiquidity:!0}}else return{swap:!1,addLiquidity:!1,removeLiquidity:!1}}static includesToken(e,t){let{baseMint:n,quoteMint:i}=t;return e.mint.equals(n)||e.mint.equals(i)}static _getTokenSide(e,t){let{baseMint:n,quoteMint:i}=t;return e.mint.equals(n)?"base":e.mint.equals(i)?"quote":x.throwArgumentError("token not match with pool","params",{token:e.mint,baseMint:n,quoteMint:i})}static _getTokensSide(e,t,n){let{baseMint:i,quoteMint:r}=n,o=this._getTokenSide(e,n),a=this._getTokenSide(t,n);return x.assertArgument(o!==a,"tokens not match with pool","params",{tokenA:e.mint,tokenB:t.mint,baseMint:i,quoteMint:r}),[o,a]}static _getAmountSide(e,t){let n=e instanceof q?e.token:h.WSOL;return this._getTokenSide(n,t)}static _getAmountsSide(e,t,n){let i=e instanceof q?e.token:h.WSOL,r=t instanceof q?t.token:h.WSOL;return this._getTokensSide(i,r,n)}static computeAnotherAmount({poolKeys:e,poolInfo:t,amount:n,anotherCurrency:i,slippage:r}){let{baseReserve:o,quoteReserve:a}=t;x.debug("baseReserve:",o.toString()),x.debug("quoteReserve:",a.toString());let c=n instanceof q?n.token:n.currency;x.debug("currencyIn:",c),x.debug("amount:",n.toFixed()),x.debug("anotherCurrency:",i),x.debug("slippage:",`${r.toSignificant()}%`);let u=this._getAmountSide(n,e);x.debug("input side:",u);let m=O;n.isZero()||(m=u==="base"?on(n.raw.mul(a),o):on(n.raw.mul(o),a));let l=new Pe(J).add(r).mul(m).quotient,f=i instanceof h?new q(i,m):new ae(i,m),y=i instanceof h?new q(i,l):new ae(i,l);return x.debug("anotheAmount:",f.toFixed()),x.debug("maxAnotheAmount:",y.toFixed()),{anotherAmount:f,maxAnotherAmount:y}}static _computePriceImpact(e,t,n){let i=e.raw.mul(t),r=i.sub(n).div(i);return new Pe(r.numerator,r.denominator)}static getRate(e){let{baseReserve:t,quoteReserve:n,baseDecimals:i,quoteDecimals:r}=e;return new ie(new Ee(i),t,new Ee(r),n)}static computeAmountIn({poolKeys:e,poolInfo:t,amountOut:n,currencyIn:i,slippage:r}){let{baseReserve:o,quoteReserve:a}=t;x.debug("baseReserve:",o.toString()),x.debug("quoteReserve:",a.toString());let c=n instanceof q?n.token:n.currency;x.debug("currencyOut:",c),x.debug("amountOut:",n.toFixed()),x.debug("currencyIn:",i),x.debug("slippage:",`${r.toSignificant()}%`);let u=[o,a],m=this._getAmountSide(n,e);m==="base"&&u.reverse(),x.debug("output side:",m);let[b,l]=u,f=new ie(i,b,c,l);x.debug("currentPrice:",`1 ${i.symbol} \u2248 ${f.toFixed()} ${c.symbol}`),x.debug("currentPrice invert:",`1 ${c.symbol} \u2248 ${f.invert().toFixed()} ${i.symbol}`);let y=O,p=n.raw;if(!p.isZero()){p.gt(l)&&(p=l.sub(J));let D=l.sub(p);y=b.mul(p).div(D).mul(gn).div(gn.sub(Mi))}let k=new Pe(J).add(r).mul(y).quotient,T=i instanceof h?new q(i,y):new ae(i,y),I=i instanceof h?new q(i,k):new ae(i,k);x.debug("amountIn:",T.toFixed()),x.debug("maxAmountIn:",I.toFixed());let P=null;!y.isZero()&&!p.isZero()&&(P=new ie(i,y,c,p),x.debug("executionPrice:",`1 ${i.symbol} \u2248 ${P.toFixed()} ${c.symbol}`),x.debug("executionPrice invert:",`1 ${c.symbol} \u2248 ${P.invert().toFixed()} ${i.symbol}`));let w=this._computePriceImpact(f,y,p);return x.debug("priceImpact:",`${w.toSignificant()}%`),{amountIn:T,maxAmountIn:I,currentPrice:f,executionPrice:P,priceImpact:w}}},Ae=ut;Ae.computeAmountOut=({poolKeys:e,poolInfo:t,amountIn:n,currencyOut:i,slippage:r})=>{let o=n instanceof q?n.token:h.WSOL,a=i instanceof h?i:h.WSOL;x.assertArgument(ut.includesToken(o,e)&&ut.includesToken(a,e),"token not match with pool","poolKeys",{poolKeys:e,tokenIn:o,tokenOut:a});let{baseReserve:c,quoteReserve:u}=t;x.debug("baseReserve:",c.toString()),x.debug("quoteReserve:",u.toString());let m=n instanceof q?n.token:n.currency;x.debug("currencyIn:",m),x.debug("amountIn:",n.toFixed()),x.debug("currencyOut:",i),x.debug("slippage:",`${r.toSignificant()}%`);let b=[c,u],l=ut._getAmountSide(n,e);l==="quote"&&b.reverse(),x.debug("input side:",l);let[f,y]=b,p;if(e.version===4)p=new ie(m,f,i,y);else{let G=Ui(xt,c.toNumber(),u.toNumber(),!1);l==="quote"?p=new ie(m,new ke(G*1e6),i,new ke(1e6)):p=new ie(m,new ke(1e6),i,new ke(G*1e6))}x.debug("currentPrice:",`1 ${m.symbol} \u2248 ${p.toFixed()} ${i.symbol}`),x.debug("currentPrice invert:",`1 ${i.symbol} \u2248 ${p.invert().toFixed()} ${m.symbol}`);let A=n.raw,k=O,T=O;if(!A.isZero())if(e.version===4){T=A.mul(Mi).div(gn);let G=A.sub(T),te=f.add(G);k=y.mul(G).div(te)}else{T=A.mul(new ke(2)).div(new ke(1e4));let G=A.sub(T);l==="quote"?k=new ke(Di(xt,u.toNumber(),c.toNumber(),G.toNumber())):k=new ke(Ni(xt,u.toNumber(),c.toNumber(),G.toNumber()))}let P=new Pe(J).add(r).invert().mul(k).quotient,w=i instanceof h?new q(i,k):new ae(i,k),D=i instanceof h?new q(i,P):new ae(i,P);x.debug("amountOut:",w.toFixed()),x.debug("minAmountOut:",D.toFixed());let R=new ie(m,A.sub(T),i,k);!A.isZero()&&!k.isZero()&&(R=new ie(m,A.sub(T),i,k),x.debug("executionPrice:",`1 ${m.symbol} \u2248 ${R.toFixed()} ${i.symbol}`),x.debug("executionPrice invert:",`1 ${i.symbol} \u2248 ${R.invert().toFixed()} ${m.symbol}`));let C=R.denominator.mul(p.numerator),K=R.numerator.mul(p.denominator).sub(C).abs(),Q=new Pe(K,C);x.debug("priceImpact:",`${Q.toSignificant()}%`);let Z=m instanceof h?new q(m,T):new ae(m,T);return{amountOut:w,minAmountOut:D,currentPrice:p,executionPrice:R,priceImpact:Q,fee:Z}};import{PublicKey as wr}from"@solana/web3.js";var qi="routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS",ht=new wr(qi),Ki={[qi]:1},Vi={1:ht},_i={1:4};import{PublicKey as vi,Transaction as Fi,TransactionInstruction as Wi}from"@solana/web3.js";import{intersection as Gi,xor as Ir}from"lodash";var pe=H.from("Route"),zt=class extends Ne{static getProgramId(e){let t=Vi[e];return pe.assertArgument(!!t,"invalid version","version",e),t}static getVersion(e){let t=e.toBase58(),n=Ki[t];return pe.assertArgument(!!n,"invalid program id","programId",t),n}static getLiquidityVersion(e){let t=_i[e];return pe.assertArgument(!!t,"invalid version","version",e),t}static getAssociatedMiddleStatusAccount({programId:e,fromPoolId:t,middleMint:n,owner:i}){let{publicKey:r}=re([t.toBuffer(),n.toBuffer(),i.toBuffer()],e);return r}static makeSwapInstruction(e){let{fixedSide:t}=e;return t==="in"?[this.makeSwapInFixedInInstruction(e),this.makeSwapOutFixedInInstruction(e)]:pe.throwArgumentError("invalid params","params",e)}static makeSwapInFixedInInstruction({fromPoolKeys:e,toPoolKeys:t,userKeys:n,amountIn:i,amountOut:r}){let o=N([_("instruction"),S("amountIn"),S("amountOut")]),a=Buffer.alloc(o.span),c;return e.version===4?(o.encode({instruction:0,amountIn:X(i),amountOut:X(r)},a),c=[L(Te,!1),L(j,!1),L(e.programId,!1),g(e.id,!1),L(t.id,!1),L(e.authority,!1),g(e.openOrders,!1),g(e.baseVault,!1),g(e.quoteVault,!1),L(e.marketProgramId,!1),g(e.marketId,!1),g(e.marketBids,!1),g(e.marketAsks,!1),g(e.marketEventQueue,!1),g(e.marketBaseVault,!1),g(e.marketQuoteVault,!1),L(e.marketAuthority,!1),g(n.inTokenAccount,!1),g(n.middleTokenAccount,!1),g(n.middleStatusAccount,!1),L(n.owner,!0)]):(o.encode({instruction:2,amountIn:X(i),amountOut:X(r)},a),c=[L(Te,!1),L(j,!1),L(e.programId,!1),g(e.id,!1),L(t.id,!1),L(e.authority,!1),g(e.openOrders,!1),g(e.baseVault,!1),g(e.quoteVault,!1),L(Fe,!1),L(e.marketProgramId,!1),g(e.marketId,!1),g(e.marketBids,!1),g(e.marketAsks,!1),g(e.marketEventQueue,!1),g(e.id,!1),g(e.id,!1),g(e.id,!1),g(n.inTokenAccount,!1),g(n.middleTokenAccount,!1),g(n.middleStatusAccount,!1),L(n.owner,!0)]),new Wi({programId:ht,keys:c,data:a})}static makeSwapOutFixedInInstruction({fromPoolKeys:e,toPoolKeys:t,userKeys:n}){let i=N([_("instruction")]),r=Buffer.alloc(i.span),o;return t.version===4?(i.encode({instruction:1},r),o=[L(j,!1),L(t.programId,!1),L(e.id,!1),g(t.id,!1),L(t.authority,!1),g(t.openOrders,!1),g(t.baseVault,!1),g(t.quoteVault,!1),L(t.marketProgramId,!1),g(t.marketId,!1),g(t.marketBids,!1),g(t.marketAsks,!1),g(t.marketEventQueue,!1),g(t.marketBaseVault,!1),g(t.marketQuoteVault,!1),L(t.marketAuthority,!1),g(n.middleTokenAccount,!1),g(n.outTokenAccount,!1),g(n.middleStatusAccount,!1),L(n.owner,!0)]):(i.encode({instruction:3},r),o=[L(j,!1),L(t.programId,!1),L(e.id,!1),g(t.id,!1),L(t.authority,!1),g(t.openOrders,!1),g(t.baseVault,!1),g(t.quoteVault,!1),L(Fe,!1),L(t.marketProgramId,!1),g(t.marketId,!1),g(t.marketBids,!1),g(t.marketAsks,!1),g(t.marketEventQueue,!1),g(t.id,!1),g(t.id,!1),g(t.id,!1),g(n.middleTokenAccount,!1),g(n.outTokenAccount,!1),g(n.middleStatusAccount,!1),L(n.owner,!0)]),new Wi({programId:ht,keys:o,data:r})}static makeSwapTransaction(e){return U(this,null,function*(){let{connection:t,fromPoolKeys:n,toPoolKeys:i,userKeys:r,amountIn:o,amountOut:a,fixedSide:c,config:u}=e,{tokenAccounts:m,owner:b}=r;pe.debug("amountIn:",o),pe.debug("amountOut:",a),pe.assertArgument(!o.isZero()&&!a.isZero(),"amounts must greater than zero","currencyAmounts",{amountIn:o.toFixed(),amountOut:a.toFixed()});let{bypassAssociatedCheck:l}=M({bypassAssociatedCheck:!1},u),f=o instanceof q?o.token:h.WSOL,y=a instanceof q?a.token:h.WSOL,p=this._selectTokenAccount({tokenAccounts:m,mint:f.mint,owner:b,config:{associatedOnly:!1}}),A=this._selectTokenAccount({tokenAccounts:m,mint:y.mint,owner:b}),k=[n.baseMint.toBase58(),n.quoteMint.toBase58()],T=[i.baseMint.toBase58(),i.quoteMint.toBase58()],P=Gi(k,T)[0],w=new vi(P),D=this._selectTokenAccount({tokenAccounts:m,mint:w,owner:b}),[R,C]=[o.raw,a.raw],K=[],Q=[],Z=[],G=yield this._handleTokenAccount({connection:t,side:"in",amount:R,mint:f.mint,tokenAccount:p,owner:b,frontInstructions:K,signers:Q,bypassAssociatedCheck:l}),te=yield this._handleTokenAccount({connection:t,side:"out",amount:0,mint:y.mint,tokenAccount:A,owner:b,frontInstructions:K,signers:Q,bypassAssociatedCheck:l}),oe=yield this._handleTokenAccount({connection:t,side:"in",amount:0,mint:w,tokenAccount:D,owner:b,frontInstructions:K,signers:Q,bypassAssociatedCheck:l});Z.push(...this.makeSwapInstruction({fromPoolKeys:n,toPoolKeys:i,userKeys:{inTokenAccount:G,outTokenAccount:te,middleTokenAccount:oe,middleStatusAccount:this.getAssociatedMiddleStatusAccount({programId:ht,fromPoolId:n.id,middleMint:w,owner:b}),owner:b},amountIn:R,amountOut:C,fixedSide:c}));let ne=null,xe=null;return K.length>0&&(ne={transaction:new Fi().add(...K),signers:Q}),Z.length>0&&(xe={transaction:new Fi().add(...Z),signers:[]}),{setupTransaction:ne,swapTransaction:xe}})}static computeAmountOut({fromPoolKeys:e,toPoolKeys:t,fromPoolInfo:n,toPoolInfo:i,amountIn:r,currencyOut:o,slippage:a}){let{swap:c}=Ae.getEnabledFeatures(n),{swap:u}=Ae.getEnabledFeatures(i);pe.assertArgument(c&&u,"pools swap not enabled","pools",{fromPoolKeys:e,toPoolKeys:t,fromPoolInfo:n,toPoolInfo:i});let m=r instanceof q?r.token:h.WSOL,b=o instanceof h?o:h.WSOL;pe.assertArgument(Ae.includesToken(m,e)&&Ae.includesToken(b,t),"pools cannot be routed","pools",{fromPoolKeys:e,toPoolKeys:t});let l=[e.baseMint.toBase58(),e.quoteMint.toBase58()],f=[t.baseMint.toBase58(),t.quoteMint.toBase58()],y=[...l,...f],p=[n.baseDecimals,n.quoteDecimals,i.baseDecimals,i.quoteDecimals],A=m.mint.toBase58(),k=b.mint.toBase58(),T=Ir(l,f);pe.assertArgument(T.length===2&&T.includes(A)&&T.includes(k),"xor tokens not match","pools",{fromPoolKeys:e,toPoolKeys:t});let I=Gi(l,f);pe.assertArgument(I.length===1,"cannot found middle token of two pools","pools",{fromPoolKeys:e,toPoolKeys:t});let P=I[0],w=y.indexOf(P),D=p[w],R=new vi(P),C=new h(R,D);pe.debug("from pool:",e),pe.debug("to pool:",t),pe.debug("intersection mints:",I),pe.debug("xor mints:",T),pe.debug("middleMint:",P);let{minAmountOut:K,priceImpact:Q,fee:Z}=Ae.computeAmountOut({poolKeys:e,poolInfo:n,amountIn:r,currencyOut:C,slippage:a}),{amountOut:G,minAmountOut:te,priceImpact:oe,fee:ne}=Ae.computeAmountOut({poolKeys:t,poolInfo:i,amountIn:K,currencyOut:o,slippage:a}),xe=null,Bt=r.raw,Ct=G.raw,mt=r instanceof q?r.token:r.currency;return!Bt.isZero()&&!Ct.isZero()&&(xe=new ie(mt,Bt,o,Ct),pe.debug("executionPrice:",`1 ${mt.symbol} \u2248 ${xe.toFixed()} ${o.symbol}`),pe.debug("executionPrice invert:",`1 ${o.symbol} \u2248 ${xe.invert().toFixed()} ${mt.symbol}`)),{amountOut:G,minAmountOut:te,executionPrice:xe,priceImpact:Q.add(oe),fee:[Z,ne]}}};import{TOKEN_PROGRAM_ID as Yi}from"@solana/spl-token";import{PublicKey as He,TransactionInstruction as Xi}from"@solana/web3.js";function Hi(d,e,t,n,i,r,o,a,c,u,m){let b=N([_("instruction"),S("amountIn"),S("amountOut")]),l=[{pubkey:Te,isSigner:!1,isWritable:!1},{pubkey:Yi,isSigner:!1,isWritable:!1},{pubkey:new He(String(e.programId)),isSigner:!1,isWritable:!1},{pubkey:new He(String(e.id)),isSigner:!1,isWritable:!0},{pubkey:new He(String(t.id)),isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!0,isWritable:!1}];if(e.version===6){let y=e;l.push({pubkey:y.ammConfig.id,isSigner:!1,isWritable:!1},{pubkey:y.id,isSigner:!1,isWritable:!0},{pubkey:y.mintA.mint.equals(a)?y.mintA.vault:y.mintB.vault,isSigner:!1,isWritable:!0},{pubkey:y.mintA.mint.equals(a)?y.mintB.vault:y.mintA.vault,isSigner:!1,isWritable:!0},{pubkey:y.observationId,isSigner:!1,isWritable:!0},...m.map(p=>({pubkey:p,isSigner:!1,isWritable:!0})))}else if(e.version===5){let y=Le(e);l.push({pubkey:y.authority,isSigner:!1,isWritable:!1},{pubkey:y.marketProgramId,isSigner:!1,isWritable:!1},{pubkey:y.id,isSigner:!1,isWritable:!0},{pubkey:new He("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),isSigner:!1,isWritable:!1},{pubkey:y.openOrders,isSigner:!1,isWritable:!0},{pubkey:y.baseVault,isSigner:!1,isWritable:!0},{pubkey:y.quoteVault,isSigner:!1,isWritable:!0},{pubkey:y.marketId,isSigner:!1,isWritable:!0},{pubkey:y.marketBids,isSigner:!1,isWritable:!0},{pubkey:y.marketAsks,isSigner:!1,isWritable:!0},{pubkey:y.marketEventQueue,isSigner:!1,isWritable:!0},{pubkey:y.id,isSigner:!1,isWritable:!0},{pubkey:y.id,isSigner:!1,isWritable:!0})}else if(e.version===4){let y=Le(e);l.push({pubkey:y.authority,isSigner:!1,isWritable:!1},{pubkey:y.marketProgramId,isSigner:!1,isWritable:!1},{pubkey:y.marketAuthority,isSigner:!1,isWritable:!1},{pubkey:y.openOrders,isSigner:!1,isWritable:!0},{pubkey:y.baseVault,isSigner:!1,isWritable:!0},{pubkey:y.quoteVault,isSigner:!1,isWritable:!0},{pubkey:y.marketId,isSigner:!1,isWritable:!0},{pubkey:y.marketBids,isSigner:!1,isWritable:!0},{pubkey:y.marketAsks,isSigner:!1,isWritable:!0},{pubkey:y.marketEventQueue,isSigner:!1,isWritable:!0},...y.marketProgramId.toString()==="srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"?[{pubkey:y.marketBaseVault,isSigner:!1,isWritable:!0},{pubkey:y.marketQuoteVault,isSigner:!1,isWritable:!0}]:[{pubkey:y.id,isSigner:!1,isWritable:!0},{pubkey:y.id,isSigner:!1,isWritable:!0}])}let f=Buffer.alloc(b.span);return b.encode({instruction:4,amountIn:c,amountOut:u},f),new Xi({keys:l,programId:d,data:f})}function Qi(d,e,t,n,i,r,o,a,c){let u=N([_("instruction")]),m=[{pubkey:Te,isSigner:!1,isWritable:!1},{pubkey:Yi,isSigner:!1,isWritable:!1},{pubkey:new He(String(t.programId)),isSigner:!1,isWritable:!1},{pubkey:new He(String(t.id)),isSigner:!1,isWritable:!0},{pubkey:new He(String(e.id)),isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!0,isWritable:!1}];if(t.version===6){let l=t;m.push({pubkey:l.ammConfig.id,isSigner:!1,isWritable:!1},{pubkey:l.id,isSigner:!1,isWritable:!0},{pubkey:l.mintA.mint.equals(a)?l.mintA.vault:l.mintB.vault,isSigner:!1,isWritable:!0},{pubkey:l.mintA.mint.equals(a)?l.mintB.vault:l.mintA.vault,isSigner:!1,isWritable:!0},{pubkey:l.observationId,isSigner:!1,isWritable:!0},...c.map(f=>({pubkey:f,isSigner:!1,isWritable:!0})))}else if(t.version===5){let l=Le(t);m.push({pubkey:l.authority,isSigner:!1,isWritable:!1},{pubkey:l.marketProgramId,isSigner:!1,isWritable:!1},{pubkey:l.id,isSigner:!1,isWritable:!0},{pubkey:new He("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),isSigner:!1,isWritable:!1},{pubkey:l.openOrders,isSigner:!1,isWritable:!0},{pubkey:l.baseVault,isSigner:!1,isWritable:!0},{pubkey:l.quoteVault,isSigner:!1,isWritable:!0},{pubkey:l.marketId,isSigner:!1,isWritable:!0},{pubkey:l.marketBids,isSigner:!1,isWritable:!0},{pubkey:l.marketAsks,isSigner:!1,isWritable:!0},{pubkey:l.marketEventQueue,isSigner:!1,isWritable:!0},{pubkey:l.id,isSigner:!1,isWritable:!0},{pubkey:l.id,isSigner:!1,isWritable:!0})}else if(t.version===4){let l=Le(t);m.push({pubkey:l.authority,isSigner:!1,isWritable:!1},{pubkey:l.marketProgramId,isSigner:!1,isWritable:!1},{pubkey:l.marketAuthority,isSigner:!1,isWritable:!1},{pubkey:l.openOrders,isSigner:!1,isWritable:!0},{pubkey:l.baseVault,isSigner:!1,isWritable:!0},{pubkey:l.quoteVault,isSigner:!1,isWritable:!0},{pubkey:l.marketId,isSigner:!1,isWritable:!0},{pubkey:l.marketBids,isSigner:!1,isWritable:!0},{pubkey:l.marketAsks,isSigner:!1,isWritable:!0},{pubkey:l.marketEventQueue,isSigner:!1,isWritable:!0},...l.marketProgramId.toString()==="srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"?[{pubkey:l.marketBaseVault,isSigner:!1,isWritable:!0},{pubkey:l.marketQuoteVault,isSigner:!1,isWritable:!0}]:[{pubkey:l.id,isSigner:!1,isWritable:!0},{pubkey:l.id,isSigner:!1,isWritable:!0}])}let b=Buffer.alloc(u.span);return u.encode({instruction:5},b),new Xi({keys:m,programId:d,data:b})}var Jt=class extends Ne{static getAllRoute({inputMint:e,outputMint:t,apiPoolList:n,ammV3List:i}){var f,y;let r={},o={},a=[],c={};for(let p of i!=null?i:[]){if((p.mintA.mint.equals(e)&&p.mintB.mint.equals(t)||p.mintA.mint.equals(t)&&p.mintB.mint.equals(e))&&(a.push(p),o[p.id.toString()]=p),p.mintA.mint.equals(e)){let A=p.mintB.mint.toString();c[A]===void 0&&(c[A]={in:[],out:[],mDecimals:p.mintB.decimals}),c[A].in.push(p)}if(p.mintB.mint.equals(e)){let A=p.mintA.mint.toString();c[A]===void 0&&(c[A]={in:[],out:[],mDecimals:p.mintA.decimals}),c[A].in.push(p)}if(p.mintA.mint.equals(t)){let A=p.mintB.mint.toString();c[A]===void 0&&(c[A]={in:[],out:[],mDecimals:p.mintB.decimals}),c[A].out.push(p)}if(p.mintB.mint.equals(t)){let A=p.mintA.mint.toString();c[A]===void 0&&(c[A]={in:[],out:[],mDecimals:p.mintA.decimals}),c[A].out.push(p)}}let u=[],m=e.toString(),b=t.toString();for(let p of(f=(n!=null?n:{}).official)!=null?f:[])(p.baseMint===m&&p.quoteMint===b||p.baseMint===b&&p.quoteMint===m)&&(a.push(p),r[p.id]=p,u.push(p)),p.baseMint===m&&(c[p.quoteMint]===void 0&&(c[p.quoteMint]={in:[],out:[],mDecimals:p.quoteDecimals}),c[p.quoteMint].in.push(p)),p.quoteMint===m&&(c[p.baseMint]===void 0&&(c[p.baseMint]={in:[],out:[],mDecimals:p.baseDecimals}),c[p.baseMint].in.push(p)),p.baseMint===b&&(c[p.quoteMint]===void 0&&(c[p.quoteMint]={in:[],out:[],mDecimals:p.quoteDecimals}),c[p.quoteMint].out.push(p)),p.quoteMint===b&&(c[p.baseMint]===void 0&&(c[p.baseMint]={in:[],out:[],mDecimals:p.baseDecimals}),c[p.baseMint].out.push(p));let l=u.length===0;for(let p of(y=(n!=null?n:{}).unOfficial)!=null?y:[])(p.baseMint===m&&p.quoteMint===b||p.baseMint===b&&p.quoteMint===m)&&(a.push(p),r[p.id]=p,l&&u.push(p)),p.baseMint===m&&(c[p.quoteMint]===void 0&&(c[p.quoteMint]={in:[],out:[],mDecimals:p.quoteDecimals}),c[p.quoteMint].in.push(p)),p.quoteMint===m&&(c[p.baseMint]===void 0&&(c[p.baseMint]={in:[],out:[],mDecimals:p.baseDecimals}),c[p.baseMint].in.push(p)),p.baseMint===b&&(c[p.quoteMint]===void 0&&(c[p.quoteMint]={in:[],out:[],mDecimals:p.quoteDecimals}),c[p.quoteMint].out.push(p)),p.quoteMint===b&&(c[p.baseMint]===void 0&&(c[p.baseMint]={in:[],out:[],mDecimals:p.baseDecimals}),c[p.baseMint].out.push(p));for(let p of Object.keys(c)){if(c[p].in.length===1&&c[p].out.length===1&&String(c[p].in[0].id)===String(c[p].out[0].id)){delete c[p];continue}if(c[p].in.length===0||c[p].out.length===0){delete c[p];continue}let A=c[p];for(let k of A.in)for(let T of A.out)k.version===6&&o[k.id.toString()]===void 0?o[k.id.toString()]=k:k.version!==6&&r[k.id]===void 0&&(r[k.id]=k),T.version===6&&o[T.id.toString()]===void 0?o[T.id.toString()]=T:T.version!==6&&r[T.id]===void 0&&(r[T.id]=T)}return{directPath:a,addLiquidityPools:u,routePathDict:c,needSimulate:Object.values(r),needTickArray:Object.values(o)}}static fetchMultipleInfo(i){return U(this,arguments,function*({connection:e,pools:t,batchRequest:n=!0}){t.find(c=>c.version===5)&&(yield kn(e));let r=t.map(c=>Ae.makeSimulatePoolInfoInstruction({poolKeys:Le(c)})),o=yield _t(e,r,"GetPoolData",n),a={};for(let c of o){let u=vt(c,"GetPoolData"),m=JSON.parse(u).amm_id,b=new Rt(ue(u,"status")),l=Number(ue(u,"coin_decimals")),f=Number(ue(u,"pc_decimals")),y=Number(ue(u,"lp_decimals")),p=new Rt(ue(u,"pool_coin_amount")),A=new Rt(ue(u,"pool_pc_amount")),k=new Rt(ue(u,"pool_lp_supply")),T="0";try{T=ue(u,"pool_open_time")}catch(I){}a[m]={ammId:m,status:b,baseDecimals:l,quoteDecimals:f,lpDecimals:y,baseReserve:p,quoteReserve:A,lpSupply:k,startTime:new Rt(T)}}return a})}static getAddLiquidityDefaultPool({addLiquidityPools:e,poolInfosCache:t}){if(e.length===0)return;if(e.length===1||(e.sort((i,r)=>r.version-i.version),e[0].version!==e[1].version))return e[0];let n=e.filter(i=>i.version===e[0].version);return n.sort((i,r)=>this.ComparePoolSize(i,r,t)),n[0]}static ComparePoolSize(e,t,n){let i=n[e.id],r=n[t.id];return i===void 0?1:r===void 0?-1:e.baseMint===t.baseMint?i.baseReserve.sub(r.baseReserve).gte(O)?-1:1:i.baseReserve.sub(r.quoteReserve).gte(O)?-1:1}static getAllRouteComputeAmountOut({inputTokenAmount:e,outputToken:t,directPath:n,routePathDict:i,simulateCache:r,tickCache:o,slippage:a,chainTime:c}){let u=e,m=[];for(let b of n)if(b.version===6)try{let{amountOut:l,minAmountOut:f,currentPrice:y,executionPrice:p,priceImpact:A,fee:k,remainingAccounts:T}=ve.computeAmountOutFormat({poolInfo:b,tickArrayCache:o[b.id.toString()],amountIn:u,currencyOut:t,slippage:a});m.push({amountIn:u,amountOut:l,minAmountOut:f,currentPrice:y,executionPrice:p,priceImpact:A,fee:[k],remainingAccounts:[T],routeType:"amm",poolKey:[b],middleMint:void 0,poolReady:!0,poolType:"CLMM"})}catch(l){}else try{if(![1,6,7].includes(r[b.id].status.toNumber()))continue;let{amountOut:l,minAmountOut:f,currentPrice:y,executionPrice:p,priceImpact:A,fee:k}=Ae.computeAmountOut({poolKeys:Le(b),poolInfo:r[b.id],amountIn:u,currencyOut:t,slippage:a});m.push({amountIn:u,amountOut:l,minAmountOut:f,currentPrice:y,executionPrice:p,priceImpact:A,fee:[k],routeType:"amm",poolKey:[b],remainingAccounts:[],middleMint:void 0,poolReady:r[b.id].startTime.toNumber()<c,poolType:b.version===5?"STABLE":void 0})}catch(l){}for(let[b,l]of Object.entries(i))for(let f of l.in)if(!(!r[f.id]&&!o[f.id.toString()])&&!(f.version!==6&&![1,6,7].includes(r[f.id].status.toNumber()))){for(let y of l.out)if(!(!r[y.id]&&!o[y.id.toString()])&&!(y.version!==6&&![1,6,7].includes(r[y.id].status.toNumber())))try{let{amountOut:p,minAmountOut:A,executionPrice:k,priceImpact:T,fee:I,remainingAccounts:P}=Jt.computeAmountOut({middleMintInfo:{mint:new Zt(b),decimals:l.mDecimals},amountIn:u,currencyOut:t,slippage:a,fromPool:f,toPool:y,simulateCache:r,tickCache:o}),w=f.version===6?!0:r[f.id].startTime.toNumber()<c,D=y.version===6?!0:r[y.id].startTime.toNumber()<c,R=f.version===6?"CLMM":f.version===5?"STABLE":void 0,C=y.version===6?"CLMM":y.version===5?"STABLE":void 0;m.push({amountIn:u,amountOut:p,minAmountOut:A,currentPrice:void 0,executionPrice:k,priceImpact:T,fee:I,routeType:"route",poolKey:[f,y],remainingAccounts:P,middleMint:new Zt(b),poolReady:w&&D,poolType:[R,C]})}catch(p){}}return m.sort((b,l)=>b.amountOut.raw.sub(l.amountOut.raw).gt(O)?-1:1),m}static computeAmountOut({middleMintInfo:e,amountIn:t,currencyOut:n,slippage:i,fromPool:r,toPool:o,simulateCache:a,tickCache:c}){let u=new h(e.mint,e.decimals),m,b,l,f,y=new Pe(0,100);if(r.version===6){let{minAmountOut:C,priceImpact:K,fee:Q,remainingAccounts:Z}=ve.computeAmountOutFormat({poolInfo:r,tickArrayCache:c[r.id.toString()],amountIn:t,currencyOut:u,slippage:y});m=C,b=K,l=Q,f=Z}else{let{minAmountOut:C,priceImpact:K,fee:Q}=Ae.computeAmountOut({poolKeys:Le(r),poolInfo:a[r.id],amountIn:t,currencyOut:u,slippage:y});m=C,b=K,l=Q}let p,A,k,T,I;if(o.version===6){let{amountOut:C,minAmountOut:K,priceImpact:Q,fee:Z,remainingAccounts:G}=ve.computeAmountOutFormat({poolInfo:o,tickArrayCache:c[o.id.toString()],amountIn:m,currencyOut:n,slippage:i});p=C,A=K,k=Q,T=Z,I=G}else{let{amountOut:C,minAmountOut:K,priceImpact:Q,fee:Z}=Ae.computeAmountOut({poolKeys:Le(o),poolInfo:a[o.id],amountIn:m,currencyOut:n,slippage:i});p=C,A=K,k=Q,T=Z}let P=null,w=t.raw,D=p.raw,R=t instanceof q?t.token:t.currency;return!w.isZero()&&!D.isZero()&&(P=new ie(R,w,n,D)),{minMiddleAmountOut:m,amountOut:p,minAmountOut:A,executionPrice:P,priceImpact:b.add(k),fee:[l,T],remainingAccounts:[f,I]}}static makeSwapInstruction({routeProgram:e,ownerInfo:t,inputMint:n,swapInfo:i}){if(i.routeType==="amm")if(i.poolKey[0].version===6){let r=i.poolKey[0],o=n.equals(r.mintA.mint)?Ke.add(J):Ve.sub(J);return ve.makeSwapBaseInInstructions({poolInfo:r,ownerInfo:{wallet:t.wallet,tokenAccountA:r.mintA.mint.equals(n)?t.sourceToken:t.destinationToken,tokenAccountB:r.mintA.mint.equals(n)?t.destinationToken:t.sourceToken},inputMint:n,amountIn:i.amountIn.raw,amountOutMin:i.minAmountOut.raw,sqrtPriceLimitX64:o,remainingAccounts:i.remainingAccounts[0]})}else{let r=i.poolKey[0];return{signers:[],instructions:[Ae.makeSwapInstruction({poolKeys:Le(r),userKeys:{tokenAccountIn:t.sourceToken,tokenAccountOut:t.destinationToken,owner:t.wallet},amountIn:i.amountIn.raw,amountOut:i.minAmountOut.raw,fixedSide:"in"})],address:{}}}else if(i.routeType==="route"){let r=i.poolKey[0],o=i.poolKey[1];return{signers:[],instructions:[Hi(e,r,o,t.sourceToken,t.routeToken,t.userPdaAccount,t.wallet,n,i.amountIn.raw,i.minAmountOut.raw,i.remainingAccounts[0]),Qi(e,r,o,t.routeToken,t.destinationToken,t.userPdaAccount,t.wallet,i.middleMint,i.remainingAccounts[1])],address:{}}}else throw Error("route type error")}static makeSwapTranscation(r){return U(this,arguments,function*({connection:e,swapInfo:t,ownerInfo:n,checkTransaction:i}){let o=[],a=[],c=[],u=t.amountIn,m=t.amountOut,b=!(u instanceof q),l=!(m instanceof q),f=u instanceof q?u.token.mint:h.WSOL.mint,y=t.middleMint,p=m instanceof q?m.token.mint:h.WSOL.mint,A=new Zt("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),k=yield this._selectOrCreateTokenAccount({mint:f,tokenAccounts:b?[]:n.tokenAccounts,createInfo:b?{connection:e,payer:n.wallet,amount:u.raw,frontInstructions:o,endInstructions:a,signers:c}:void 0,owner:n.wallet,associatedOnly:b?!1:n.associatedOnly});if(k===void 0)throw Error("input account check error");let T=yield this._selectOrCreateTokenAccount({mint:p,tokenAccounts:n.tokenAccounts,createInfo:{connection:e,payer:n.wallet,amount:0,frontInstructions:o,endInstructions:l?a:void 0,signers:c},owner:n.wallet,associatedOnly:n.associatedOnly}),I;t.routeType==="route"&&(I=yield this._selectOrCreateTokenAccount({mint:y,tokenAccounts:n.tokenAccounts,createInfo:{connection:e,payer:n.wallet,amount:0,frontInstructions:o,endInstructions:a,signers:c},owner:n.wallet,associatedOnly:!1}));let P=this.makeSwapInstruction({routeProgram:A,inputMint:f,swapInfo:t,ownerInfo:{wallet:n.wallet,sourceToken:k,routeToken:I,destinationToken:T,userPdaAccount:t.poolKey.length===2?zt.getAssociatedMiddleStatusAccount({programId:A,fromPoolId:new Zt(String(t.poolKey[0].id)),owner:n.wallet,middleMint:t.middleMint}):void 0}}),w=[],D=[...o,...P.instructions,...a],R=[...c,...P.signers];if(i)if(At(D,[n.wallet,...R.map(C=>C.publicKey)]))w.push({transaction:new We().add(...D),signer:R});else{if(o.length>0&&w.push({transaction:new We().add(...o),signer:[...c]}),At(P.instructions,[n.wallet]))w.push({transaction:new We().add(...P.instructions),signer:[...P.signers]});else for(let C of P.instructions)w.push({transaction:new We().add(C),signer:[...P.signers]});a.length>0&&w.push({transaction:new We().add(...a),signer:[]})}else t.routeType==="amm"?w.push({transaction:new We().add(...D),signer:R}):(o.length>0&&w.push({transaction:new We().add(...o),signer:[...c]}),w.push({transaction:new We().add(...P.instructions),signer:[...P.signers]}),a.length>0&&w.push({transaction:new We().add(...a),signer:[]}));return{transactions:w,address:M({},P.address)}})}};export{Jt as TradeV2};
//# sourceMappingURL=trade.mjs.map